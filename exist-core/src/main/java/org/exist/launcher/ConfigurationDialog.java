begin_unit|revision:1.0.0;language:Java;cregit-version:0.0.1
begin_package
package|package
name|org
operator|.
name|exist
operator|.
name|launcher
package|;
end_package

begin_import
import|import
name|java
operator|.
name|awt
operator|.
name|*
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|IOException
import|;
end_import

begin_import
import|import
name|java
operator|.
name|nio
operator|.
name|file
operator|.
name|Files
import|;
end_import

begin_import
import|import
name|java
operator|.
name|nio
operator|.
name|file
operator|.
name|Path
import|;
end_import

begin_import
import|import
name|java
operator|.
name|nio
operator|.
name|file
operator|.
name|Paths
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Map
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Optional
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Properties
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|function
operator|.
name|Consumer
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|logging
operator|.
name|Level
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|logging
operator|.
name|Logger
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|stream
operator|.
name|Stream
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|swing
operator|.
name|*
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|xml
operator|.
name|transform
operator|.
name|TransformerException
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|commons
operator|.
name|lang3
operator|.
name|SystemUtils
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|collections
operator|.
name|CollectionCache
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|storage
operator|.
name|BrokerPool
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|storage
operator|.
name|DefaultCacheManager
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|util
operator|.
name|Configuration
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|util
operator|.
name|ConfigurationHelper
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|util
operator|.
name|DatabaseConfigurationException
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|util
operator|.
name|FileUtils
import|;
end_import

begin_import
import|import static
name|org
operator|.
name|exist
operator|.
name|launcher
operator|.
name|ConfigurationUtility
operator|.
name|LAUNCHER_PROPERTY_MAX_MEM
import|;
end_import

begin_import
import|import static
name|org
operator|.
name|exist
operator|.
name|launcher
operator|.
name|ConfigurationUtility
operator|.
name|LAUNCHER_PROPERTY_MIN_MEM
import|;
end_import

begin_comment
comment|/**  *  * @author wolf  */
end_comment

begin_class
specifier|public
class|class
name|ConfigurationDialog
extends|extends
name|JDialog
block|{
specifier|private
specifier|final
name|Consumer
argument_list|<
name|Boolean
argument_list|>
name|callback
decl_stmt|;
specifier|private
name|boolean
name|changed
init|=
literal|false
decl_stmt|;
specifier|private
name|boolean
name|dataDirChanged
init|=
literal|false
decl_stmt|;
specifier|private
name|boolean
name|jettyConfigChanged
init|=
literal|false
decl_stmt|;
specifier|private
name|boolean
name|beforeStart
init|=
literal|false
decl_stmt|;
comment|/**      * Creates new form ConfigurationDialog      *      * @param callback a callback for after when the configuration is saved      *     and the dialog is dismissed.      */
specifier|public
name|ConfigurationDialog
parameter_list|(
name|Consumer
argument_list|<
name|Boolean
argument_list|>
name|callback
parameter_list|)
block|{
name|setModal
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|setTitle
argument_list|(
literal|"eXist-db System Configuration"
argument_list|)
expr_stmt|;
name|initComponents
argument_list|()
expr_stmt|;
name|this
operator|.
name|callback
operator|=
name|callback
expr_stmt|;
specifier|final
name|Properties
name|launcherProperties
init|=
name|ConfigurationUtility
operator|.
name|loadProperties
argument_list|()
decl_stmt|;
specifier|final
name|int
name|maxMemProp
init|=
name|Integer
operator|.
name|parseInt
argument_list|(
name|launcherProperties
operator|.
name|getProperty
argument_list|(
name|LAUNCHER_PROPERTY_MAX_MEM
argument_list|,
literal|"2048"
argument_list|)
argument_list|)
decl_stmt|;
name|maxMemory
operator|.
name|setValue
argument_list|(
name|maxMemProp
argument_list|)
expr_stmt|;
specifier|final
name|int
name|minMemProp
init|=
name|Integer
operator|.
name|parseInt
argument_list|(
name|launcherProperties
operator|.
name|getProperty
argument_list|(
name|LAUNCHER_PROPERTY_MIN_MEM
argument_list|,
literal|"64"
argument_list|)
argument_list|)
decl_stmt|;
name|minMemory
operator|.
name|setValue
argument_list|(
name|minMemProp
argument_list|)
expr_stmt|;
try|try
block|{
name|Configuration
name|existConfig
init|=
operator|new
name|Configuration
argument_list|()
decl_stmt|;
specifier|final
name|int
name|cacheSizeProp
init|=
name|existConfig
operator|.
name|getInteger
argument_list|(
name|DefaultCacheManager
operator|.
name|PROPERTY_CACHE_SIZE
argument_list|)
decl_stmt|;
name|cacheSize
operator|.
name|setValue
argument_list|(
name|cacheSizeProp
argument_list|)
expr_stmt|;
specifier|final
name|int
name|collectionCacheProp
init|=
name|existConfig
operator|.
name|getInteger
argument_list|(
name|CollectionCache
operator|.
name|PROPERTY_CACHE_SIZE_BYTES
argument_list|)
decl_stmt|;
name|collectionCache
operator|.
name|setValue
argument_list|(
name|collectionCacheProp
operator|/
literal|1024
operator|/
literal|1024
argument_list|)
expr_stmt|;
comment|// show in MB
specifier|final
name|Path
name|dir
init|=
operator|(
name|Path
operator|)
name|existConfig
operator|.
name|getProperty
argument_list|(
name|BrokerPool
operator|.
name|PROPERTY_DATA_DIR
argument_list|)
decl_stmt|;
name|dataDir
operator|.
name|setText
argument_list|(
name|dir
operator|.
name|toAbsolutePath
argument_list|()
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
specifier|final
name|Map
argument_list|<
name|String
argument_list|,
name|Integer
argument_list|>
name|ports
init|=
name|ConfigurationUtility
operator|.
name|getJettyPorts
argument_list|()
decl_stmt|;
if|if
condition|(
name|ports
operator|.
name|containsKey
argument_list|(
literal|"jetty.port"
argument_list|)
condition|)
block|{
name|httpPort
operator|.
name|setValue
argument_list|(
name|ports
operator|.
name|get
argument_list|(
literal|"jetty.port"
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|ports
operator|.
name|containsKey
argument_list|(
literal|"jetty.ssl.port"
argument_list|)
condition|)
block|{
name|sslPort
operator|.
name|setValue
argument_list|(
name|ports
operator|.
name|get
argument_list|(
literal|"jetty.ssl.port"
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
catch|catch
parameter_list|(
name|DatabaseConfigurationException
name|ex
parameter_list|)
block|{
name|Logger
operator|.
name|getLogger
argument_list|(
name|ConfigurationDialog
operator|.
name|class
operator|.
name|getName
argument_list|()
argument_list|)
operator|.
name|log
argument_list|(
name|Level
operator|.
name|SEVERE
argument_list|,
literal|null
argument_list|,
name|ex
argument_list|)
expr_stmt|;
block|}
name|checkCacheBoundaries
argument_list|()
expr_stmt|;
name|changed
operator|=
literal|false
expr_stmt|;
specifier|final
name|Dimension
name|d
init|=
name|Toolkit
operator|.
name|getDefaultToolkit
argument_list|()
operator|.
name|getScreenSize
argument_list|()
decl_stmt|;
name|this
operator|.
name|setLocation
argument_list|(
name|d
operator|.
name|width
operator|-
name|this
operator|.
name|getWidth
argument_list|()
operator|-
literal|40
argument_list|,
literal|60
argument_list|)
expr_stmt|;
comment|//setLocationRelativeTo(null);
name|setAlwaysOnTop
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
specifier|public
name|void
name|open
parameter_list|(
name|boolean
name|firstStart
parameter_list|)
block|{
if|if
condition|(
name|firstStart
condition|)
block|{
name|beforeStart
operator|=
literal|true
expr_stmt|;
comment|// always check data dir on first start
name|dataDirChanged
operator|=
literal|true
expr_stmt|;
name|btnCancel
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|lbStartupMsg
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|lbStartupWarn
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
if|if
condition|(
name|SystemUtils
operator|.
name|IS_OS_MAC_OSX
condition|)
block|{
name|Path
name|dir
init|=
name|Paths
operator|.
name|get
argument_list|(
name|System
operator|.
name|getProperty
argument_list|(
literal|"user.home"
argument_list|)
argument_list|)
operator|.
name|resolve
argument_list|(
literal|"Library"
argument_list|)
operator|.
name|resolve
argument_list|(
literal|"Application Support"
argument_list|)
operator|.
name|resolve
argument_list|(
literal|"org.exist"
argument_list|)
decl_stmt|;
name|dataDir
operator|.
name|setText
argument_list|(
name|dir
operator|.
name|toAbsolutePath
argument_list|()
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|lbStartupMsg
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|lbStartupWarn
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
block|}
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|requestFocus
argument_list|()
expr_stmt|;
block|}
comment|/**      * This method is called from within the constructor to initialize the form.      * WARNING: Do NOT modify this code. The content of this method is always      * regenerated by the Form Editor.      */
annotation|@
name|SuppressWarnings
argument_list|(
literal|"unchecked"
argument_list|)
comment|//<editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
specifier|private
name|void
name|initComponents
parameter_list|()
block|{
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
name|gridBagConstraints
decl_stmt|;
name|lbExistLogo
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|jLabel1
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|minMemory
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JSpinner
argument_list|()
expr_stmt|;
name|jLabel2
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|maxMemory
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JSpinner
argument_list|()
expr_stmt|;
name|jLabel3
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|jLabel4
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|jLabel5
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|cacheSize
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JSpinner
argument_list|()
expr_stmt|;
name|jLabel7
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|collectionCache
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JSpinner
argument_list|()
expr_stmt|;
name|jLabel8
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|lbCurrentUsage
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|lbStartupMsg
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|jLabel9
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|jLabel10
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|dataDir
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JTextField
argument_list|()
expr_stmt|;
name|jLabel11
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|btnPanel
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JPanel
argument_list|()
expr_stmt|;
name|btnCancel
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JButton
argument_list|()
expr_stmt|;
name|btnSave
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JButton
argument_list|()
expr_stmt|;
name|btnSelectDir
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JButton
argument_list|()
expr_stmt|;
name|lbStartupWarn
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|jLabel11
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|jLabel12
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|jLabel13
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|jLabel14
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|jLabel15
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|httpPort
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JSpinner
argument_list|()
expr_stmt|;
name|sslPort
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JSpinner
argument_list|()
expr_stmt|;
name|setTitle
argument_list|(
literal|"eXist-db Configuration"
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|setLayout
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagLayout
argument_list|()
argument_list|)
expr_stmt|;
name|lbExistLogo
operator|.
name|setIcon
argument_list|(
operator|new
name|javax
operator|.
name|swing
operator|.
name|ImageIcon
argument_list|(
name|getClass
argument_list|()
operator|.
name|getResource
argument_list|(
literal|"/org/exist/client/icons/x.png"
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|// NOI18N
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|0
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|0
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridheight
operator|=
literal|6
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|16
argument_list|,
literal|0
argument_list|,
literal|6
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|lbExistLogo
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel1
operator|.
name|setText
argument_list|(
literal|"Min Memory"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|22
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel1
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|minMemory
operator|.
name|setModel
argument_list|(
operator|new
name|javax
operator|.
name|swing
operator|.
name|SpinnerNumberModel
argument_list|(
literal|64
argument_list|,
literal|64
argument_list|,
literal|256
argument_list|,
literal|64
argument_list|)
argument_list|)
expr_stmt|;
name|minMemory
operator|.
name|addChangeListener
argument_list|(
name|this
operator|::
name|minMemoryStateChanged
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|3
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|ipadx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|NORTHWEST
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|minMemory
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel2
operator|.
name|setText
argument_list|(
literal|"Max Memory"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|5
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|22
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel2
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|maxMemory
operator|.
name|setModel
argument_list|(
operator|new
name|javax
operator|.
name|swing
operator|.
name|SpinnerNumberModel
argument_list|(
literal|1024
argument_list|,
literal|512
argument_list|,
literal|null
argument_list|,
literal|64
argument_list|)
argument_list|)
expr_stmt|;
name|maxMemory
operator|.
name|addChangeListener
argument_list|(
name|this
operator|::
name|maxMemoryChanged
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|3
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|5
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|ipadx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|NORTHWEST
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|maxMemory
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel3
operator|.
name|setFont
argument_list|(
name|jLabel3
operator|.
name|getFont
argument_list|()
operator|.
name|deriveFont
argument_list|(
name|jLabel3
operator|.
name|getFont
argument_list|()
operator|.
name|getStyle
argument_list|()
operator||
name|java
operator|.
name|awt
operator|.
name|Font
operator|.
name|BOLD
argument_list|)
argument_list|)
expr_stmt|;
name|jLabel3
operator|.
name|setText
argument_list|(
literal|"Java Memory"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|2
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridwidth
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|NORTHWEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|26
argument_list|,
literal|22
argument_list|,
literal|16
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel3
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel4
operator|.
name|setFont
argument_list|(
name|jLabel4
operator|.
name|getFont
argument_list|()
operator|.
name|deriveFont
argument_list|(
name|jLabel4
operator|.
name|getFont
argument_list|()
operator|.
name|getStyle
argument_list|()
operator||
name|java
operator|.
name|awt
operator|.
name|Font
operator|.
name|BOLD
argument_list|)
argument_list|)
expr_stmt|;
name|jLabel4
operator|.
name|setText
argument_list|(
literal|"Caches"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|6
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|NORTHWEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|26
argument_list|,
literal|22
argument_list|,
literal|16
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel4
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel5
operator|.
name|setText
argument_list|(
literal|"General Cache"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|7
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|22
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel5
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|cacheSize
operator|.
name|setModel
argument_list|(
operator|new
name|javax
operator|.
name|swing
operator|.
name|SpinnerNumberModel
argument_list|(
literal|128
argument_list|,
literal|48
argument_list|,
literal|256
argument_list|,
literal|16
argument_list|)
argument_list|)
expr_stmt|;
name|cacheSize
operator|.
name|addChangeListener
argument_list|(
name|this
operator|::
name|cacheSizeStateChanged
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|3
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|7
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|ipadx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|NORTHWEST
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|cacheSize
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel7
operator|.
name|setText
argument_list|(
literal|"Collection Cache"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|8
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|22
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel7
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|collectionCache
operator|.
name|setModel
argument_list|(
operator|new
name|javax
operator|.
name|swing
operator|.
name|SpinnerNumberModel
argument_list|(
literal|48
argument_list|,
literal|48
argument_list|,
literal|256
argument_list|,
literal|16
argument_list|)
argument_list|)
expr_stmt|;
name|collectionCache
operator|.
name|addChangeListener
argument_list|(
name|this
operator|::
name|collectionCacheStateChanged
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|3
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|8
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|ipadx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|NORTHWEST
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|collectionCache
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel8
operator|.
name|setText
argument_list|(
literal|"<html>Memory settings only become effective after restart and only apply when eXist-db is started via the system tray launcher.</html>"
argument_list|)
expr_stmt|;
name|jLabel8
operator|.
name|setPreferredSize
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|Dimension
argument_list|(
literal|280
argument_list|,
literal|48
argument_list|)
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridheight
operator|=
literal|2
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|weightx
operator|=
literal|1.0
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|13
argument_list|,
literal|0
argument_list|,
literal|22
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel8
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|lbCurrentUsage
operator|.
name|setText
argument_list|(
literal|"Memory usage (in MB):"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|3
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridwidth
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|NORTHWEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|12
argument_list|,
literal|22
argument_list|,
literal|12
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|lbCurrentUsage
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|lbStartupMsg
operator|.
name|setFont
argument_list|(
name|lbStartupMsg
operator|.
name|getFont
argument_list|()
operator|.
name|deriveFont
argument_list|(
name|lbStartupMsg
operator|.
name|getFont
argument_list|()
operator|.
name|getStyle
argument_list|()
operator|&
operator|~
name|java
operator|.
name|awt
operator|.
name|Font
operator|.
name|BOLD
argument_list|)
argument_list|)
expr_stmt|;
name|lbStartupMsg
operator|.
name|setText
argument_list|(
literal|"<html>It seems you are starting eXist-db for the first time. Please configure your memory settings below.</html>"
argument_list|)
expr_stmt|;
name|lbStartupMsg
operator|.
name|setMinimumSize
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|Dimension
argument_list|(
literal|60
argument_list|,
literal|64
argument_list|)
argument_list|)
expr_stmt|;
name|lbStartupMsg
operator|.
name|setPreferredSize
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|Dimension
argument_list|(
literal|300
argument_list|,
literal|32
argument_list|)
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|0
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridwidth
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|weightx
operator|=
literal|1.0
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|27
argument_list|,
literal|22
argument_list|,
literal|0
argument_list|,
literal|22
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|lbStartupMsg
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel9
operator|.
name|setText
argument_list|(
literal|"<html>Changing the data directory will create an empty database in the new location (unless there's already data in it).</html>"
argument_list|)
expr_stmt|;
name|jLabel9
operator|.
name|setPreferredSize
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|Dimension
argument_list|(
literal|280
argument_list|,
literal|48
argument_list|)
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|10
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|weightx
operator|=
literal|1.0
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|13
argument_list|,
literal|0
argument_list|,
literal|22
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel9
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel10
operator|.
name|setFont
argument_list|(
name|jLabel10
operator|.
name|getFont
argument_list|()
operator|.
name|deriveFont
argument_list|(
name|jLabel10
operator|.
name|getFont
argument_list|()
operator|.
name|getStyle
argument_list|()
operator||
name|java
operator|.
name|awt
operator|.
name|Font
operator|.
name|BOLD
argument_list|)
argument_list|)
expr_stmt|;
name|jLabel10
operator|.
name|setText
argument_list|(
literal|"Data Directory"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|9
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|26
argument_list|,
literal|22
argument_list|,
literal|16
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel10
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|dataDir
operator|.
name|setMinimumSize
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|Dimension
argument_list|(
literal|180
argument_list|,
literal|28
argument_list|)
argument_list|)
expr_stmt|;
name|dataDir
operator|.
name|setPreferredSize
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|Dimension
argument_list|(
literal|180
argument_list|,
literal|28
argument_list|)
argument_list|)
expr_stmt|;
name|dataDir
operator|.
name|addActionListener
argument_list|(
name|this
operator|::
name|dataDirActionPerformed
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|10
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridwidth
operator|=
literal|2
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|22
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|dataDir
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel11
operator|.
name|setText
argument_list|(
literal|"<html>Total cache size should not exceed 1/3 of max memory unless you have more than 2GB available. These sizes are in megabytes.</html>"
argument_list|)
expr_stmt|;
name|jLabel11
operator|.
name|setPreferredSize
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|Dimension
argument_list|(
literal|280
argument_list|,
literal|48
argument_list|)
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|7
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridheight
operator|=
literal|2
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|weightx
operator|=
literal|1.0
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|13
argument_list|,
literal|0
argument_list|,
literal|22
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel11
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|btnPanel
operator|.
name|setLayout
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|FlowLayout
argument_list|(
name|java
operator|.
name|awt
operator|.
name|FlowLayout
operator|.
name|RIGHT
argument_list|)
argument_list|)
expr_stmt|;
name|btnCancel
operator|.
name|setText
argument_list|(
literal|"Cancel"
argument_list|)
expr_stmt|;
name|btnCancel
operator|.
name|addActionListener
argument_list|(
name|this
operator|::
name|btnCancelActionPerformed
argument_list|)
expr_stmt|;
name|btnPanel
operator|.
name|add
argument_list|(
name|btnCancel
argument_list|)
expr_stmt|;
name|btnSave
operator|.
name|setText
argument_list|(
literal|"Save"
argument_list|)
expr_stmt|;
name|btnSave
operator|.
name|addActionListener
argument_list|(
name|this
operator|::
name|saveConfig
argument_list|)
expr_stmt|;
name|btnPanel
operator|.
name|add
argument_list|(
name|btnSave
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|14
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridwidth
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|SOUTHEAST
expr_stmt|;
name|gridBagConstraints
operator|.
name|weightx
operator|=
literal|1.0
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|36
argument_list|,
literal|13
argument_list|,
literal|8
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|btnPanel
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|btnSelectDir
operator|.
name|setText
argument_list|(
literal|"Select"
argument_list|)
expr_stmt|;
name|btnSelectDir
operator|.
name|addActionListener
argument_list|(
name|this
operator|::
name|btnSelectDirActionPerformed
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|3
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|10
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|btnSelectDir
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|lbStartupWarn
operator|.
name|setFont
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|Font
argument_list|(
literal|"Lucida Grande"
argument_list|,
literal|1
argument_list|,
literal|13
argument_list|)
argument_list|)
expr_stmt|;
comment|// NOI18N
name|lbStartupWarn
operator|.
name|setForeground
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|Color
argument_list|(
literal|255
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
name|lbStartupWarn
operator|.
name|setText
argument_list|(
literal|"<html>After startup, use dashboard or Java client to set a password for admin (empty by default).</html>"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridwidth
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|12
argument_list|,
literal|22
argument_list|,
literal|12
argument_list|,
literal|22
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|lbStartupWarn
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel12
operator|.
name|setText
argument_list|(
literal|"Jetty Ports"
argument_list|)
expr_stmt|;
name|jLabel12
operator|.
name|setFont
argument_list|(
name|jLabel12
operator|.
name|getFont
argument_list|()
operator|.
name|deriveFont
argument_list|(
name|jLabel12
operator|.
name|getFont
argument_list|()
operator|.
name|getStyle
argument_list|()
operator||
name|java
operator|.
name|awt
operator|.
name|Font
operator|.
name|BOLD
argument_list|)
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|11
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|26
argument_list|,
literal|22
argument_list|,
literal|16
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel12
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel13
operator|.
name|setText
argument_list|(
literal|"HTTP Port"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|12
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|22
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel13
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|httpPort
operator|.
name|setModel
argument_list|(
operator|new
name|javax
operator|.
name|swing
operator|.
name|SpinnerNumberModel
argument_list|(
literal|8080
argument_list|,
literal|80
argument_list|,
literal|100000
argument_list|,
literal|1
argument_list|)
argument_list|)
expr_stmt|;
name|httpPort
operator|.
name|setEditor
argument_list|(
operator|new
name|JSpinner
operator|.
name|NumberEditor
argument_list|(
name|httpPort
argument_list|,
literal|"#"
argument_list|)
argument_list|)
expr_stmt|;
name|httpPort
operator|.
name|addChangeListener
argument_list|(
name|this
operator|::
name|jettyConfigChanged
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|3
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|12
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|ipadx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|NORTHWEST
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|httpPort
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel14
operator|.
name|setText
argument_list|(
literal|"SSL Port"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|13
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|22
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel14
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|sslPort
operator|.
name|setModel
argument_list|(
operator|new
name|javax
operator|.
name|swing
operator|.
name|SpinnerNumberModel
argument_list|(
literal|8443
argument_list|,
literal|80
argument_list|,
literal|100000
argument_list|,
literal|1
argument_list|)
argument_list|)
expr_stmt|;
name|sslPort
operator|.
name|setEditor
argument_list|(
operator|new
name|JSpinner
operator|.
name|NumberEditor
argument_list|(
name|sslPort
argument_list|,
literal|"#"
argument_list|)
argument_list|)
expr_stmt|;
name|sslPort
operator|.
name|addChangeListener
argument_list|(
name|this
operator|::
name|jettyConfigChanged
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|3
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|13
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|ipadx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|NORTHWEST
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|sslPort
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel15
operator|.
name|setText
argument_list|(
literal|"<html>Set the ports used by the integrated web server. Please make sure "
operator|+
literal|"those ports are not used by other processes.</html>"
argument_list|)
expr_stmt|;
name|jLabel15
operator|.
name|setPreferredSize
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|Dimension
argument_list|(
literal|280
argument_list|,
literal|48
argument_list|)
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|12
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridheight
operator|=
literal|2
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|weightx
operator|=
literal|1.0
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|13
argument_list|,
literal|0
argument_list|,
literal|22
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel15
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|pack
argument_list|()
expr_stmt|;
block|}
comment|//</editor-fold>//GEN-END:initComponents
specifier|private
name|void
name|btnCancelActionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_btnCancelActionPerformed
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
block|}
comment|//GEN-LAST:event_btnCancelActionPerformed
specifier|private
name|void
name|maxMemoryChanged
parameter_list|(
name|javax
operator|.
name|swing
operator|.
name|event
operator|.
name|ChangeEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_maxMemoryChanged
name|checkCacheBoundaries
argument_list|()
expr_stmt|;
name|changed
operator|=
literal|true
expr_stmt|;
block|}
comment|//GEN-LAST:event_maxMemoryChanged
specifier|private
name|boolean
name|checkDataDir
parameter_list|()
block|{
if|if
condition|(
operator|!
name|dataDirChanged
condition|)
return|return
literal|true
return|;
name|Path
name|dir
init|=
name|Paths
operator|.
name|get
argument_list|(
name|dataDir
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
name|Files
operator|.
name|exists
argument_list|(
name|dir
argument_list|)
condition|)
block|{
try|try
init|(
specifier|final
name|Stream
argument_list|<
name|Path
argument_list|>
name|fileStream
init|=
name|Files
operator|.
name|list
argument_list|(
name|dir
argument_list|)
operator|.
name|filter
argument_list|(
name|p
lambda|->
name|FileUtils
operator|.
name|fileName
argument_list|(
name|p
argument_list|)
operator|.
name|endsWith
argument_list|(
literal|".dbx"
argument_list|)
argument_list|)
init|)
block|{
name|final
name|boolean
name|dbExists
operator|=
name|fileStream
operator|.
name|findFirst
argument_list|()
operator|.
name|isPresent
argument_list|()
block|;
if|if
condition|(
name|dbExists
condition|)
block|{
specifier|final
name|int
name|r
init|=
name|JOptionPane
operator|.
name|showConfirmDialog
argument_list|(
name|this
argument_list|,
literal|"The specified data directory already contains data. "
operator|+
literal|"Do you want to use this? Data will not be removed."
argument_list|,
literal|"Confirm Data Directory"
argument_list|,
name|JOptionPane
operator|.
name|OK_CANCEL_OPTION
argument_list|,
name|JOptionPane
operator|.
name|WARNING_MESSAGE
argument_list|)
decl_stmt|;
if|if
condition|(
name|r
operator|==
name|JOptionPane
operator|.
name|OK_OPTION
condition|)
block|{
return|return
literal|true
return|;
block|}
return|return
literal|false
return|;
block|}
block|}
catch|catch
parameter_list|(
specifier|final
name|IOException
name|e
parameter_list|)
block|{
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
name|this
argument_list|,
literal|"Failed to enumerate data files from directory: "
operator|+
name|dir
operator|.
name|toAbsolutePath
argument_list|()
operator|.
name|toString
argument_list|()
argument_list|,
literal|"Failed to enumerate data files"
argument_list|,
name|JOptionPane
operator|.
name|ERROR_MESSAGE
argument_list|)
expr_stmt|;
return|return
literal|false
return|;
block|}
block|}
else|else
block|{
specifier|final
name|int
name|r
init|=
name|JOptionPane
operator|.
name|showConfirmDialog
argument_list|(
name|this
argument_list|,
literal|"The specified data directory does not exist. Do you want to create it?"
argument_list|,
literal|"Create data directory?"
argument_list|,
name|JOptionPane
operator|.
name|YES_NO_OPTION
argument_list|,
name|JOptionPane
operator|.
name|QUESTION_MESSAGE
argument_list|)
decl_stmt|;
if|if
condition|(
name|r
operator|==
name|JOptionPane
operator|.
name|YES_OPTION
condition|)
block|{
try|try
block|{
name|Files
operator|.
name|createDirectories
argument_list|(
name|dir
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|IOException
name|e
parameter_list|)
block|{
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
name|this
argument_list|,
literal|"Failed to create data directory: "
operator|+
name|dir
operator|.
name|toAbsolutePath
argument_list|()
operator|.
name|toString
argument_list|()
argument_list|,
literal|"Failed to create directory"
argument_list|,
name|JOptionPane
operator|.
name|ERROR_MESSAGE
argument_list|)
expr_stmt|;
return|return
literal|false
return|;
block|}
return|return
literal|true
return|;
block|}
return|return
literal|false
return|;
block|}
if|if
condition|(
operator|!
name|Files
operator|.
name|isWritable
argument_list|(
name|dir
argument_list|)
condition|)
block|{
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
name|this
argument_list|,
literal|"The specified data directory is not writable. "
operator|+
literal|"Please choose a different one."
argument_list|,
literal|"Data Directory Error"
argument_list|,
name|JOptionPane
operator|.
name|ERROR_MESSAGE
argument_list|)
expr_stmt|;
return|return
literal|false
return|;
block|}
return|return
literal|true
return|;
block|}
end_class

begin_function
specifier|private
name|void
name|saveConfig
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_saveConfig
if|if
condition|(
operator|!
name|beforeStart
operator|&&
operator|!
name|changed
operator|&&
operator|!
name|dataDirChanged
operator|&&
operator|!
name|jettyConfigChanged
condition|)
block|{
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
operator|!
name|checkDataDir
argument_list|()
condition|)
return|return;
try|try
block|{
specifier|final
name|Properties
name|properties
init|=
operator|new
name|Properties
argument_list|()
decl_stmt|;
name|properties
operator|.
name|setProperty
argument_list|(
literal|"memory.max"
argument_list|,
name|maxMemory
operator|.
name|getValue
argument_list|()
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
name|properties
operator|.
name|setProperty
argument_list|(
literal|"memory.min"
argument_list|,
name|minMemory
operator|.
name|getValue
argument_list|()
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
comment|// save the launcher properties
name|ConfigurationUtility
operator|.
name|saveProperties
argument_list|(
name|properties
argument_list|)
expr_stmt|;
name|properties
operator|.
name|clear
argument_list|()
expr_stmt|;
comment|// update conf.xml
name|properties
operator|.
name|setProperty
argument_list|(
literal|"cacheSize"
argument_list|,
name|cacheSize
operator|.
name|getValue
argument_list|()
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
name|properties
operator|.
name|setProperty
argument_list|(
literal|"collectionCache"
argument_list|,
name|collectionCache
operator|.
name|getValue
argument_list|()
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
name|properties
operator|.
name|setProperty
argument_list|(
literal|"dataDir"
argument_list|,
name|dataDir
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|ConfigurationUtility
operator|.
name|saveConfiguration
argument_list|(
literal|"conf.xml"
argument_list|,
literal|"conf.xsl"
argument_list|,
name|properties
argument_list|)
expr_stmt|;
name|properties
operator|.
name|clear
argument_list|()
expr_stmt|;
if|if
condition|(
name|jettyConfigChanged
condition|)
block|{
comment|// update Jetty confs
name|properties
operator|.
name|setProperty
argument_list|(
literal|"port"
argument_list|,
name|httpPort
operator|.
name|getValue
argument_list|()
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
name|properties
operator|.
name|setProperty
argument_list|(
literal|"port.ssl"
argument_list|,
name|sslPort
operator|.
name|getValue
argument_list|()
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
name|ConfigurationUtility
operator|.
name|saveConfiguration
argument_list|(
literal|"jetty/jetty-ssl.xml"
argument_list|,
literal|"jetty.xsl"
argument_list|,
name|properties
argument_list|)
expr_stmt|;
name|ConfigurationUtility
operator|.
name|saveConfiguration
argument_list|(
literal|"jetty/jetty-http.xml"
argument_list|,
literal|"jetty.xsl"
argument_list|,
name|properties
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|beforeStart
condition|)
block|{
name|beforeStart
operator|=
literal|false
expr_stmt|;
name|btnCancel
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|callback
operator|.
name|accept
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
if|else if
condition|(
name|changed
operator|||
name|dataDirChanged
operator|||
name|jettyConfigChanged
condition|)
block|{
name|int
name|r
init|=
name|JOptionPane
operator|.
name|showConfirmDialog
argument_list|(
name|this
argument_list|,
literal|"Database needs to be restarted to apply the "
operator|+
literal|"new settings."
argument_list|,
literal|"Confirm restart"
argument_list|,
name|JOptionPane
operator|.
name|YES_NO_OPTION
argument_list|,
name|JOptionPane
operator|.
name|WARNING_MESSAGE
argument_list|)
decl_stmt|;
if|if
condition|(
name|r
operator|==
name|JOptionPane
operator|.
name|YES_OPTION
condition|)
block|{
name|changed
operator|=
literal|false
expr_stmt|;
name|dataDirChanged
operator|=
literal|false
expr_stmt|;
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|callback
operator|.
name|accept
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
block|}
block|}
catch|catch
parameter_list|(
specifier|final
name|IOException
name|e
parameter_list|)
block|{
name|e
operator|.
name|printStackTrace
argument_list|()
expr_stmt|;
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
name|this
argument_list|,
literal|"Failed to save Java settings: "
operator|+
name|e
operator|.
name|getMessage
argument_list|()
argument_list|,
literal|"Save Error"
argument_list|,
name|JOptionPane
operator|.
name|ERROR_MESSAGE
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|TransformerException
name|e
parameter_list|)
block|{
name|e
operator|.
name|printStackTrace
argument_list|()
expr_stmt|;
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
name|this
argument_list|,
literal|"Failed to save configuration: "
operator|+
name|e
operator|.
name|getMessage
argument_list|()
operator|+
literal|" at "
operator|+
name|e
operator|.
name|getLocationAsString
argument_list|()
argument_list|,
literal|"Save Error"
argument_list|,
name|JOptionPane
operator|.
name|ERROR_MESSAGE
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|//GEN-LAST:event_saveConfig
end_comment

begin_function
specifier|private
name|void
name|cacheSizeStateChanged
parameter_list|(
name|javax
operator|.
name|swing
operator|.
name|event
operator|.
name|ChangeEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_cacheSizeStateChanged
name|changed
operator|=
literal|true
expr_stmt|;
name|checkCacheBoundaries
argument_list|()
expr_stmt|;
block|}
end_function

begin_comment
comment|//GEN-LAST:event_cacheSizeStateChanged
end_comment

begin_function
specifier|private
name|void
name|collectionCacheStateChanged
parameter_list|(
name|javax
operator|.
name|swing
operator|.
name|event
operator|.
name|ChangeEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_collectionCacheStateChanged
name|changed
operator|=
literal|true
expr_stmt|;
block|}
end_function

begin_comment
comment|//GEN-LAST:event_collectionCacheStateChanged
end_comment

begin_function
specifier|private
name|void
name|minMemoryStateChanged
parameter_list|(
name|javax
operator|.
name|swing
operator|.
name|event
operator|.
name|ChangeEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_minMemoryStateChanged
name|changed
operator|=
literal|true
expr_stmt|;
block|}
end_function

begin_comment
comment|//GEN-LAST:event_minMemoryStateChanged
end_comment

begin_function
specifier|private
name|void
name|dataDirActionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_dataDirActionPerformed
name|dataDirChanged
operator|=
literal|true
expr_stmt|;
block|}
end_function

begin_comment
comment|//GEN-LAST:event_dataDirActionPerformed
end_comment

begin_function
specifier|private
name|void
name|jettyConfigChanged
parameter_list|(
name|javax
operator|.
name|swing
operator|.
name|event
operator|.
name|ChangeEvent
name|evt
parameter_list|)
block|{
name|jettyConfigChanged
operator|=
literal|true
expr_stmt|;
block|}
end_function

begin_function
specifier|private
name|void
name|btnSelectDirActionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_btnSelectDirActionPerformed
specifier|final
name|Optional
argument_list|<
name|Path
argument_list|>
name|currentDir
init|=
name|Optional
operator|.
name|ofNullable
argument_list|(
name|dataDir
operator|.
name|getText
argument_list|()
argument_list|)
operator|.
name|map
argument_list|(
name|d
lambda|->
name|Optional
operator|.
name|of
argument_list|(
name|Paths
operator|.
name|get
argument_list|(
name|d
argument_list|)
argument_list|)
argument_list|)
operator|.
name|filter
argument_list|(
name|md
lambda|->
name|md
operator|.
name|map
argument_list|(
name|Files
operator|::
name|exists
argument_list|)
operator|.
name|orElse
argument_list|(
literal|false
argument_list|)
argument_list|)
operator|.
name|orElse
argument_list|(
name|ConfigurationHelper
operator|.
name|getExistHome
argument_list|()
argument_list|)
decl_stmt|;
specifier|final
name|JFileChooser
name|chooser
init|=
operator|new
name|JFileChooser
argument_list|()
decl_stmt|;
name|chooser
operator|.
name|setMultiSelectionEnabled
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|chooser
operator|.
name|setFileSelectionMode
argument_list|(
name|JFileChooser
operator|.
name|DIRECTORIES_ONLY
argument_list|)
expr_stmt|;
name|currentDir
operator|.
name|map
argument_list|(
name|Path
operator|::
name|toFile
argument_list|)
operator|.
name|ifPresent
argument_list|(
name|chooser
operator|::
name|setCurrentDirectory
argument_list|)
expr_stmt|;
if|if
condition|(
name|chooser
operator|.
name|showDialog
argument_list|(
name|this
argument_list|,
literal|"Choose Data Directory"
argument_list|)
operator|==
name|JFileChooser
operator|.
name|APPROVE_OPTION
condition|)
block|{
name|dataDir
operator|.
name|setText
argument_list|(
name|chooser
operator|.
name|getSelectedFile
argument_list|()
operator|.
name|getAbsolutePath
argument_list|()
argument_list|)
expr_stmt|;
name|dataDirChanged
operator|=
literal|true
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|//GEN-LAST:event_btnSelectDirActionPerformed
end_comment

begin_function
specifier|private
name|void
name|checkCacheBoundaries
parameter_list|()
block|{
name|showCurrentMem
argument_list|()
expr_stmt|;
specifier|final
name|int
name|max
init|=
operator|(
name|Integer
operator|)
name|maxMemory
operator|.
name|getValue
argument_list|()
decl_stmt|;
specifier|final
name|SpinnerNumberModel
name|cacheModel
init|=
operator|(
name|SpinnerNumberModel
operator|)
name|cacheSize
operator|.
name|getModel
argument_list|()
decl_stmt|;
specifier|final
name|SpinnerNumberModel
name|collectionCacheModel
init|=
operator|(
name|SpinnerNumberModel
operator|)
name|collectionCache
operator|.
name|getModel
argument_list|()
decl_stmt|;
name|int
name|maxCache
decl_stmt|;
if|if
condition|(
name|max
operator|<=
literal|2048
condition|)
block|{
name|maxCache
operator|=
operator|(
name|max
operator|/
literal|3
operator|)
expr_stmt|;
block|}
else|else
block|{
name|maxCache
operator|=
operator|(
name|max
operator|/
literal|2
operator|)
expr_stmt|;
block|}
name|cacheModel
operator|.
name|setMaximum
argument_list|(
name|maxCache
operator|-
literal|48
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
operator|(
name|Integer
operator|)
name|cacheModel
operator|.
name|getMaximum
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
operator|(
name|Integer
operator|)
name|cacheModel
operator|.
name|getValue
argument_list|()
argument_list|)
operator|<
literal|0
condition|)
block|{
name|cacheModel
operator|.
name|setValue
argument_list|(
name|cacheModel
operator|.
name|getMaximum
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|collectionCacheModel
operator|.
name|setMaximum
argument_list|(
name|maxCache
operator|-
operator|(
name|Integer
operator|)
name|cacheModel
operator|.
name|getValue
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
operator|(
name|Integer
operator|)
name|collectionCacheModel
operator|.
name|getMaximum
argument_list|()
operator|)
operator|.
name|compareTo
argument_list|(
operator|(
name|Integer
operator|)
name|collectionCacheModel
operator|.
name|getValue
argument_list|()
argument_list|)
operator|<
literal|0
condition|)
block|{
name|collectionCacheModel
operator|.
name|setValue
argument_list|(
name|collectionCacheModel
operator|.
name|getMaximum
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|private
name|void
name|showCurrentMem
parameter_list|()
block|{
name|lbCurrentUsage
operator|.
name|setText
argument_list|(
literal|"Memory usage: "
operator|+
operator|(
name|Runtime
operator|.
name|getRuntime
argument_list|()
operator|.
name|freeMemory
argument_list|()
operator|/
literal|1024
operator|/
literal|1024
operator|)
operator|+
literal|" free/"
operator|+
operator|(
name|Runtime
operator|.
name|getRuntime
argument_list|()
operator|.
name|maxMemory
argument_list|()
operator|/
literal|1024
operator|/
literal|1024
operator|)
operator|+
literal|" max mb"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|// Variables declaration - do not modify//GEN-BEGIN:variables
end_comment

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JButton
name|btnCancel
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JPanel
name|btnPanel
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JButton
name|btnSave
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JButton
name|btnSelectDir
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JSpinner
name|cacheSize
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JSpinner
name|collectionCache
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JTextField
name|dataDir
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel1
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel2
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel3
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel4
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel5
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel7
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel8
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel9
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel10
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel11
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel12
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel13
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel14
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel15
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|lbCurrentUsage
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|lbExistLogo
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|lbStartupMsg
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|lbStartupWarn
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JSpinner
name|maxMemory
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JSpinner
name|minMemory
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JSpinner
name|httpPort
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JSpinner
name|sslPort
decl_stmt|;
end_decl_stmt

begin_comment
comment|// End of variables declaration//GEN-END:variables
end_comment

unit|}
end_unit

