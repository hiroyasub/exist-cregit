<?xml version="1.0" encoding="UTF-8"?>
<!--<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" "docbookx.dtd">-->

<book xmlns:ci="http://apache.org/cocoon/include/1.0">
    <bookinfo>
        <graphic fileref="logo.jpg"/>
        <title>Open Source XML Database</title>
        <author> 
            <firstname>Wolfgang M.</firstname>
            <surname>Meier</surname>
            <affiliation>
                <address format="linespecific">
                    <email>meier@ifs.tu-darmstadt.de</email>
                </address>
            </affiliation>
        </author>
    </bookinfo>
    
    <ci:include src="sidebar.xml"/>
    
    <chapter>
        <title>User Authentication and Access Control</title>
        
        <section>
            <title>User Authentication and Access Control</title>
            
            <para>eXist supports basic user authentication and access
                control. When the database is started for the first time,
                two default users are created: "admin" and "guest". "admin"
            is the superuser.</para>
            
            <para>At database creation time, the "admin" password is 
                null. This means that access to eXist is granted to everyone.
                To enable access control you have to set a password for the
                "admin" user. You may use the interactive client or the administrative
                web interface to do so. In the interactive client, use the
            <command>passwd</command> command:</para>
            
            <example>
                <title>Set a password for the superuser</title>
                <screen>
<![CDATA[type help or ? for help.
exist:/db>passwd admin
password: somepass
re-enter password: somepass
exist:/db>quit
]]>			     </screen>
            </example>
            
            <para>To start the interactive client as superuser you will
            now have to specify the <option>-u</option> option, e.g.:</para>
            
            <synopsis>bin/client.sh -u admin</synopsis>
            
            <para>The other default user, "guest", has password "guest". The guest identity is internally assigned to all clients which have not authenticated themselves. For example, the Xincon WebDAV interface does not support authentication, so "guest" is assumed by default.</para>
            
            <para>eXist organizes users in groups and distinguishes between permissions set for the user, the group and others. Unix users should be familiar with this. Every user may be a member of several groups. The "dba" group is a special group which belongs to database administrators. Only "dba" users are allowed to create or remove users or change permissions for other users.</para>
            
            <para>Information on users is stored in the special	XML file <filename>/db/system/users.xml</filename>, which is created on	database startup. By default, the <filename>/db/system</filename> collection is only readable for "dba" users, but you may choose to	change this.</para>
            
            <para>Passwords are stored as MD5 digests. Whenever a user enters his	password, the database first generates its MD5 value and compares it to	the digest stored in users.xml.</para>
            
            <para>Every resource in the database is owned by a user and by a group. By default, the owner is set to the user creating the resource and the his primary group. eXist manages different permissions for the owner, the owner group and others. Only the owner of the resource is allowed to change these permissions.</para>
            
            <para>The interactive command line client shows you the permissions assigned to each resource (if you have set the <option>permissions=true</option> property). Currently, there are three different permissions: read, write and update.</para>
            
            <variablelist>
                <varlistentry>
                    <term>read</term>
                    <listitem>
                        <para>permission to read or query a file or list the contents of a collection. If the read permission is not set on a collection, you will not be able to see the collection contents. The files in the collection will also not be evaluated during XPath processing.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>write</term>
                    <listitem>
                        <para>permission to remove or update a file or add a new file or subcollection to a collection.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>update</term>
                    <listitem>
                        <para>permission to update an existing file. Removing the file is not allowed unless the write permission is granted.</para>
                    </listitem>
                </varlistentry>
            </variablelist>
            
        </section>
    </chapter>
</book>
