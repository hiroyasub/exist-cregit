<?xml version="1.0" encoding="UTF-8"?>
<!-- 
Copyright J.M. Vanel 2003 - under Lesser GNU public licence 
jmvanel@free.fr 

Worldwide Botanical Knowledge Base 
http://wwbota.free.fr/
$Header$
-->
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">
    
    <!-- pipelines -->
    <map:pipelines>

         <map:pipeline>
             <!-- jmv - WWBKB - "automount" setup
               CAUTION: jmv: must be before other catch-all matches like **.xml ,
               otherwise xse/foo.xml will not be passed to xse/ subsitemap.
             -->
               <map:match pattern="xse/**">
                 <map:mount check-reload="yes" src="xse/" uri-prefix="xse" />
               </map:match>
 
               <!-- This causes directories added under "mount"
               (even with Cocoon already running) to be activated automagically
               if they contain a sitemap.xmap, without having to modify the main
               sitemap.xmap
             -->
               <map:match pattern="mount/*/**">
                 <map:mount check-reload="yes" src="mount/{1}/" uri-prefix="mount/{1}" />
               </map:match>
               <map:match pattern="">
                 <map:redirect-to uri="index.xml"/>
               </map:match>
         </map:pipeline>

        <map:pipeline>
            <!-- graphics etc. -->
            <map:match pattern="**.css">
                <map:read mime-type="text/css" src="{1}.css"/>
            </map:match>
            <map:match pattern="**.jpg">
                <map:read mime-type="text/jpg" src="{1}.jpg"/>
            </map:match>
            <map:match pattern="**.gif">
                <map:read mime-type="text/gif" src="{1}.gif"/>
            </map:match>
            <map:match pattern="**.png">
                <map:read mime-type="text/png" src="{1}.png"/>
            </map:match>
            <map:match pattern="**.dtd">
                <map:read mime-type="text/text" src="{1}.dtd"/>
            </map:match>
            <map:match pattern="**.html">
                <map:read src="{1}.html" mime-type="text/html"/>
            </map:match>
            <map:match pattern="**.js">
                <map:read src="{1}.js" mime-type="text/javascript"/>
            </map:match>
           
            <!-- jmv -->
            <map:match pattern="squery.xsp">
                <map:generate src="squery.xsp" type="serverpages" />
                <map:transform type="cinclude"/>
                <map:transform src="stylesheets/doc2html-3.xsl"/>
                <map:serialize encoding="ISO-8859-1" type="xhtml"/>
            </map:match>

             <map:match pattern="sprocess.xsp">
                <map:generate src="sprocess.xsp" type="serverpages"/>
                <map:transform type="cinclude"/>
                <map:transform src="cocoon:/highlight.xslt.xsp" label="content1" >
                  <map:parameter name="use-request-parameters" value="true"/>
                </map:transform>
              <map:act type="request">
                <map:parameter name="parameters" value="true"/>
                <map:transform src="stylesheets/highlight.xslt" label="content3" /> 
                <map:transform src="stylesheets/{collection}/display.xslt" label="content2" />
                <map:transform src="stylesheets/doc2html-3.xsl" label="content3" /> 
                <map:serialize encoding="ISO-8859-1" type="xhtml" />
              </map:act>
            </map:match>

            <map:match pattern="squery-foc.xsp">
                <map:generate src="squery-foc.xsp" type="serverpages" />
                <map:transform type="cinclude"/>
                <map:transform src="stylesheets/doc2html-3.xsl"/>
                <map:serialize encoding="ISO-8859-1" type="xhtml"/>
            </map:match>

            <map:match pattern="sprocess-foc.xsp">
              <map:generate src="sprocess-foc.xsp" type="serverpages"/>
              <map:transform type="cinclude"/>
              <map:transform src="cocoon:/highlight.xslt.xsp" label="content1" >
   	        <map:parameter name="use-request-parameters" value="true"/>
              </map:transform>
              <map:act type="request">
                <map:parameter name="parameters" value="true"/>
                <map:transform src="stylesheets/highlight.xslt" label="content3" /> 
                <map:transform src="stylesheets/{collection}/display.xslt" label="content2" />
                <map:transform src="stylesheets/doc2html-3.xsl" label="content3" /> 
                <map:serialize encoding="ISO-8859-1" type="xhtml" />
              </map:act>
            </map:match>
            
            <map:match pattern="**.xsp">
                <map:generate src="{1}.xsp" type="serverpages"/>
                <map:transform type="cinclude"/>
                <map:transform src="stylesheets/doc2html-2.xsl"/>
                <map:serialize encoding="ISO-8859-1" type="xhtml"/>
            </map:match>
            
            <map:match pattern="**/">
                <map:generate src="{1}" type="directory"/>
                <map:transform src="context://stylesheets/system/directory2html.xslt"/>
                <map:serialize/>
            </map:match>
            <map:handle-errors>
                <map:transform src="context://stylesheets/system/error2html.xslt"/>
                <map:serialize status-code="500"/>
            </map:handle-errors>
        </map:pipeline>
    </map:pipelines>
</map:sitemap>
<!-- end of file -->
