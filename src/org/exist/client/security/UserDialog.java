begin_unit|revision:1.0.0;language:Java;cregit-version:0.0.1
begin_comment
comment|/*  *  eXist Open Source Native XML Database  *  Copyright (C) 2001-2012 The eXist Project  *  http://exist-db.org  *  *  This program is free software; you can redistribute it and/or  *  modify it under the terms of the GNU Lesser General Public License  *  as published by the Free Software Foundation; either version 2  *  of the License, or (at your option) any later version.  *  *  This program is distributed in the hope that it will be useful,  *  but WITHOUT ANY WARRANTY; without even the implied warranty of  *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the  *  GNU Lesser General Public License for more details.  *  *  You should have received a copy of the GNU Lesser General Public  *  License along with this library; if not, write to the Free Software  *  Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA  *  *  $Id$  */
end_comment

begin_package
package|package
name|org
operator|.
name|exist
operator|.
name|client
operator|.
name|security
package|;
end_package

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Iterator
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|regex
operator|.
name|Pattern
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|swing
operator|.
name|InputVerifier
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|swing
operator|.
name|JOptionPane
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|security
operator|.
name|AXSchemaType
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|security
operator|.
name|EXistSchemaType
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|security
operator|.
name|Permission
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|security
operator|.
name|PermissionDeniedException
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|security
operator|.
name|internal
operator|.
name|aider
operator|.
name|GroupAider
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|security
operator|.
name|internal
operator|.
name|aider
operator|.
name|UserAider
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|xmldb
operator|.
name|UserManagementService
import|;
end_import

begin_import
import|import
name|org
operator|.
name|xmldb
operator|.
name|api
operator|.
name|base
operator|.
name|XMLDBException
import|;
end_import

begin_comment
comment|/**  *  * @author Adam Retter<adam.retter@googlemail.com>  */
end_comment

begin_class
specifier|public
class|class
name|UserDialog
extends|extends
name|javax
operator|.
name|swing
operator|.
name|JFrame
block|{
specifier|private
specifier|static
specifier|final
name|long
name|serialVersionUID
init|=
operator|-
literal|7544980948396443454L
decl_stmt|;
specifier|private
specifier|final
name|Pattern
name|PTN_USERNAME
init|=
name|Pattern
operator|.
name|compile
argument_list|(
literal|"[a-zA-Z0-9\\-\\._@]{3,}"
argument_list|)
decl_stmt|;
specifier|private
specifier|final
name|Pattern
name|PTN_PASSWORD
init|=
name|Pattern
operator|.
name|compile
argument_list|(
literal|".{3,}"
argument_list|)
decl_stmt|;
specifier|private
specifier|final
name|UserManagementService
name|userManagementService
decl_stmt|;
specifier|private
name|SortedListModel
argument_list|<
name|String
argument_list|>
name|availableGroupsModel
init|=
literal|null
decl_stmt|;
specifier|private
name|SortedListModel
argument_list|<
name|String
argument_list|>
name|memberOfGroupsModel
init|=
literal|null
decl_stmt|;
comment|/**      * Creates new form UserDialog      */
specifier|public
name|UserDialog
parameter_list|(
specifier|final
name|UserManagementService
name|userManagementService
parameter_list|)
block|{
name|this
operator|.
name|userManagementService
operator|=
name|userManagementService
expr_stmt|;
name|initComponents
argument_list|()
expr_stmt|;
block|}
comment|/**      * This method is called from within the constructor to initialize the form.      * WARNING: Do NOT modify this code. The content of this method is always      * regenerated by the Form Editor.      */
annotation|@
name|SuppressWarnings
argument_list|(
literal|"unchecked"
argument_list|)
comment|//<editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
specifier|private
name|void
name|initComponents
parameter_list|()
block|{
name|jSeparator1
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JSeparator
argument_list|()
expr_stmt|;
name|lblUsername
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|txtUsername
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JTextField
argument_list|()
expr_stmt|;
name|lblFullName
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|txtFullName
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JTextField
argument_list|()
expr_stmt|;
name|lblDescription
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|txtDescription
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JTextField
argument_list|()
expr_stmt|;
name|lblPassword
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|txtPassword
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JPasswordField
argument_list|()
expr_stmt|;
name|lblPasswordConfirm
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|txtPasswordConfirm
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JPasswordField
argument_list|()
expr_stmt|;
name|cbDisabled
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JCheckBox
argument_list|()
expr_stmt|;
name|jSeparator2
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JSeparator
argument_list|()
expr_stmt|;
name|spnUmask
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JSpinner
argument_list|()
expr_stmt|;
name|lblUmask
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|jSeparator3
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JSeparator
argument_list|()
expr_stmt|;
name|btnClose
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JButton
argument_list|()
expr_stmt|;
name|btnCreate
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JButton
argument_list|()
expr_stmt|;
name|cbPersonalGroup
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JCheckBox
argument_list|()
expr_stmt|;
name|jScrollPane1
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JScrollPane
argument_list|()
expr_stmt|;
name|lstMemberOfGroups
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JList
argument_list|()
expr_stmt|;
name|lblMemberOfGroups
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|jScrollPane2
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JScrollPane
argument_list|()
expr_stmt|;
name|lstAvailableGroups
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JList
argument_list|()
expr_stmt|;
name|lblAvailableGroups
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|btnAddGroup
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JButton
argument_list|()
expr_stmt|;
name|btnRemoveGroup
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JButton
argument_list|()
expr_stmt|;
name|jSeparator4
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JSeparator
argument_list|()
expr_stmt|;
name|setDefaultCloseOperation
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|WindowConstants
operator|.
name|DISPOSE_ON_CLOSE
argument_list|)
expr_stmt|;
name|setTitle
argument_list|(
literal|"New User"
argument_list|)
expr_stmt|;
name|lblUsername
operator|.
name|setText
argument_list|(
literal|"User name:"
argument_list|)
expr_stmt|;
name|txtUsername
operator|.
name|setInputVerifier
argument_list|(
name|getUsernameInputVerifier
argument_list|()
argument_list|)
expr_stmt|;
name|lblFullName
operator|.
name|setText
argument_list|(
literal|"Full name:"
argument_list|)
expr_stmt|;
name|lblDescription
operator|.
name|setText
argument_list|(
literal|"Description:"
argument_list|)
expr_stmt|;
name|lblPassword
operator|.
name|setText
argument_list|(
literal|"Password:"
argument_list|)
expr_stmt|;
name|txtPassword
operator|.
name|setInputVerifier
argument_list|(
name|getPasswordInputVerifier
argument_list|()
argument_list|)
expr_stmt|;
name|lblPasswordConfirm
operator|.
name|setText
argument_list|(
literal|"Confirm password:"
argument_list|)
expr_stmt|;
name|txtPasswordConfirm
operator|.
name|setInputVerifier
argument_list|(
name|getPasswordInputVerifier
argument_list|()
argument_list|)
expr_stmt|;
name|cbDisabled
operator|.
name|setText
argument_list|(
literal|"Account is disabled"
argument_list|)
expr_stmt|;
name|spnUmask
operator|.
name|setModel
argument_list|(
operator|new
name|UmaskSpinnerModel
argument_list|()
argument_list|)
expr_stmt|;
name|spnUmask
operator|.
name|setEditor
argument_list|(
operator|new
name|UmaskEditor
argument_list|(
name|spnUmask
argument_list|)
argument_list|)
expr_stmt|;
name|spnUmask
operator|.
name|setValue
argument_list|(
name|getUmask
argument_list|()
argument_list|)
expr_stmt|;
name|lblUmask
operator|.
name|setText
argument_list|(
literal|"umask:"
argument_list|)
expr_stmt|;
name|btnClose
operator|.
name|setText
argument_list|(
literal|"Close"
argument_list|)
expr_stmt|;
name|btnClose
operator|.
name|addActionListener
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionListener
argument_list|()
block|{
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
name|btnCloseActionPerformed
argument_list|(
name|evt
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|btnCreate
operator|.
name|setText
argument_list|(
literal|"Create"
argument_list|)
expr_stmt|;
name|btnCreate
operator|.
name|addActionListener
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionListener
argument_list|()
block|{
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
name|btnCreateActionPerformed
argument_list|(
name|evt
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|cbPersonalGroup
operator|.
name|setSelected
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|cbPersonalGroup
operator|.
name|setText
argument_list|(
literal|"Create personal user group"
argument_list|)
expr_stmt|;
name|lstMemberOfGroups
operator|.
name|setModel
argument_list|(
name|getMemberOfGroupsListModel
argument_list|()
argument_list|)
expr_stmt|;
name|jScrollPane1
operator|.
name|setViewportView
argument_list|(
name|lstMemberOfGroups
argument_list|)
expr_stmt|;
name|lblMemberOfGroups
operator|.
name|setText
argument_list|(
literal|"Member of Groups:"
argument_list|)
expr_stmt|;
name|lstAvailableGroups
operator|.
name|setModel
argument_list|(
name|getAvailableGroupsListModel
argument_list|()
argument_list|)
expr_stmt|;
name|jScrollPane2
operator|.
name|setViewportView
argument_list|(
name|lstAvailableGroups
argument_list|)
expr_stmt|;
name|lblAvailableGroups
operator|.
name|setText
argument_list|(
literal|"Available Groups:"
argument_list|)
expr_stmt|;
name|btnAddGroup
operator|.
name|setText
argument_list|(
literal|"->"
argument_list|)
expr_stmt|;
name|btnAddGroup
operator|.
name|setToolTipText
argument_list|(
literal|"Add to Group"
argument_list|)
expr_stmt|;
name|btnAddGroup
operator|.
name|addActionListener
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionListener
argument_list|()
block|{
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
name|btnAddGroupActionPerformed
argument_list|(
name|evt
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|btnRemoveGroup
operator|.
name|setText
argument_list|(
literal|"<-"
argument_list|)
expr_stmt|;
name|btnRemoveGroup
operator|.
name|setToolTipText
argument_list|(
literal|"Remove from Group"
argument_list|)
expr_stmt|;
name|btnRemoveGroup
operator|.
name|addActionListener
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionListener
argument_list|()
block|{
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
name|btnRemoveGroupActionPerformed
argument_list|(
name|evt
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
name|layout
init|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
argument_list|(
name|getContentPane
argument_list|()
argument_list|)
decl_stmt|;
name|getContentPane
argument_list|()
operator|.
name|setLayout
argument_list|(
name|layout
argument_list|)
expr_stmt|;
name|layout
operator|.
name|setHorizontalGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
operator|.
name|addGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|TRAILING
argument_list|,
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|TRAILING
argument_list|)
operator|.
name|addGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|,
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addGap
argument_list|(
literal|6
argument_list|,
literal|6
argument_list|,
literal|6
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|TRAILING
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addComponent
argument_list|(
name|btnClose
argument_list|)
operator|.
name|addPreferredGap
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|LayoutStyle
operator|.
name|ComponentPlacement
operator|.
name|RELATED
argument_list|)
operator|.
name|addComponent
argument_list|(
name|btnCreate
argument_list|)
operator|.
name|addGap
argument_list|(
literal|6
argument_list|,
literal|6
argument_list|,
literal|6
argument_list|)
argument_list|)
operator|.
name|addGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|,
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addGap
argument_list|(
literal|6
argument_list|,
literal|6
argument_list|,
literal|6
argument_list|)
operator|.
name|addComponent
argument_list|(
name|jScrollPane2
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|,
literal|177
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|)
operator|.
name|addPreferredGap
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|LayoutStyle
operator|.
name|ComponentPlacement
operator|.
name|RELATED
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|,
literal|false
argument_list|)
operator|.
name|addComponent
argument_list|(
name|btnAddGroup
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|,
literal|58
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|)
operator|.
name|addComponent
argument_list|(
name|btnRemoveGroup
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|,
literal|0
argument_list|,
name|Short
operator|.
name|MAX_VALUE
argument_list|)
argument_list|)
argument_list|)
operator|.
name|addComponent
argument_list|(
name|lblAvailableGroups
argument_list|)
argument_list|)
operator|.
name|addPreferredGap
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|LayoutStyle
operator|.
name|ComponentPlacement
operator|.
name|RELATED
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
operator|.
name|addComponent
argument_list|(
name|lblMemberOfGroups
argument_list|)
operator|.
name|addComponent
argument_list|(
name|jScrollPane1
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|,
literal|177
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|)
argument_list|)
argument_list|)
argument_list|)
argument_list|)
operator|.
name|addGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|,
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addGap
argument_list|(
literal|25
argument_list|,
literal|25
argument_list|,
literal|25
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
operator|.
name|addGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|TRAILING
argument_list|,
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
operator|.
name|addGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|TRAILING
argument_list|,
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addComponent
argument_list|(
name|lblDescription
argument_list|)
operator|.
name|addPreferredGap
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|LayoutStyle
operator|.
name|ComponentPlacement
operator|.
name|UNRELATED
argument_list|)
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addComponent
argument_list|(
name|lblFullName
argument_list|)
operator|.
name|addGap
argument_list|(
literal|24
argument_list|,
literal|24
argument_list|,
literal|24
argument_list|)
argument_list|)
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addComponent
argument_list|(
name|lblUsername
argument_list|)
operator|.
name|addGap
argument_list|(
literal|3
argument_list|,
literal|3
argument_list|,
literal|3
argument_list|)
argument_list|)
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|TRAILING
argument_list|,
literal|false
argument_list|)
operator|.
name|addComponent
argument_list|(
name|txtUsername
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|DEFAULT_SIZE
argument_list|,
literal|296
argument_list|,
name|Short
operator|.
name|MAX_VALUE
argument_list|)
operator|.
name|addComponent
argument_list|(
name|txtFullName
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
operator|.
name|addComponent
argument_list|(
name|txtDescription
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
argument_list|)
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addGap
argument_list|(
literal|24
argument_list|,
literal|24
argument_list|,
literal|24
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
operator|.
name|addComponent
argument_list|(
name|lblPasswordConfirm
argument_list|)
operator|.
name|addComponent
argument_list|(
name|lblPassword
argument_list|)
argument_list|)
operator|.
name|addGap
argument_list|(
literal|18
argument_list|,
literal|18
argument_list|,
literal|18
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|,
literal|false
argument_list|)
operator|.
name|addComponent
argument_list|(
name|txtPassword
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|DEFAULT_SIZE
argument_list|,
literal|248
argument_list|,
name|Short
operator|.
name|MAX_VALUE
argument_list|)
operator|.
name|addComponent
argument_list|(
name|txtPasswordConfirm
argument_list|)
argument_list|)
argument_list|)
argument_list|)
operator|.
name|addGap
argument_list|(
literal|0
argument_list|,
literal|35
argument_list|,
name|Short
operator|.
name|MAX_VALUE
argument_list|)
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addContainerGap
argument_list|()
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|TRAILING
argument_list|)
operator|.
name|addComponent
argument_list|(
name|jSeparator4
argument_list|)
operator|.
name|addComponent
argument_list|(
name|jSeparator1
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
argument_list|)
argument_list|)
argument_list|)
operator|.
name|addContainerGap
argument_list|()
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addContainerGap
argument_list|()
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addGap
argument_list|(
literal|16
argument_list|,
literal|16
argument_list|,
literal|16
argument_list|)
operator|.
name|addComponent
argument_list|(
name|lblUmask
argument_list|)
operator|.
name|addGap
argument_list|(
literal|18
argument_list|,
literal|18
argument_list|,
literal|18
argument_list|)
operator|.
name|addComponent
argument_list|(
name|spnUmask
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|,
literal|76
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|)
operator|.
name|addGap
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
name|Short
operator|.
name|MAX_VALUE
argument_list|)
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
operator|.
name|addComponent
argument_list|(
name|jSeparator2
argument_list|)
operator|.
name|addComponent
argument_list|(
name|jSeparator3
argument_list|)
argument_list|)
operator|.
name|addContainerGap
argument_list|()
argument_list|)
argument_list|)
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addGap
argument_list|(
literal|16
argument_list|,
literal|16
argument_list|,
literal|16
argument_list|)
operator|.
name|addComponent
argument_list|(
name|cbDisabled
argument_list|)
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addContainerGap
argument_list|()
operator|.
name|addComponent
argument_list|(
name|cbPersonalGroup
argument_list|)
argument_list|)
argument_list|)
operator|.
name|addGap
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
name|Short
operator|.
name|MAX_VALUE
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|layout
operator|.
name|setVerticalGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
operator|.
name|addGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|TRAILING
argument_list|,
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addGap
argument_list|(
literal|22
argument_list|,
literal|22
argument_list|,
literal|22
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|BASELINE
argument_list|)
operator|.
name|addComponent
argument_list|(
name|lblUsername
argument_list|)
operator|.
name|addComponent
argument_list|(
name|txtUsername
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|DEFAULT_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|)
argument_list|)
operator|.
name|addPreferredGap
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|LayoutStyle
operator|.
name|ComponentPlacement
operator|.
name|RELATED
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|BASELINE
argument_list|)
operator|.
name|addComponent
argument_list|(
name|lblFullName
argument_list|)
operator|.
name|addComponent
argument_list|(
name|txtFullName
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|DEFAULT_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|)
argument_list|)
operator|.
name|addPreferredGap
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|LayoutStyle
operator|.
name|ComponentPlacement
operator|.
name|RELATED
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|BASELINE
argument_list|)
operator|.
name|addComponent
argument_list|(
name|lblDescription
argument_list|)
operator|.
name|addComponent
argument_list|(
name|txtDescription
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|DEFAULT_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|)
argument_list|)
operator|.
name|addPreferredGap
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|LayoutStyle
operator|.
name|ComponentPlacement
operator|.
name|RELATED
argument_list|)
operator|.
name|addComponent
argument_list|(
name|jSeparator1
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|,
literal|10
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|)
operator|.
name|addPreferredGap
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|LayoutStyle
operator|.
name|ComponentPlacement
operator|.
name|RELATED
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|BASELINE
argument_list|)
operator|.
name|addComponent
argument_list|(
name|lblPassword
argument_list|)
operator|.
name|addComponent
argument_list|(
name|txtPassword
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|DEFAULT_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|)
argument_list|)
operator|.
name|addPreferredGap
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|LayoutStyle
operator|.
name|ComponentPlacement
operator|.
name|RELATED
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|BASELINE
argument_list|)
operator|.
name|addComponent
argument_list|(
name|txtPasswordConfirm
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|DEFAULT_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|)
operator|.
name|addComponent
argument_list|(
name|lblPasswordConfirm
argument_list|)
argument_list|)
operator|.
name|addPreferredGap
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|LayoutStyle
operator|.
name|ComponentPlacement
operator|.
name|RELATED
argument_list|)
operator|.
name|addComponent
argument_list|(
name|cbDisabled
argument_list|)
operator|.
name|addPreferredGap
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|LayoutStyle
operator|.
name|ComponentPlacement
operator|.
name|RELATED
argument_list|)
operator|.
name|addComponent
argument_list|(
name|jSeparator2
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|DEFAULT_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|)
operator|.
name|addPreferredGap
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|LayoutStyle
operator|.
name|ComponentPlacement
operator|.
name|RELATED
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
operator|.
name|addComponent
argument_list|(
name|spnUmask
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|DEFAULT_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|)
operator|.
name|addComponent
argument_list|(
name|lblUmask
argument_list|)
argument_list|)
operator|.
name|addPreferredGap
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|LayoutStyle
operator|.
name|ComponentPlacement
operator|.
name|UNRELATED
argument_list|)
operator|.
name|addComponent
argument_list|(
name|jSeparator3
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|DEFAULT_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|)
operator|.
name|addPreferredGap
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|LayoutStyle
operator|.
name|ComponentPlacement
operator|.
name|RELATED
argument_list|)
operator|.
name|addComponent
argument_list|(
name|cbPersonalGroup
argument_list|)
operator|.
name|addGap
argument_list|(
literal|18
argument_list|,
literal|18
argument_list|,
literal|18
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
operator|.
name|addComponent
argument_list|(
name|lblMemberOfGroups
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|TRAILING
argument_list|)
operator|.
name|addComponent
argument_list|(
name|lblAvailableGroups
argument_list|)
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addPreferredGap
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|LayoutStyle
operator|.
name|ComponentPlacement
operator|.
name|RELATED
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
operator|.
name|addComponent
argument_list|(
name|jScrollPane1
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|DEFAULT_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|)
operator|.
name|addComponent
argument_list|(
name|jScrollPane2
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|DEFAULT_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|)
argument_list|)
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createSequentialGroup
argument_list|()
operator|.
name|addGap
argument_list|(
literal|52
argument_list|,
literal|52
argument_list|,
literal|52
argument_list|)
operator|.
name|addComponent
argument_list|(
name|btnAddGroup
argument_list|)
operator|.
name|addPreferredGap
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|LayoutStyle
operator|.
name|ComponentPlacement
operator|.
name|RELATED
argument_list|)
operator|.
name|addComponent
argument_list|(
name|btnRemoveGroup
argument_list|)
argument_list|)
argument_list|)
operator|.
name|addGap
argument_list|(
literal|10
argument_list|,
literal|10
argument_list|,
literal|10
argument_list|)
operator|.
name|addComponent
argument_list|(
name|jSeparator4
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|DEFAULT_SIZE
argument_list|,
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|PREFERRED_SIZE
argument_list|)
operator|.
name|addGap
argument_list|(
literal|18
argument_list|,
literal|18
argument_list|,
literal|18
argument_list|)
operator|.
name|addGroup
argument_list|(
name|layout
operator|.
name|createParallelGroup
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|Alignment
operator|.
name|LEADING
argument_list|)
operator|.
name|addComponent
argument_list|(
name|btnClose
argument_list|)
operator|.
name|addComponent
argument_list|(
name|btnCreate
argument_list|)
argument_list|)
operator|.
name|addContainerGap
argument_list|(
name|javax
operator|.
name|swing
operator|.
name|GroupLayout
operator|.
name|DEFAULT_SIZE
argument_list|,
name|Short
operator|.
name|MAX_VALUE
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|pack
argument_list|()
expr_stmt|;
block|}
comment|//</editor-fold>//GEN-END:initComponents
specifier|private
name|void
name|btnCloseActionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_btnCloseActionPerformed
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|dispose
argument_list|()
expr_stmt|;
block|}
comment|//GEN-LAST:event_btnCloseActionPerformed
specifier|private
name|void
name|btnCreateActionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_btnCreateActionPerformed
if|if
condition|(
operator|!
name|isValidUserDetails
argument_list|()
condition|)
block|{
return|return;
block|}
comment|//create the user
name|createUser
argument_list|()
expr_stmt|;
comment|//close the dialog
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|dispose
argument_list|()
expr_stmt|;
block|}
comment|//GEN-LAST:event_btnCreateActionPerformed
specifier|protected
name|void
name|createUser
parameter_list|()
block|{
comment|//1 - create personal group
name|GroupAider
name|groupAider
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|cbPersonalGroup
operator|.
name|isSelected
argument_list|()
condition|)
block|{
name|groupAider
operator|=
operator|new
name|GroupAider
argument_list|(
name|txtUsername
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|groupAider
operator|.
name|setMetadataValue
argument_list|(
name|EXistSchemaType
operator|.
name|DESCRIPTION
argument_list|,
literal|"Personal group for "
operator|+
name|txtUsername
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
try|try
block|{
name|getUserManagementService
argument_list|()
operator|.
name|addGroup
argument_list|(
name|groupAider
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|XMLDBException
name|xmldbe
parameter_list|)
block|{
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
name|this
argument_list|,
literal|"Could not create personal group '"
operator|+
name|txtUsername
operator|.
name|getText
argument_list|()
operator|+
literal|"': "
operator|+
name|xmldbe
operator|.
name|getMessage
argument_list|()
argument_list|,
literal|"Create User Error"
argument_list|,
name|JOptionPane
operator|.
name|ERROR_MESSAGE
argument_list|)
expr_stmt|;
return|return;
block|}
block|}
comment|//2 - create the user
specifier|final
name|UserAider
name|userAider
init|=
operator|new
name|UserAider
argument_list|(
name|txtUsername
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|userAider
operator|.
name|setMetadataValue
argument_list|(
name|AXSchemaType
operator|.
name|FULLNAME
argument_list|,
name|txtFullName
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|userAider
operator|.
name|setMetadataValue
argument_list|(
name|EXistSchemaType
operator|.
name|DESCRIPTION
argument_list|,
name|txtDescription
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|userAider
operator|.
name|setPassword
argument_list|(
name|txtPassword
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|userAider
operator|.
name|setEnabled
argument_list|(
operator|!
name|cbDisabled
operator|.
name|isSelected
argument_list|()
argument_list|)
expr_stmt|;
name|userAider
operator|.
name|setUserMask
argument_list|(
name|UmaskSpinnerModel
operator|.
name|octalUmaskToInt
argument_list|(
operator|(
name|String
operator|)
name|spnUmask
operator|.
name|getValue
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
comment|//add the personal group to the user
if|if
condition|(
name|cbPersonalGroup
operator|.
name|isSelected
argument_list|()
condition|)
block|{
name|userAider
operator|.
name|addGroup
argument_list|(
name|txtUsername
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
block|}
comment|//add any other groups to the user
specifier|final
name|Iterator
argument_list|<
name|String
argument_list|>
name|itMemberOfGroups
init|=
name|memberOfGroupsModel
operator|.
name|iterator
argument_list|()
decl_stmt|;
while|while
condition|(
name|itMemberOfGroups
operator|.
name|hasNext
argument_list|()
condition|)
block|{
specifier|final
name|String
name|memberOfGroup
init|=
name|itMemberOfGroups
operator|.
name|next
argument_list|()
decl_stmt|;
name|userAider
operator|.
name|addGroup
argument_list|(
name|memberOfGroup
argument_list|)
expr_stmt|;
block|}
try|try
block|{
name|getUserManagementService
argument_list|()
operator|.
name|addAccount
argument_list|(
name|userAider
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|XMLDBException
name|xmldbe
parameter_list|)
block|{
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
name|this
argument_list|,
literal|"Could not create user '"
operator|+
name|txtUsername
operator|.
name|getText
argument_list|()
operator|+
literal|"': "
operator|+
name|xmldbe
operator|.
name|getMessage
argument_list|()
argument_list|,
literal|"Create User Error"
argument_list|,
name|JOptionPane
operator|.
name|ERROR_MESSAGE
argument_list|)
expr_stmt|;
return|return;
block|}
comment|//3 - if created personal group, then add us as the manager
if|if
condition|(
name|cbPersonalGroup
operator|.
name|isSelected
argument_list|()
condition|)
block|{
try|try
block|{
name|groupAider
operator|.
name|addManager
argument_list|(
name|userAider
argument_list|)
expr_stmt|;
name|getUserManagementService
argument_list|()
operator|.
name|updateGroup
argument_list|(
name|groupAider
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|XMLDBException
name|xmldbe
parameter_list|)
block|{
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
name|this
argument_list|,
literal|"Could not set user '"
operator|+
name|txtUsername
operator|.
name|getText
argument_list|()
operator|+
literal|"' as manager of personal group '"
operator|+
name|txtUsername
operator|.
name|getText
argument_list|()
operator|+
literal|"': "
operator|+
name|xmldbe
operator|.
name|getMessage
argument_list|()
argument_list|,
literal|"Create User Error"
argument_list|,
name|JOptionPane
operator|.
name|ERROR_MESSAGE
argument_list|)
expr_stmt|;
return|return;
block|}
catch|catch
parameter_list|(
name|PermissionDeniedException
name|pde
parameter_list|)
block|{
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
name|this
argument_list|,
literal|"Could not set user '"
operator|+
name|txtUsername
operator|.
name|getText
argument_list|()
operator|+
literal|"' as manager of personal group '"
operator|+
name|txtUsername
operator|.
name|getText
argument_list|()
operator|+
literal|"': "
operator|+
name|pde
operator|.
name|getMessage
argument_list|()
argument_list|,
literal|"Create User Error"
argument_list|,
name|JOptionPane
operator|.
name|ERROR_MESSAGE
argument_list|)
expr_stmt|;
return|return;
block|}
block|}
block|}
specifier|private
name|void
name|btnAddGroupActionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_btnAddGroupActionPerformed
for|for
control|(
specifier|final
name|Object
name|value
range|:
name|lstAvailableGroups
operator|.
name|getSelectedValues
argument_list|()
control|)
block|{
name|memberOfGroupsModel
operator|.
name|add
argument_list|(
name|value
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
name|availableGroupsModel
operator|.
name|removeElement
argument_list|(
name|value
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
comment|//GEN-LAST:event_btnAddGroupActionPerformed
specifier|private
name|void
name|btnRemoveGroupActionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_btnRemoveGroupActionPerformed
for|for
control|(
specifier|final
name|Object
name|value
range|:
name|lstMemberOfGroups
operator|.
name|getSelectedValues
argument_list|()
control|)
block|{
name|availableGroupsModel
operator|.
name|add
argument_list|(
name|value
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
name|memberOfGroupsModel
operator|.
name|removeElement
argument_list|(
name|value
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
comment|//GEN-LAST:event_btnRemoveGroupActionPerformed
specifier|private
name|boolean
name|isValidUserDetails
parameter_list|()
block|{
return|return
name|isValidUsername
argument_list|()
operator|&&
name|isValidPassword
argument_list|()
operator|&&
name|isValidGroups
argument_list|()
return|;
block|}
specifier|private
name|boolean
name|isValidUsername
parameter_list|()
block|{
if|if
condition|(
name|PTN_USERNAME
operator|.
name|matcher
argument_list|(
name|txtUsername
operator|.
name|getText
argument_list|()
argument_list|)
operator|.
name|matches
argument_list|()
condition|)
block|{
return|return
literal|true
return|;
block|}
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
name|this
argument_list|,
literal|"Username must be at least 3 characters ("
operator|+
name|PTN_USERNAME
operator|.
name|toString
argument_list|()
operator|+
literal|")"
argument_list|)
expr_stmt|;
return|return
literal|false
return|;
block|}
specifier|private
name|boolean
name|isValidPassword
parameter_list|()
block|{
if|if
condition|(
name|txtPassword
operator|!=
literal|null
operator|&&
name|PTN_PASSWORD
operator|.
name|matcher
argument_list|(
name|txtPassword
operator|.
name|getText
argument_list|()
argument_list|)
operator|.
name|matches
argument_list|()
operator|&&
name|txtPassword
operator|.
name|getText
argument_list|()
operator|.
name|equals
argument_list|(
name|txtPasswordConfirm
operator|.
name|getText
argument_list|()
argument_list|)
condition|)
block|{
return|return
literal|true
return|;
block|}
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
name|this
argument_list|,
literal|"Passwords do not match or are less than 3 characters."
argument_list|)
expr_stmt|;
return|return
literal|false
return|;
block|}
specifier|private
name|boolean
name|isValidGroups
parameter_list|()
block|{
if|if
condition|(
name|cbPersonalGroup
operator|.
name|isSelected
argument_list|()
operator|||
name|memberOfGroupsModel
operator|.
name|getSize
argument_list|()
operator|>
literal|0
condition|)
block|{
return|return
literal|true
return|;
block|}
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
name|this
argument_list|,
literal|"The user must be in at least one group, or a personal group must be created for them."
argument_list|)
expr_stmt|;
return|return
literal|false
return|;
block|}
specifier|private
name|InputVerifier
name|getUsernameInputVerifier
parameter_list|()
block|{
return|return
operator|new
name|RegExpInputVerifier
argument_list|(
name|PTN_USERNAME
argument_list|)
return|;
block|}
specifier|private
name|InputVerifier
name|getPasswordInputVerifier
parameter_list|()
block|{
return|return
operator|new
name|RegExpInputVerifier
argument_list|(
name|PTN_PASSWORD
argument_list|)
return|;
block|}
specifier|private
name|String
name|getUmask
parameter_list|()
block|{
return|return
name|String
operator|.
name|format
argument_list|(
literal|"%4s"
argument_list|,
name|Integer
operator|.
name|toString
argument_list|(
name|Permission
operator|.
name|DEFAULT_UMASK
argument_list|,
name|UmaskSpinnerModel
operator|.
name|OCTAL_RADIX
argument_list|)
argument_list|)
operator|.
name|replace
argument_list|(
literal|' '
argument_list|,
literal|'0'
argument_list|)
return|;
block|}
specifier|protected
name|SortedListModel
name|getAvailableGroupsListModel
parameter_list|()
block|{
if|if
condition|(
name|availableGroupsModel
operator|==
literal|null
condition|)
block|{
try|try
block|{
specifier|final
name|String
name|groupNames
index|[]
init|=
name|getUserManagementService
argument_list|()
operator|.
name|getGroups
argument_list|()
decl_stmt|;
name|availableGroupsModel
operator|=
operator|new
name|SortedListModel
argument_list|<
name|String
argument_list|>
argument_list|()
expr_stmt|;
name|availableGroupsModel
operator|.
name|addAll
argument_list|(
name|groupNames
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|XMLDBException
name|xmldbe
parameter_list|)
block|{
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
name|this
argument_list|,
literal|"Could not get available groups: "
operator|+
name|xmldbe
operator|.
name|getMessage
argument_list|()
argument_list|,
literal|"Create User Error"
argument_list|,
name|JOptionPane
operator|.
name|ERROR_MESSAGE
argument_list|)
expr_stmt|;
block|}
block|}
return|return
name|availableGroupsModel
return|;
block|}
specifier|protected
name|SortedListModel
name|getMemberOfGroupsListModel
parameter_list|()
block|{
if|if
condition|(
name|memberOfGroupsModel
operator|==
literal|null
condition|)
block|{
name|memberOfGroupsModel
operator|=
operator|new
name|SortedListModel
argument_list|<
name|String
argument_list|>
argument_list|()
expr_stmt|;
block|}
return|return
name|memberOfGroupsModel
return|;
block|}
specifier|protected
name|UserManagementService
name|getUserManagementService
parameter_list|()
block|{
return|return
name|userManagementService
return|;
block|}
comment|// Variables declaration - do not modify//GEN-BEGIN:variables
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JButton
name|btnAddGroup
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JButton
name|btnClose
decl_stmt|;
specifier|protected
name|javax
operator|.
name|swing
operator|.
name|JButton
name|btnCreate
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JButton
name|btnRemoveGroup
decl_stmt|;
specifier|protected
name|javax
operator|.
name|swing
operator|.
name|JCheckBox
name|cbDisabled
decl_stmt|;
specifier|protected
name|javax
operator|.
name|swing
operator|.
name|JCheckBox
name|cbPersonalGroup
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JScrollPane
name|jScrollPane1
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JScrollPane
name|jScrollPane2
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JSeparator
name|jSeparator1
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JSeparator
name|jSeparator2
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JSeparator
name|jSeparator3
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JSeparator
name|jSeparator4
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|lblAvailableGroups
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|lblDescription
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|lblFullName
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|lblMemberOfGroups
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|lblPassword
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|lblPasswordConfirm
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|lblUmask
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|lblUsername
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JList
name|lstAvailableGroups
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JList
name|lstMemberOfGroups
decl_stmt|;
specifier|protected
name|javax
operator|.
name|swing
operator|.
name|JSpinner
name|spnUmask
decl_stmt|;
specifier|protected
name|javax
operator|.
name|swing
operator|.
name|JTextField
name|txtDescription
decl_stmt|;
specifier|protected
name|javax
operator|.
name|swing
operator|.
name|JTextField
name|txtFullName
decl_stmt|;
specifier|protected
name|javax
operator|.
name|swing
operator|.
name|JPasswordField
name|txtPassword
decl_stmt|;
specifier|protected
name|javax
operator|.
name|swing
operator|.
name|JPasswordField
name|txtPasswordConfirm
decl_stmt|;
specifier|protected
name|javax
operator|.
name|swing
operator|.
name|JTextField
name|txtUsername
decl_stmt|;
comment|// End of variables declaration//GEN-END:variables
block|}
end_class

end_unit

