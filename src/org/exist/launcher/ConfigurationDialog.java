begin_unit|revision:1.0.0;language:Java;cregit-version:0.0.1
begin_package
package|package
name|org
operator|.
name|exist
operator|.
name|launcher
package|;
end_package

begin_import
import|import
name|java
operator|.
name|awt
operator|.
name|Dimension
import|;
end_import

begin_import
import|import
name|java
operator|.
name|awt
operator|.
name|Toolkit
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|File
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|IOException
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Collection
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Properties
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|logging
operator|.
name|Level
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|logging
operator|.
name|Logger
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|swing
operator|.
name|*
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|xml
operator|.
name|transform
operator|.
name|TransformerException
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|commons
operator|.
name|io
operator|.
name|FileUtils
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|commons
operator|.
name|lang3
operator|.
name|SystemUtils
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|storage
operator|.
name|BrokerPool
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|storage
operator|.
name|CollectionCacheManager
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|storage
operator|.
name|DefaultCacheManager
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|util
operator|.
name|Configuration
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|util
operator|.
name|ConfigurationHelper
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|util
operator|.
name|DatabaseConfigurationException
import|;
end_import

begin_comment
comment|/**  *  * @author wolf  */
end_comment

begin_class
specifier|public
class|class
name|ConfigurationDialog
extends|extends
name|JDialog
block|{
specifier|private
specifier|final
name|Launcher
name|launcher
decl_stmt|;
specifier|private
name|boolean
name|changed
init|=
literal|false
decl_stmt|;
specifier|private
name|boolean
name|dataDirChanged
init|=
literal|false
decl_stmt|;
specifier|private
name|boolean
name|beforeStart
init|=
literal|false
decl_stmt|;
comment|/**      * Creates new form ConfigurationDialog      */
specifier|public
name|ConfigurationDialog
parameter_list|(
name|Launcher
name|launcher
parameter_list|)
block|{
name|setModal
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|setTitle
argument_list|(
literal|"eXist-db Configuration"
argument_list|)
expr_stmt|;
name|initComponents
argument_list|()
expr_stmt|;
name|this
operator|.
name|launcher
operator|=
name|launcher
expr_stmt|;
specifier|final
name|Properties
name|vmProperties
init|=
name|LauncherWrapper
operator|.
name|getVMProperties
argument_list|()
decl_stmt|;
try|try
block|{
name|Configuration
name|existConfig
init|=
operator|new
name|Configuration
argument_list|()
decl_stmt|;
specifier|final
name|int
name|cacheSizeProp
init|=
name|existConfig
operator|.
name|getInteger
argument_list|(
name|DefaultCacheManager
operator|.
name|PROPERTY_CACHE_SIZE
argument_list|)
decl_stmt|;
name|cacheSize
operator|.
name|setValue
argument_list|(
operator|new
name|Integer
argument_list|(
name|cacheSizeProp
argument_list|)
argument_list|)
expr_stmt|;
specifier|final
name|int
name|collectionCacheProp
init|=
name|existConfig
operator|.
name|getInteger
argument_list|(
name|CollectionCacheManager
operator|.
name|PROPERTY_CACHE_SIZE
argument_list|)
decl_stmt|;
name|collectionCache
operator|.
name|setValue
argument_list|(
operator|new
name|Integer
argument_list|(
name|collectionCacheProp
argument_list|)
argument_list|)
expr_stmt|;
specifier|final
name|String
name|dir
init|=
name|existConfig
operator|.
name|getProperty
argument_list|(
name|BrokerPool
operator|.
name|PROPERTY_DATA_DIR
argument_list|)
operator|.
name|toString
argument_list|()
decl_stmt|;
name|dataDir
operator|.
name|setText
argument_list|(
name|dir
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|DatabaseConfigurationException
name|ex
parameter_list|)
block|{
name|Logger
operator|.
name|getLogger
argument_list|(
name|ConfigurationDialog
operator|.
name|class
operator|.
name|getName
argument_list|()
argument_list|)
operator|.
name|log
argument_list|(
name|Level
operator|.
name|SEVERE
argument_list|,
literal|null
argument_list|,
name|ex
argument_list|)
expr_stmt|;
block|}
specifier|final
name|String
name|maxMemProp
init|=
name|vmProperties
operator|.
name|getProperty
argument_list|(
literal|"memory.max"
argument_list|,
literal|"1024"
argument_list|)
decl_stmt|;
name|maxMemory
operator|.
name|setValue
argument_list|(
operator|new
name|Integer
argument_list|(
name|maxMemProp
argument_list|)
argument_list|)
expr_stmt|;
specifier|final
name|String
name|minMemProp
init|=
name|vmProperties
operator|.
name|getProperty
argument_list|(
literal|"memory.min"
argument_list|,
literal|"64"
argument_list|)
decl_stmt|;
name|minMemory
operator|.
name|setValue
argument_list|(
operator|new
name|Integer
argument_list|(
name|minMemProp
argument_list|)
argument_list|)
expr_stmt|;
name|checkCacheBoundaries
argument_list|()
expr_stmt|;
name|changed
operator|=
literal|false
expr_stmt|;
specifier|final
name|Dimension
name|d
init|=
name|Toolkit
operator|.
name|getDefaultToolkit
argument_list|()
operator|.
name|getScreenSize
argument_list|()
decl_stmt|;
name|this
operator|.
name|setLocation
argument_list|(
name|d
operator|.
name|width
operator|-
name|this
operator|.
name|getWidth
argument_list|()
operator|-
literal|40
argument_list|,
literal|60
argument_list|)
expr_stmt|;
comment|//setLocationRelativeTo(null);
name|setAlwaysOnTop
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
specifier|public
name|void
name|open
parameter_list|(
name|boolean
name|firstStart
parameter_list|)
block|{
if|if
condition|(
name|firstStart
condition|)
block|{
name|beforeStart
operator|=
literal|true
expr_stmt|;
comment|// always check data dir on first start
name|dataDirChanged
operator|=
literal|true
expr_stmt|;
name|btnCancel
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|lbStartupMsg
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|separator
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
if|if
condition|(
name|SystemUtils
operator|.
name|IS_OS_MAC_OSX
condition|)
block|{
name|File
name|dir
init|=
operator|new
name|File
argument_list|(
name|System
operator|.
name|getProperty
argument_list|(
literal|"user.home"
argument_list|)
operator|+
literal|"/Library/Application Support/org.exist"
argument_list|)
decl_stmt|;
name|dataDir
operator|.
name|setText
argument_list|(
name|dir
operator|.
name|getAbsolutePath
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|lbStartupMsg
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|separator
operator|.
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
block|}
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|requestFocus
argument_list|()
expr_stmt|;
block|}
comment|/**      * This method is called from within the constructor to initialize the form.      * WARNING: Do NOT modify this code. The content of this method is always      * regenerated by the Form Editor.      */
annotation|@
name|SuppressWarnings
argument_list|(
literal|"unchecked"
argument_list|)
comment|//<editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
specifier|private
name|void
name|initComponents
parameter_list|()
block|{
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
name|gridBagConstraints
decl_stmt|;
name|lbExistLogo
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|separator
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JSeparator
argument_list|()
expr_stmt|;
name|jLabel1
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|minMemory
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JSpinner
argument_list|()
expr_stmt|;
name|jLabel2
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|maxMemory
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JSpinner
argument_list|()
expr_stmt|;
name|jLabel3
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|jLabel4
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|jLabel5
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|cacheSize
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JSpinner
argument_list|()
expr_stmt|;
name|jLabel7
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|collectionCache
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JSpinner
argument_list|()
expr_stmt|;
name|jLabel8
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|lbCurrentUsage
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|lbStartupMsg
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|jLabel9
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|jLabel10
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|dataDir
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JTextField
argument_list|()
expr_stmt|;
name|jLabel11
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JLabel
argument_list|()
expr_stmt|;
name|btnPanel
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JPanel
argument_list|()
expr_stmt|;
name|btnCancel
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JButton
argument_list|()
expr_stmt|;
name|btnSave
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JButton
argument_list|()
expr_stmt|;
name|btnSelectDir
operator|=
operator|new
name|javax
operator|.
name|swing
operator|.
name|JButton
argument_list|()
expr_stmt|;
name|setTitle
argument_list|(
literal|"eXist-db Configuration"
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|setLayout
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagLayout
argument_list|()
argument_list|)
expr_stmt|;
name|lbExistLogo
operator|.
name|setIcon
argument_list|(
operator|new
name|javax
operator|.
name|swing
operator|.
name|ImageIcon
argument_list|(
name|getClass
argument_list|()
operator|.
name|getResource
argument_list|(
literal|"/org/exist/client/icons/x.png"
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|// NOI18N
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|0
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|0
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridheight
operator|=
literal|6
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|16
argument_list|,
literal|0
argument_list|,
literal|6
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|lbExistLogo
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridwidth
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|20
argument_list|,
literal|0
argument_list|,
literal|22
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|separator
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel1
operator|.
name|setText
argument_list|(
literal|"Min Memory"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|22
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel1
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|minMemory
operator|.
name|setModel
argument_list|(
operator|new
name|javax
operator|.
name|swing
operator|.
name|SpinnerNumberModel
argument_list|(
literal|64
argument_list|,
literal|64
argument_list|,
literal|256
argument_list|,
literal|64
argument_list|)
argument_list|)
expr_stmt|;
name|minMemory
operator|.
name|addChangeListener
argument_list|(
operator|new
name|javax
operator|.
name|swing
operator|.
name|event
operator|.
name|ChangeListener
argument_list|()
block|{
specifier|public
name|void
name|stateChanged
parameter_list|(
name|javax
operator|.
name|swing
operator|.
name|event
operator|.
name|ChangeEvent
name|evt
parameter_list|)
block|{
name|minMemoryStateChanged
argument_list|(
name|evt
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|3
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|ipadx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|NORTHWEST
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|minMemory
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel2
operator|.
name|setText
argument_list|(
literal|"Max Memory"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|5
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|22
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel2
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|maxMemory
operator|.
name|setModel
argument_list|(
operator|new
name|javax
operator|.
name|swing
operator|.
name|SpinnerNumberModel
argument_list|(
name|Integer
operator|.
name|valueOf
argument_list|(
literal|1024
argument_list|)
argument_list|,
name|Integer
operator|.
name|valueOf
argument_list|(
literal|512
argument_list|)
argument_list|,
literal|null
argument_list|,
name|Integer
operator|.
name|valueOf
argument_list|(
literal|64
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|maxMemory
operator|.
name|addChangeListener
argument_list|(
operator|new
name|javax
operator|.
name|swing
operator|.
name|event
operator|.
name|ChangeListener
argument_list|()
block|{
specifier|public
name|void
name|stateChanged
parameter_list|(
name|javax
operator|.
name|swing
operator|.
name|event
operator|.
name|ChangeEvent
name|evt
parameter_list|)
block|{
name|maxMemoryChanged
argument_list|(
name|evt
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|3
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|5
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|ipadx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|NORTHWEST
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|maxMemory
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel3
operator|.
name|setFont
argument_list|(
name|jLabel3
operator|.
name|getFont
argument_list|()
operator|.
name|deriveFont
argument_list|(
name|jLabel3
operator|.
name|getFont
argument_list|()
operator|.
name|getStyle
argument_list|()
operator||
name|java
operator|.
name|awt
operator|.
name|Font
operator|.
name|BOLD
argument_list|)
argument_list|)
expr_stmt|;
name|jLabel3
operator|.
name|setText
argument_list|(
literal|"Java Memory"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|2
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridwidth
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|NORTHWEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|26
argument_list|,
literal|22
argument_list|,
literal|16
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel3
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel4
operator|.
name|setFont
argument_list|(
name|jLabel4
operator|.
name|getFont
argument_list|()
operator|.
name|deriveFont
argument_list|(
name|jLabel4
operator|.
name|getFont
argument_list|()
operator|.
name|getStyle
argument_list|()
operator||
name|java
operator|.
name|awt
operator|.
name|Font
operator|.
name|BOLD
argument_list|)
argument_list|)
expr_stmt|;
name|jLabel4
operator|.
name|setText
argument_list|(
literal|"Caches"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|6
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|NORTHWEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|26
argument_list|,
literal|22
argument_list|,
literal|16
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel4
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel5
operator|.
name|setText
argument_list|(
literal|"General Cache"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|7
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|22
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel5
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|cacheSize
operator|.
name|setModel
argument_list|(
operator|new
name|javax
operator|.
name|swing
operator|.
name|SpinnerNumberModel
argument_list|(
literal|128
argument_list|,
literal|48
argument_list|,
literal|256
argument_list|,
literal|16
argument_list|)
argument_list|)
expr_stmt|;
name|cacheSize
operator|.
name|addChangeListener
argument_list|(
operator|new
name|javax
operator|.
name|swing
operator|.
name|event
operator|.
name|ChangeListener
argument_list|()
block|{
specifier|public
name|void
name|stateChanged
parameter_list|(
name|javax
operator|.
name|swing
operator|.
name|event
operator|.
name|ChangeEvent
name|evt
parameter_list|)
block|{
name|cacheSizeStateChanged
argument_list|(
name|evt
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|3
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|7
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|ipadx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|NORTHWEST
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|cacheSize
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel7
operator|.
name|setText
argument_list|(
literal|"Collection Cache"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|8
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|22
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel7
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|collectionCache
operator|.
name|setModel
argument_list|(
operator|new
name|javax
operator|.
name|swing
operator|.
name|SpinnerNumberModel
argument_list|(
literal|48
argument_list|,
literal|48
argument_list|,
literal|256
argument_list|,
literal|16
argument_list|)
argument_list|)
expr_stmt|;
name|collectionCache
operator|.
name|addChangeListener
argument_list|(
operator|new
name|javax
operator|.
name|swing
operator|.
name|event
operator|.
name|ChangeListener
argument_list|()
block|{
specifier|public
name|void
name|stateChanged
parameter_list|(
name|javax
operator|.
name|swing
operator|.
name|event
operator|.
name|ChangeEvent
name|evt
parameter_list|)
block|{
name|collectionCacheStateChanged
argument_list|(
name|evt
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|3
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|8
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|ipadx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|NORTHWEST
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|collectionCache
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel8
operator|.
name|setText
argument_list|(
literal|"<html><p>Memory settings only become effective after restart and only apply when eXist is started via the system tray launcher.</p></html>"
argument_list|)
expr_stmt|;
name|jLabel8
operator|.
name|setPreferredSize
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|Dimension
argument_list|(
literal|280
argument_list|,
literal|48
argument_list|)
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridheight
operator|=
literal|2
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|weightx
operator|=
literal|1.0
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|13
argument_list|,
literal|0
argument_list|,
literal|22
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel8
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|lbCurrentUsage
operator|.
name|setText
argument_list|(
literal|"Memory usage:"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|3
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridwidth
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|NORTHWEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|12
argument_list|,
literal|22
argument_list|,
literal|12
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|lbCurrentUsage
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|lbStartupMsg
operator|.
name|setFont
argument_list|(
name|lbStartupMsg
operator|.
name|getFont
argument_list|()
operator|.
name|deriveFont
argument_list|(
name|lbStartupMsg
operator|.
name|getFont
argument_list|()
operator|.
name|getStyle
argument_list|()
operator||
name|java
operator|.
name|awt
operator|.
name|Font
operator|.
name|BOLD
argument_list|)
argument_list|)
expr_stmt|;
name|lbStartupMsg
operator|.
name|setText
argument_list|(
literal|"<html><p>It seems you are starting eXist for the first time. Please configure your memory settings below.</p></html>"
argument_list|)
expr_stmt|;
name|lbStartupMsg
operator|.
name|setMinimumSize
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|Dimension
argument_list|(
literal|60
argument_list|,
literal|64
argument_list|)
argument_list|)
expr_stmt|;
name|lbStartupMsg
operator|.
name|setPreferredSize
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|Dimension
argument_list|(
literal|300
argument_list|,
literal|32
argument_list|)
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|0
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridwidth
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|weightx
operator|=
literal|1.0
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|27
argument_list|,
literal|22
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|lbStartupMsg
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel9
operator|.
name|setText
argument_list|(
literal|"<html><p>Changing the data directory will create an empty database in the new location (unless there's already data in it).</p></html>"
argument_list|)
expr_stmt|;
name|jLabel9
operator|.
name|setPreferredSize
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|Dimension
argument_list|(
literal|280
argument_list|,
literal|48
argument_list|)
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|10
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|weightx
operator|=
literal|1.0
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|13
argument_list|,
literal|0
argument_list|,
literal|22
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel9
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel10
operator|.
name|setFont
argument_list|(
name|jLabel10
operator|.
name|getFont
argument_list|()
operator|.
name|deriveFont
argument_list|(
name|jLabel10
operator|.
name|getFont
argument_list|()
operator|.
name|getStyle
argument_list|()
operator||
name|java
operator|.
name|awt
operator|.
name|Font
operator|.
name|BOLD
argument_list|)
argument_list|)
expr_stmt|;
name|jLabel10
operator|.
name|setText
argument_list|(
literal|"Data Directory"
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|9
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|26
argument_list|,
literal|22
argument_list|,
literal|16
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel10
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|dataDir
operator|.
name|setMinimumSize
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|Dimension
argument_list|(
literal|180
argument_list|,
literal|28
argument_list|)
argument_list|)
expr_stmt|;
name|dataDir
operator|.
name|setPreferredSize
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|Dimension
argument_list|(
literal|180
argument_list|,
literal|28
argument_list|)
argument_list|)
expr_stmt|;
name|dataDir
operator|.
name|addActionListener
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionListener
argument_list|()
block|{
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
name|dataDirActionPerformed
argument_list|(
name|evt
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|10
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridwidth
operator|=
literal|2
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|22
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|dataDir
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|jLabel11
operator|.
name|setText
argument_list|(
literal|"<html><p>Total cache size should not exceed 1/3 of max memory unless you have more than 2gb available.</p></html>"
argument_list|)
expr_stmt|;
name|jLabel11
operator|.
name|setPreferredSize
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|Dimension
argument_list|(
literal|280
argument_list|,
literal|48
argument_list|)
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|7
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridheight
operator|=
literal|2
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|WEST
expr_stmt|;
name|gridBagConstraints
operator|.
name|weightx
operator|=
literal|1.0
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|0
argument_list|,
literal|13
argument_list|,
literal|0
argument_list|,
literal|22
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|jLabel11
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|btnPanel
operator|.
name|setLayout
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|FlowLayout
argument_list|(
name|java
operator|.
name|awt
operator|.
name|FlowLayout
operator|.
name|RIGHT
argument_list|)
argument_list|)
expr_stmt|;
name|btnCancel
operator|.
name|setText
argument_list|(
literal|"Cancel"
argument_list|)
expr_stmt|;
name|btnCancel
operator|.
name|addActionListener
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionListener
argument_list|()
block|{
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
name|btnCancelActionPerformed
argument_list|(
name|evt
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|btnPanel
operator|.
name|add
argument_list|(
name|btnCancel
argument_list|)
expr_stmt|;
name|btnSave
operator|.
name|setText
argument_list|(
literal|"Save"
argument_list|)
expr_stmt|;
name|btnSave
operator|.
name|addActionListener
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionListener
argument_list|()
block|{
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
name|saveConfig
argument_list|(
name|evt
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|btnPanel
operator|.
name|add
argument_list|(
name|btnSave
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|1
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|11
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridwidth
operator|=
literal|4
expr_stmt|;
name|gridBagConstraints
operator|.
name|fill
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|HORIZONTAL
expr_stmt|;
name|gridBagConstraints
operator|.
name|anchor
operator|=
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
operator|.
name|SOUTHEAST
expr_stmt|;
name|gridBagConstraints
operator|.
name|weightx
operator|=
literal|1.0
expr_stmt|;
name|gridBagConstraints
operator|.
name|insets
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|Insets
argument_list|(
literal|36
argument_list|,
literal|13
argument_list|,
literal|8
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|btnPanel
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|btnSelectDir
operator|.
name|setText
argument_list|(
literal|"Select"
argument_list|)
expr_stmt|;
name|btnSelectDir
operator|.
name|addActionListener
argument_list|(
operator|new
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionListener
argument_list|()
block|{
specifier|public
name|void
name|actionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
name|btnSelectDirActionPerformed
argument_list|(
name|evt
argument_list|)
expr_stmt|;
block|}
block|}
argument_list|)
expr_stmt|;
name|gridBagConstraints
operator|=
operator|new
name|java
operator|.
name|awt
operator|.
name|GridBagConstraints
argument_list|()
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridx
operator|=
literal|3
expr_stmt|;
name|gridBagConstraints
operator|.
name|gridy
operator|=
literal|10
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|btnSelectDir
argument_list|,
name|gridBagConstraints
argument_list|)
expr_stmt|;
name|pack
argument_list|()
expr_stmt|;
block|}
comment|//</editor-fold>//GEN-END:initComponents
specifier|private
name|void
name|btnCancelActionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_btnCancelActionPerformed
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
block|}
comment|//GEN-LAST:event_btnCancelActionPerformed
specifier|private
name|void
name|maxMemoryChanged
parameter_list|(
name|javax
operator|.
name|swing
operator|.
name|event
operator|.
name|ChangeEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_maxMemoryChanged
name|checkCacheBoundaries
argument_list|()
expr_stmt|;
name|changed
operator|=
literal|true
expr_stmt|;
block|}
comment|//GEN-LAST:event_maxMemoryChanged
specifier|private
name|boolean
name|checkDataDir
parameter_list|()
block|{
if|if
condition|(
operator|!
name|dataDirChanged
condition|)
return|return
literal|true
return|;
name|File
name|dir
init|=
operator|new
name|File
argument_list|(
name|dataDir
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
name|dir
operator|.
name|exists
argument_list|()
condition|)
block|{
name|Collection
argument_list|<
name|File
argument_list|>
name|files
init|=
name|FileUtils
operator|.
name|listFiles
argument_list|(
name|dir
argument_list|,
operator|new
name|String
index|[]
block|{
literal|"dbx"
block|}
argument_list|,
literal|false
argument_list|)
decl_stmt|;
if|if
condition|(
name|files
operator|.
name|size
argument_list|()
operator|>
literal|0
condition|)
block|{
specifier|final
name|int
name|r
init|=
name|JOptionPane
operator|.
name|showConfirmDialog
argument_list|(
name|this
argument_list|,
literal|"The specified data directory already contains data. "
operator|+
literal|"Do you want to use this? Data will not be removed."
argument_list|,
literal|"Confirm Data Directory"
argument_list|,
name|JOptionPane
operator|.
name|OK_CANCEL_OPTION
argument_list|,
name|JOptionPane
operator|.
name|WARNING_MESSAGE
argument_list|)
decl_stmt|;
if|if
condition|(
name|r
operator|==
name|JOptionPane
operator|.
name|OK_OPTION
condition|)
block|{
return|return
literal|true
return|;
block|}
return|return
literal|false
return|;
block|}
block|}
else|else
block|{
specifier|final
name|int
name|r
init|=
name|JOptionPane
operator|.
name|showConfirmDialog
argument_list|(
name|this
argument_list|,
literal|"The specified data directory does not exist. Do you want to create it?"
argument_list|,
literal|"Create data directory?"
argument_list|,
name|JOptionPane
operator|.
name|YES_NO_OPTION
argument_list|,
name|JOptionPane
operator|.
name|QUESTION_MESSAGE
argument_list|)
decl_stmt|;
if|if
condition|(
name|r
operator|==
name|JOptionPane
operator|.
name|YES_OPTION
condition|)
block|{
try|try
block|{
name|FileUtils
operator|.
name|forceMkdir
argument_list|(
name|dir
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|IOException
name|e
parameter_list|)
block|{
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
name|this
argument_list|,
literal|"Failed to create data directory: "
operator|+
name|dir
operator|.
name|getAbsolutePath
argument_list|()
argument_list|,
literal|"Failed to create directory"
argument_list|,
name|JOptionPane
operator|.
name|ERROR_MESSAGE
argument_list|)
expr_stmt|;
return|return
literal|false
return|;
block|}
return|return
literal|true
return|;
block|}
return|return
literal|false
return|;
block|}
if|if
condition|(
operator|!
name|dir
operator|.
name|canWrite
argument_list|()
condition|)
block|{
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
name|this
argument_list|,
literal|"The specified data directory is not writable. "
operator|+
literal|"Please choose a different one."
argument_list|,
literal|"Data Directory Error"
argument_list|,
name|JOptionPane
operator|.
name|ERROR_MESSAGE
argument_list|)
expr_stmt|;
return|return
literal|false
return|;
block|}
return|return
literal|true
return|;
block|}
specifier|private
name|void
name|saveConfig
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_saveConfig
if|if
condition|(
operator|!
name|beforeStart
operator|&&
operator|!
name|changed
operator|&&
operator|!
name|dataDirChanged
condition|)
block|{
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
operator|!
name|checkDataDir
argument_list|()
condition|)
return|return;
try|try
block|{
name|Properties
name|properties
init|=
operator|new
name|Properties
argument_list|()
decl_stmt|;
name|properties
operator|.
name|setProperty
argument_list|(
literal|"memory.max"
argument_list|,
name|maxMemory
operator|.
name|getValue
argument_list|()
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
name|properties
operator|.
name|setProperty
argument_list|(
literal|"memory.min"
argument_list|,
name|minMemory
operator|.
name|getValue
argument_list|()
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
name|ConfigurationUtility
operator|.
name|saveProperties
argument_list|(
name|properties
argument_list|)
expr_stmt|;
name|properties
operator|.
name|clear
argument_list|()
expr_stmt|;
name|properties
operator|.
name|setProperty
argument_list|(
literal|"cacheSize"
argument_list|,
name|cacheSize
operator|.
name|getValue
argument_list|()
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
name|properties
operator|.
name|setProperty
argument_list|(
literal|"collectionCache"
argument_list|,
name|collectionCache
operator|.
name|getValue
argument_list|()
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
name|properties
operator|.
name|setProperty
argument_list|(
literal|"dataDir"
argument_list|,
name|dataDir
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|ConfigurationUtility
operator|.
name|saveConfiguration
argument_list|(
name|properties
argument_list|)
expr_stmt|;
if|if
condition|(
name|beforeStart
condition|)
block|{
name|beforeStart
operator|=
literal|false
expr_stmt|;
name|btnCancel
operator|.
name|setVisible
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|setVisible
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|this
operator|.
name|launcher
operator|.
name|shutdown
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
if|else if
condition|(
name|changed
operator|||
name|dataDirChanged
condition|)
block|{
name|int
name|r
init|=
name|JOptionPane
operator|.
name|showConfirmDialog
argument_list|(
name|this
argument_list|,
literal|"Database needs to be restarted to apply the "
operator|+
literal|"new settings."
argument_list|,
literal|"Confirm restart"
argument_list|,
name|JOptionPane
operator|.
name|YES_NO_OPTION
argument_list|,
name|JOptionPane
operator|.
name|WARNING_MESSAGE
argument_list|)
decl_stmt|;
if|if
condition|(
name|r
operator|==
name|JOptionPane
operator|.
name|YES_OPTION
condition|)
block|{
name|changed
operator|=
literal|false
expr_stmt|;
name|dataDirChanged
operator|=
literal|false
expr_stmt|;
name|this
operator|.
name|launcher
operator|.
name|shutdown
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
block|}
block|}
catch|catch
parameter_list|(
name|IOException
name|e
parameter_list|)
block|{
name|e
operator|.
name|printStackTrace
argument_list|()
expr_stmt|;
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
name|this
argument_list|,
literal|"Failed to save Java settings: "
operator|+
name|e
operator|.
name|getMessage
argument_list|()
argument_list|,
literal|"Save Error"
argument_list|,
name|JOptionPane
operator|.
name|ERROR_MESSAGE
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|TransformerException
name|e
parameter_list|)
block|{
name|e
operator|.
name|printStackTrace
argument_list|()
expr_stmt|;
name|JOptionPane
operator|.
name|showMessageDialog
argument_list|(
name|this
argument_list|,
literal|"Failed to save configuration: "
operator|+
name|e
operator|.
name|getMessage
argument_list|()
operator|+
literal|" at "
operator|+
name|e
operator|.
name|getLocationAsString
argument_list|()
argument_list|,
literal|"Save Error"
argument_list|,
name|JOptionPane
operator|.
name|ERROR_MESSAGE
argument_list|)
expr_stmt|;
block|}
block|}
comment|//GEN-LAST:event_saveConfig
specifier|private
name|void
name|cacheSizeStateChanged
parameter_list|(
name|javax
operator|.
name|swing
operator|.
name|event
operator|.
name|ChangeEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_cacheSizeStateChanged
name|changed
operator|=
literal|true
expr_stmt|;
name|checkCacheBoundaries
argument_list|()
expr_stmt|;
block|}
comment|//GEN-LAST:event_cacheSizeStateChanged
specifier|private
name|void
name|collectionCacheStateChanged
parameter_list|(
name|javax
operator|.
name|swing
operator|.
name|event
operator|.
name|ChangeEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_collectionCacheStateChanged
name|changed
operator|=
literal|true
expr_stmt|;
block|}
comment|//GEN-LAST:event_collectionCacheStateChanged
specifier|private
name|void
name|minMemoryStateChanged
parameter_list|(
name|javax
operator|.
name|swing
operator|.
name|event
operator|.
name|ChangeEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_minMemoryStateChanged
name|changed
operator|=
literal|true
expr_stmt|;
block|}
comment|//GEN-LAST:event_minMemoryStateChanged
specifier|private
name|void
name|dataDirActionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_dataDirActionPerformed
name|dataDirChanged
operator|=
literal|true
expr_stmt|;
block|}
comment|//GEN-LAST:event_dataDirActionPerformed
specifier|private
name|void
name|btnSelectDirActionPerformed
parameter_list|(
name|java
operator|.
name|awt
operator|.
name|event
operator|.
name|ActionEvent
name|evt
parameter_list|)
block|{
comment|//GEN-FIRST:event_btnSelectDirActionPerformed
name|File
name|currentDir
init|=
operator|new
name|File
argument_list|(
name|dataDir
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|currentDir
operator|.
name|exists
argument_list|()
condition|)
block|{
name|currentDir
operator|=
name|ConfigurationHelper
operator|.
name|getExistHome
argument_list|()
expr_stmt|;
block|}
specifier|final
name|JFileChooser
name|chooser
init|=
operator|new
name|JFileChooser
argument_list|()
decl_stmt|;
name|chooser
operator|.
name|setMultiSelectionEnabled
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|chooser
operator|.
name|setFileSelectionMode
argument_list|(
name|JFileChooser
operator|.
name|DIRECTORIES_ONLY
argument_list|)
expr_stmt|;
name|chooser
operator|.
name|setCurrentDirectory
argument_list|(
name|currentDir
argument_list|)
expr_stmt|;
if|if
condition|(
name|chooser
operator|.
name|showDialog
argument_list|(
name|this
argument_list|,
literal|"Choose Data Directory"
argument_list|)
operator|==
name|JFileChooser
operator|.
name|APPROVE_OPTION
condition|)
block|{
name|dataDir
operator|.
name|setText
argument_list|(
name|chooser
operator|.
name|getSelectedFile
argument_list|()
operator|.
name|getAbsolutePath
argument_list|()
argument_list|)
expr_stmt|;
name|dataDirChanged
operator|=
literal|true
expr_stmt|;
block|}
block|}
comment|//GEN-LAST:event_btnSelectDirActionPerformed
specifier|private
name|void
name|checkCacheBoundaries
parameter_list|()
block|{
name|showCurrentMem
argument_list|()
expr_stmt|;
specifier|final
name|int
name|max
init|=
operator|(
name|Integer
operator|)
name|maxMemory
operator|.
name|getValue
argument_list|()
decl_stmt|;
specifier|final
name|SpinnerNumberModel
name|cacheModel
init|=
operator|(
name|SpinnerNumberModel
operator|)
name|cacheSize
operator|.
name|getModel
argument_list|()
decl_stmt|;
specifier|final
name|SpinnerNumberModel
name|collectionCacheModel
init|=
operator|(
name|SpinnerNumberModel
operator|)
name|collectionCache
operator|.
name|getModel
argument_list|()
decl_stmt|;
name|int
name|maxCache
decl_stmt|;
if|if
condition|(
name|max
operator|<=
literal|2048
condition|)
block|{
name|maxCache
operator|=
operator|(
name|max
operator|/
literal|3
operator|)
expr_stmt|;
block|}
else|else
block|{
name|maxCache
operator|=
operator|(
name|max
operator|/
literal|2
operator|)
expr_stmt|;
block|}
name|cacheModel
operator|.
name|setMaximum
argument_list|(
name|maxCache
operator|-
literal|48
argument_list|)
expr_stmt|;
if|if
condition|(
name|cacheModel
operator|.
name|getMaximum
argument_list|()
operator|.
name|compareTo
argument_list|(
name|cacheModel
operator|.
name|getValue
argument_list|()
argument_list|)
operator|<
literal|0
condition|)
block|{
name|cacheModel
operator|.
name|setValue
argument_list|(
name|cacheModel
operator|.
name|getMaximum
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|collectionCacheModel
operator|.
name|setMaximum
argument_list|(
name|maxCache
operator|-
operator|(
name|Integer
operator|)
name|cacheModel
operator|.
name|getValue
argument_list|()
argument_list|)
expr_stmt|;
name|lbCurrentUsage
operator|.
name|setText
argument_list|(
name|String
operator|.
name|format
argument_list|(
literal|"maxCache: %d cacheSize: %d collectionMax: %d mem: %d\n"
argument_list|,
name|maxCache
argument_list|,
name|cacheModel
operator|.
name|getValue
argument_list|()
argument_list|,
name|collectionCacheModel
operator|.
name|getMaximum
argument_list|()
argument_list|,
name|max
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|collectionCacheModel
operator|.
name|getMaximum
argument_list|()
operator|.
name|compareTo
argument_list|(
name|collectionCacheModel
operator|.
name|getValue
argument_list|()
argument_list|)
operator|<
literal|0
condition|)
block|{
name|collectionCacheModel
operator|.
name|setValue
argument_list|(
name|collectionCacheModel
operator|.
name|getMaximum
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
specifier|private
name|void
name|showCurrentMem
parameter_list|()
block|{
name|lbCurrentUsage
operator|.
name|setText
argument_list|(
literal|"Memory usage: "
operator|+
operator|(
name|Runtime
operator|.
name|getRuntime
argument_list|()
operator|.
name|freeMemory
argument_list|()
operator|/
literal|1024
operator|/
literal|1024
operator|)
operator|+
literal|" free/"
operator|+
operator|(
name|Runtime
operator|.
name|getRuntime
argument_list|()
operator|.
name|maxMemory
argument_list|()
operator|/
literal|1024
operator|/
literal|1024
operator|)
operator|+
literal|" max mb"
argument_list|)
expr_stmt|;
block|}
comment|// Variables declaration - do not modify//GEN-BEGIN:variables
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JButton
name|btnCancel
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JPanel
name|btnPanel
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JButton
name|btnSave
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JButton
name|btnSelectDir
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JSpinner
name|cacheSize
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JSpinner
name|collectionCache
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JTextField
name|dataDir
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel1
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel10
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel11
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel2
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel3
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel4
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel5
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel7
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel8
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|jLabel9
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|lbCurrentUsage
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|lbExistLogo
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JLabel
name|lbStartupMsg
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JSpinner
name|maxMemory
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JSpinner
name|minMemory
decl_stmt|;
specifier|private
name|javax
operator|.
name|swing
operator|.
name|JSeparator
name|separator
decl_stmt|;
comment|// End of variables declaration//GEN-END:variables
block|}
end_class

end_unit

