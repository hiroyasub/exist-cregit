begin_unit|revision:1.0.0;language:Java;cregit-version:0.0.1
begin_comment
comment|// $ANTLR 2.7.7 (2006-11-01): "XQueryTree.g" -> "XQueryTreeParser.java"$
end_comment

begin_package
package|package
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
package|;
end_package

begin_import
import|import
name|antlr
operator|.
name|debug
operator|.
name|misc
operator|.
name|*
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|StringReader
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|BufferedReader
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|InputStreamReader
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|ArrayList
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|List
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Iterator
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Map
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Set
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|TreeSet
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|HashMap
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Stack
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|xml
operator|.
name|XMLConstants
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|storage
operator|.
name|BrokerPool
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|storage
operator|.
name|DBBroker
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|EXistException
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|Namespaces
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|dom
operator|.
name|persistent
operator|.
name|DocumentSet
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|dom
operator|.
name|persistent
operator|.
name|DocumentImpl
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|dom
operator|.
name|QName
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|dom
operator|.
name|QName
operator|.
name|IllegalQNameException
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|security
operator|.
name|PermissionDeniedException
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|util
operator|.
name|XMLChar
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|*
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|Constants
operator|.
name|ArithmeticOperator
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|Constants
operator|.
name|Comparison
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|Constants
operator|.
name|NodeComparisonOperator
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|value
operator|.
name|*
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|functions
operator|.
name|fn
operator|.
name|*
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|update
operator|.
name|*
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|storage
operator|.
name|ElementValue
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|functions
operator|.
name|map
operator|.
name|MapExpr
import|;
end_import

begin_import
import|import
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|functions
operator|.
name|array
operator|.
name|ArrayConstructor
import|;
end_import

begin_import
import|import
name|antlr
operator|.
name|TreeParser
import|;
end_import

begin_import
import|import
name|antlr
operator|.
name|Token
import|;
end_import

begin_import
import|import
name|antlr
operator|.
name|collections
operator|.
name|AST
import|;
end_import

begin_import
import|import
name|antlr
operator|.
name|RecognitionException
import|;
end_import

begin_import
import|import
name|antlr
operator|.
name|ANTLRException
import|;
end_import

begin_import
import|import
name|antlr
operator|.
name|NoViableAltException
import|;
end_import

begin_import
import|import
name|antlr
operator|.
name|MismatchedTokenException
import|;
end_import

begin_import
import|import
name|antlr
operator|.
name|SemanticException
import|;
end_import

begin_import
import|import
name|antlr
operator|.
name|collections
operator|.
name|impl
operator|.
name|BitSet
import|;
end_import

begin_import
import|import
name|antlr
operator|.
name|ASTPair
import|;
end_import

begin_import
import|import
name|antlr
operator|.
name|collections
operator|.
name|impl
operator|.
name|ASTArray
import|;
end_import

begin_comment
comment|/**  * The tree parser: walks the AST created by {@link XQueryParser} and generates  * an internal representation of the query in the form of XQuery expression objects.  */
end_comment

begin_class
specifier|public
class|class
name|XQueryTreeParser
extends|extends
name|antlr
operator|.
name|TreeParser
implements|implements
name|XQueryTreeParserTokenTypes
block|{
specifier|private
name|XQueryContext
name|staticContext
decl_stmt|;
specifier|private
name|XQueryContext
name|context
decl_stmt|;
specifier|private
name|ExternalModule
name|myModule
init|=
literal|null
decl_stmt|;
specifier|protected
name|ArrayList
name|exceptions
init|=
operator|new
name|ArrayList
argument_list|(
literal|2
argument_list|)
decl_stmt|;
specifier|protected
name|boolean
name|foundError
init|=
literal|false
decl_stmt|;
specifier|protected
name|Map
name|declaredNamespaces
init|=
operator|new
name|HashMap
argument_list|()
decl_stmt|;
specifier|protected
name|Set
name|declaredGlobalVars
init|=
operator|new
name|TreeSet
argument_list|()
decl_stmt|;
specifier|public
name|XQueryTreeParser
parameter_list|(
name|XQueryContext
name|context
parameter_list|)
block|{
name|this
argument_list|(
name|context
argument_list|,
literal|null
argument_list|)
expr_stmt|;
block|}
specifier|public
name|XQueryTreeParser
parameter_list|(
name|XQueryContext
name|context
parameter_list|,
name|ExternalModule
name|module
parameter_list|)
block|{
name|this
argument_list|()
expr_stmt|;
name|this
operator|.
name|staticContext
operator|=
operator|new
name|XQueryContext
argument_list|(
name|context
argument_list|)
expr_stmt|;
name|this
operator|.
name|context
operator|=
name|context
expr_stmt|;
name|this
operator|.
name|myModule
operator|=
name|module
expr_stmt|;
block|}
specifier|public
name|ExternalModule
name|getModule
parameter_list|()
block|{
return|return
name|myModule
return|;
block|}
specifier|public
name|boolean
name|foundErrors
parameter_list|()
block|{
return|return
name|foundError
return|;
block|}
specifier|public
name|String
name|getErrorMessage
parameter_list|()
block|{
name|StringBuilder
name|buf
init|=
operator|new
name|StringBuilder
argument_list|()
decl_stmt|;
for|for
control|(
name|Iterator
name|i
init|=
name|exceptions
operator|.
name|iterator
argument_list|()
init|;
name|i
operator|.
name|hasNext
argument_list|()
condition|;
control|)
block|{
name|buf
operator|.
name|append
argument_list|(
operator|(
operator|(
name|Exception
operator|)
name|i
operator|.
name|next
argument_list|()
operator|)
operator|.
name|toString
argument_list|()
argument_list|)
expr_stmt|;
name|buf
operator|.
name|append
argument_list|(
literal|'\n'
argument_list|)
expr_stmt|;
block|}
return|return
name|buf
operator|.
name|toString
argument_list|()
return|;
block|}
specifier|public
name|Exception
name|getLastException
parameter_list|()
block|{
return|return
operator|(
name|Exception
operator|)
name|exceptions
operator|.
name|get
argument_list|(
name|exceptions
operator|.
name|size
argument_list|()
operator|-
literal|1
argument_list|)
return|;
block|}
specifier|protected
name|void
name|handleException
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
name|foundError
operator|=
literal|true
expr_stmt|;
name|exceptions
operator|.
name|add
argument_list|(
name|e
argument_list|)
expr_stmt|;
block|}
specifier|private
name|void
name|throwException
parameter_list|(
name|XQueryAST
name|ast
parameter_list|,
name|String
name|message
parameter_list|)
throws|throws
name|XPathException
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|ast
argument_list|,
name|message
argument_list|)
throw|;
block|}
specifier|private
specifier|static
class|class
name|ForLetClause
block|{
name|XQueryAST
name|ast
decl_stmt|;
name|String
name|varName
decl_stmt|;
name|SequenceType
name|sequenceType
init|=
literal|null
decl_stmt|;
name|String
name|posVar
init|=
literal|null
decl_stmt|;
name|Expression
name|inputSequence
decl_stmt|;
name|Expression
name|action
decl_stmt|;
name|FLWORClause
operator|.
name|ClauseType
name|type
init|=
name|FLWORClause
operator|.
name|ClauseType
operator|.
name|FOR
decl_stmt|;
name|List
argument_list|<
name|GroupSpec
argument_list|>
name|groupSpecs
init|=
literal|null
decl_stmt|;
name|List
argument_list|<
name|OrderSpec
argument_list|>
name|orderSpecs
init|=
literal|null
decl_stmt|;
name|boolean
name|allowEmpty
init|=
literal|false
decl_stmt|;
block|}
comment|/** 	 * Check QName of an annotation to see if it is in a reserved namespace. 	 */
specifier|private
name|boolean
name|annotationValid
parameter_list|(
name|QName
name|qname
parameter_list|)
block|{
name|String
name|ns
init|=
name|qname
operator|.
name|getNamespaceURI
argument_list|()
decl_stmt|;
if|if
condition|(
name|ns
operator|.
name|equals
argument_list|(
name|Namespaces
operator|.
name|XPATH_FUNCTIONS_NS
argument_list|)
condition|)
block|{
name|String
name|ln
init|=
name|qname
operator|.
name|getLocalPart
argument_list|()
decl_stmt|;
return|return
operator|(
literal|"private"
operator|.
name|equals
argument_list|(
name|ln
argument_list|)
operator|||
literal|"public"
operator|.
name|equals
argument_list|(
name|ln
argument_list|)
operator|)
return|;
block|}
else|else
block|{
return|return
operator|!
operator|(
name|ns
operator|.
name|equals
argument_list|(
name|Namespaces
operator|.
name|XML_NS
argument_list|)
operator|||
name|ns
operator|.
name|equals
argument_list|(
name|Namespaces
operator|.
name|SCHEMA_NS
argument_list|)
operator|||
name|ns
operator|.
name|equals
argument_list|(
name|Namespaces
operator|.
name|SCHEMA_INSTANCE_NS
argument_list|)
operator|||
name|ns
operator|.
name|equals
argument_list|(
name|Namespaces
operator|.
name|XPATH_FUNCTIONS_MATH_NS
argument_list|)
operator|||
name|ns
operator|.
name|equals
argument_list|(
name|Namespaces
operator|.
name|XQUERY_OPTIONS_NS
argument_list|)
operator|)
return|;
block|}
block|}
specifier|private
specifier|static
name|void
name|processAnnotations
parameter_list|(
name|List
name|annots
parameter_list|,
name|FunctionSignature
name|signature
parameter_list|)
block|{
name|Annotation
index|[]
name|anns
init|=
operator|new
name|Annotation
index|[
name|annots
operator|.
name|size
argument_list|()
index|]
decl_stmt|;
comment|//iterate the declare Annotations
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|anns
operator|.
name|length
condition|;
name|i
operator|++
control|)
block|{
name|List
name|la
init|=
operator|(
name|List
operator|)
name|annots
operator|.
name|get
argument_list|(
name|i
argument_list|)
decl_stmt|;
comment|//extract the Value for the Annotation
name|LiteralValue
index|[]
name|aValue
decl_stmt|;
if|if
condition|(
name|la
operator|.
name|size
argument_list|()
operator|>
literal|1
condition|)
block|{
name|PathExpr
name|aPath
init|=
operator|(
name|PathExpr
operator|)
name|la
operator|.
name|get
argument_list|(
literal|1
argument_list|)
decl_stmt|;
name|aValue
operator|=
operator|new
name|LiteralValue
index|[
name|aPath
operator|.
name|getSubExpressionCount
argument_list|()
index|]
expr_stmt|;
for|for
control|(
name|int
name|j
init|=
literal|0
init|;
name|j
operator|<
name|aValue
operator|.
name|length
condition|;
name|j
operator|++
control|)
block|{
name|aValue
index|[
name|j
index|]
operator|=
operator|(
name|LiteralValue
operator|)
name|aPath
operator|.
name|getExpression
argument_list|(
name|j
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|aValue
operator|=
operator|new
name|LiteralValue
index|[
literal|0
index|]
expr_stmt|;
block|}
name|Annotation
name|a
init|=
operator|new
name|Annotation
argument_list|(
operator|(
name|QName
operator|)
name|la
operator|.
name|get
argument_list|(
literal|0
argument_list|)
argument_list|,
name|aValue
argument_list|,
name|signature
argument_list|)
decl_stmt|;
name|anns
index|[
name|i
index|]
operator|=
name|a
expr_stmt|;
block|}
comment|//set the Annotations on the Function Signature
name|signature
operator|.
name|setAnnotations
argument_list|(
name|anns
argument_list|)
expr_stmt|;
block|}
specifier|private
specifier|static
name|void
name|processParams
parameter_list|(
name|List
name|varList
parameter_list|,
name|UserDefinedFunction
name|func
parameter_list|,
name|FunctionSignature
name|signature
parameter_list|)
throws|throws
name|XPathException
block|{
name|SequenceType
index|[]
name|types
init|=
operator|new
name|SequenceType
index|[
name|varList
operator|.
name|size
argument_list|()
index|]
decl_stmt|;
name|int
name|j
init|=
literal|0
decl_stmt|;
for|for
control|(
name|Iterator
name|i
init|=
name|varList
operator|.
name|iterator
argument_list|()
init|;
name|i
operator|.
name|hasNext
argument_list|()
condition|;
name|j
operator|++
control|)
block|{
name|FunctionParameterSequenceType
name|param
init|=
operator|(
name|FunctionParameterSequenceType
operator|)
name|i
operator|.
name|next
argument_list|()
decl_stmt|;
name|types
index|[
name|j
index|]
operator|=
name|param
expr_stmt|;
name|func
operator|.
name|addVariable
argument_list|(
name|param
operator|.
name|getAttributeName
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|signature
operator|.
name|setArgumentTypes
argument_list|(
name|types
argument_list|)
expr_stmt|;
block|}
specifier|public
name|XQueryTreeParser
parameter_list|()
block|{
name|tokenNames
operator|=
name|_tokenNames
expr_stmt|;
block|}
specifier|public
specifier|final
name|void
name|xpointer
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|XPathException
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|xpointer_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|nc
init|=
literal|null
decl_stmt|;
name|Expression
name|step
init|=
literal|null
decl_stmt|;
try|try
block|{
comment|// for error handling
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|XPOINTER
case|:
block|{
name|AST
name|__t2
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp1_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|XPOINTER
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t2
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|XPOINTER_ID
case|:
block|{
name|AST
name|__t3
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp2_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|XPOINTER_ID
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|nc
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|NCNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_t
operator|=
name|__t3
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|PathExpr
name|p
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|RootNode
name|root
init|=
operator|new
name|RootNode
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|p
operator|.
name|add
argument_list|(
name|root
argument_list|)
expr_stmt|;
name|Function
name|fun
init|=
operator|new
name|FunId
argument_list|(
name|context
argument_list|,
name|FunId
operator|.
name|signature
index|[
literal|0
index|]
argument_list|)
decl_stmt|;
name|List
name|params
init|=
operator|new
name|ArrayList
argument_list|(
literal|1
argument_list|)
decl_stmt|;
name|params
operator|.
name|add
argument_list|(
operator|new
name|LiteralValue
argument_list|(
name|context
argument_list|,
operator|new
name|StringValue
argument_list|(
name|nc
operator|.
name|getText
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|fun
operator|.
name|setArguments
argument_list|(
name|params
argument_list|)
expr_stmt|;
name|p
operator|.
name|addPath
argument_list|(
name|fun
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|p
argument_list|)
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
catch|catch
parameter_list|(
name|EXistException
name|e
parameter_list|)
block|{
name|handleException
argument_list|(
name|e
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|PermissionDeniedException
name|e
parameter_list|)
block|{
name|handleException
argument_list|(
name|e
argument_list|)
expr_stmt|;
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
block|}
comment|/**  * Process a top-level expression like FLWOR, conditionals, comparisons etc.  */
specifier|public
specifier|final
name|Expression
name|expr
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|expr_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|eof
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|seq
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|c
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|astIf
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|astThen
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|astElse
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|someVarName
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|everyVarName
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|astTry
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|astCatch
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|code
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|desc
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|val
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|r
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|f
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|varName
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|posVar
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|l
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|letVarName
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|gb
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|groupVarName
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|groupCollURI
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|ob
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|collURI
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|w
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|switchAST
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|var
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|dvar
init|=
literal|null
decl_stmt|;
name|step
operator|=
literal|null
expr_stmt|;
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EOF
case|:
block|{
name|eof
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|Token
operator|.
name|EOF_TYPE
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
comment|// Added for handling empty mainModule /ljo
comment|// System.out.println("EMPTY EXPR");
if|if
condition|(
name|eof
operator|.
name|getText
argument_list|()
operator|==
literal|null
operator|||
literal|""
operator|.
name|equals
argument_list|(
name|eof
operator|.
name|getText
argument_list|()
argument_list|)
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
name|eof
argument_list|,
literal|"err:XPST0003: EOF or zero-length string found where a valid XPath expression was expected."
argument_list|)
throw|;
break|break;
block|}
case|case
name|ARROW_OP
case|:
block|{
name|step
operator|=
name|arrowOp
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
block|{
name|step
operator|=
name|typeCastExpr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
name|SEQUENCE
case|:
block|{
name|AST
name|__t136
init|=
name|_t
decl_stmt|;
name|seq
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|SEQUENCE
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|SequenceConstructor
name|sc
init|=
operator|new
name|SequenceConstructor
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|sc
operator|.
name|setASTNode
argument_list|(
name|seq
argument_list|)
expr_stmt|;
block|{
name|_loop138
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_0
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|PathExpr
name|seqPath
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|seqPath
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|sc
operator|.
name|addPath
argument_list|(
name|seqPath
argument_list|)
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop138
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|path
operator|.
name|addPath
argument_list|(
name|sc
argument_list|)
expr_stmt|;
name|step
operator|=
name|sc
expr_stmt|;
name|_t
operator|=
name|__t136
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|CONCAT
case|:
block|{
name|AST
name|__t139
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp3_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|CONCAT
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|ConcatExpr
name|concat
init|=
operator|new
name|ConcatExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
block|{
name|_loop141
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_0
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|PathExpr
name|strPath
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|strPath
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|concat
operator|.
name|add
argument_list|(
name|strPath
argument_list|)
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop141
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|path
operator|.
name|addPath
argument_list|(
name|concat
argument_list|)
expr_stmt|;
name|step
operator|=
name|concat
expr_stmt|;
name|_t
operator|=
name|__t139
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|COMMA
case|:
block|{
name|AST
name|__t142
init|=
name|_t
decl_stmt|;
name|c
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|COMMA
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|left
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|PathExpr
name|right
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|SequenceConstructor
name|sc
init|=
operator|new
name|SequenceConstructor
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|sc
operator|.
name|setASTNode
argument_list|(
name|c
argument_list|)
expr_stmt|;
name|sc
operator|.
name|addPath
argument_list|(
name|left
argument_list|)
expr_stmt|;
name|sc
operator|.
name|addPath
argument_list|(
name|right
argument_list|)
expr_stmt|;
name|path
operator|.
name|addPath
argument_list|(
name|sc
argument_list|)
expr_stmt|;
name|step
operator|=
name|sc
expr_stmt|;
name|_t
operator|=
name|__t142
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_if
case|:
block|{
name|AST
name|__t143
init|=
name|_t
decl_stmt|;
name|astIf
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_if
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|testExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|PathExpr
name|thenExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|PathExpr
name|elseExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|testExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|astThen
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|thenExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|astElse
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|elseExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|thenExpr
operator|.
name|setASTNode
argument_list|(
name|astThen
argument_list|)
expr_stmt|;
name|elseExpr
operator|.
name|setASTNode
argument_list|(
name|astElse
argument_list|)
expr_stmt|;
name|ConditionalExpression
name|cond
init|=
operator|new
name|ConditionalExpression
argument_list|(
name|context
argument_list|,
name|testExpr
argument_list|,
name|thenExpr
argument_list|,
operator|new
name|DebuggableExpression
argument_list|(
name|elseExpr
argument_list|)
argument_list|)
decl_stmt|;
name|cond
operator|.
name|setASTNode
argument_list|(
name|astIf
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|cond
argument_list|)
expr_stmt|;
name|step
operator|=
name|cond
expr_stmt|;
name|_t
operator|=
name|__t143
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_some
case|:
block|{
name|AST
name|__t144
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp4_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_some
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|List
name|clauses
init|=
operator|new
name|ArrayList
argument_list|()
decl_stmt|;
name|PathExpr
name|satisfiesExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
block|{
name|_loop149
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|VARIABLE_BINDING
operator|)
condition|)
block|{
name|AST
name|__t146
init|=
name|_t
decl_stmt|;
name|someVarName
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|VARIABLE_BINDING
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|ForLetClause
name|clause
init|=
operator|new
name|ForLetClause
argument_list|()
decl_stmt|;
name|PathExpr
name|inputSequence
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_as
case|:
block|{
name|AST
name|__t148
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp5_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_as
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|SequenceType
name|type
init|=
operator|new
name|SequenceType
argument_list|()
decl_stmt|;
name|sequenceType
argument_list|(
name|_t
argument_list|,
name|type
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t148
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|clause
operator|.
name|sequenceType
operator|=
name|type
expr_stmt|;
break|break;
block|}
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|inputSequence
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|clause
operator|.
name|varName
operator|=
name|someVarName
operator|.
name|getText
argument_list|()
expr_stmt|;
name|clause
operator|.
name|inputSequence
operator|=
name|inputSequence
expr_stmt|;
name|clauses
operator|.
name|add
argument_list|(
name|clause
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t146
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop149
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|satisfiesExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|Expression
name|action
init|=
name|satisfiesExpr
decl_stmt|;
for|for
control|(
name|int
name|i
init|=
name|clauses
operator|.
name|size
argument_list|()
operator|-
literal|1
init|;
name|i
operator|>=
literal|0
condition|;
name|i
operator|--
control|)
block|{
name|ForLetClause
name|clause
init|=
operator|(
name|ForLetClause
operator|)
name|clauses
operator|.
name|get
argument_list|(
name|i
argument_list|)
decl_stmt|;
name|BindingExpression
name|expr
init|=
operator|new
name|QuantifiedExpression
argument_list|(
name|context
argument_list|,
name|QuantifiedExpression
operator|.
name|SOME
argument_list|)
decl_stmt|;
name|expr
operator|.
name|setVariable
argument_list|(
name|clause
operator|.
name|varName
argument_list|)
expr_stmt|;
name|expr
operator|.
name|setSequenceType
argument_list|(
name|clause
operator|.
name|sequenceType
argument_list|)
expr_stmt|;
name|expr
operator|.
name|setInputSequence
argument_list|(
name|clause
operator|.
name|inputSequence
argument_list|)
expr_stmt|;
name|expr
operator|.
name|setReturnExpression
argument_list|(
name|action
argument_list|)
expr_stmt|;
name|satisfiesExpr
operator|=
literal|null
expr_stmt|;
name|action
operator|=
name|expr
expr_stmt|;
block|}
name|path
operator|.
name|add
argument_list|(
name|action
argument_list|)
expr_stmt|;
name|step
operator|=
name|action
expr_stmt|;
name|_t
operator|=
name|__t144
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_every
case|:
block|{
name|AST
name|__t150
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp6_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_every
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|List
name|clauses
init|=
operator|new
name|ArrayList
argument_list|()
decl_stmt|;
name|PathExpr
name|satisfiesExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
block|{
name|_loop155
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|VARIABLE_BINDING
operator|)
condition|)
block|{
name|AST
name|__t152
init|=
name|_t
decl_stmt|;
name|everyVarName
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|VARIABLE_BINDING
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|ForLetClause
name|clause
init|=
operator|new
name|ForLetClause
argument_list|()
decl_stmt|;
name|PathExpr
name|inputSequence
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_as
case|:
block|{
name|AST
name|__t154
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp7_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_as
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|SequenceType
name|type
init|=
operator|new
name|SequenceType
argument_list|()
decl_stmt|;
name|sequenceType
argument_list|(
name|_t
argument_list|,
name|type
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t154
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|clause
operator|.
name|sequenceType
operator|=
name|type
expr_stmt|;
break|break;
block|}
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|inputSequence
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|clause
operator|.
name|varName
operator|=
name|everyVarName
operator|.
name|getText
argument_list|()
expr_stmt|;
name|clause
operator|.
name|inputSequence
operator|=
name|inputSequence
expr_stmt|;
name|clauses
operator|.
name|add
argument_list|(
name|clause
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t152
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop155
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|satisfiesExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|Expression
name|action
init|=
name|satisfiesExpr
decl_stmt|;
for|for
control|(
name|int
name|i
init|=
name|clauses
operator|.
name|size
argument_list|()
operator|-
literal|1
init|;
name|i
operator|>=
literal|0
condition|;
name|i
operator|--
control|)
block|{
name|ForLetClause
name|clause
init|=
operator|(
name|ForLetClause
operator|)
name|clauses
operator|.
name|get
argument_list|(
name|i
argument_list|)
decl_stmt|;
name|BindingExpression
name|expr
init|=
operator|new
name|QuantifiedExpression
argument_list|(
name|context
argument_list|,
name|QuantifiedExpression
operator|.
name|EVERY
argument_list|)
decl_stmt|;
name|expr
operator|.
name|setVariable
argument_list|(
name|clause
operator|.
name|varName
argument_list|)
expr_stmt|;
name|expr
operator|.
name|setSequenceType
argument_list|(
name|clause
operator|.
name|sequenceType
argument_list|)
expr_stmt|;
name|expr
operator|.
name|setInputSequence
argument_list|(
name|clause
operator|.
name|inputSequence
argument_list|)
expr_stmt|;
name|expr
operator|.
name|setReturnExpression
argument_list|(
name|action
argument_list|)
expr_stmt|;
name|satisfiesExpr
operator|=
literal|null
expr_stmt|;
name|action
operator|=
name|expr
expr_stmt|;
block|}
name|path
operator|.
name|add
argument_list|(
name|action
argument_list|)
expr_stmt|;
name|step
operator|=
name|action
expr_stmt|;
name|_t
operator|=
name|__t150
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_try
case|:
block|{
name|AST
name|__t156
init|=
name|_t
decl_stmt|;
name|astTry
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_try
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|tryTargetExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|tryTargetExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|TryCatchExpression
name|cond
init|=
operator|new
name|TryCatchExpression
argument_list|(
name|context
argument_list|,
name|tryTargetExpr
argument_list|)
decl_stmt|;
name|cond
operator|.
name|setASTNode
argument_list|(
name|astTry
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|cond
argument_list|)
expr_stmt|;
block|{
name|int
name|_cnt163
init|=
literal|0
decl_stmt|;
name|_loop163
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|LITERAL_catch
operator|)
condition|)
block|{
specifier|final
name|List
argument_list|<
name|QName
argument_list|>
name|catchErrorList
init|=
operator|new
name|ArrayList
argument_list|<>
argument_list|(
literal|2
argument_list|)
decl_stmt|;
specifier|final
name|List
argument_list|<
name|QName
argument_list|>
name|catchVars
init|=
operator|new
name|ArrayList
argument_list|<>
argument_list|(
literal|3
argument_list|)
decl_stmt|;
specifier|final
name|PathExpr
name|catchExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|AST
name|__t158
init|=
name|_t
decl_stmt|;
name|astCatch
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_catch
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
block|{
name|catchErrorList
argument_list|(
name|_t
argument_list|,
name|catchErrorList
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|CATCH_ERROR_CODE
case|:
block|{
name|QName
name|qncode
init|=
literal|null
decl_stmt|;
name|QName
name|qndesc
init|=
literal|null
decl_stmt|;
name|QName
name|qnval
init|=
literal|null
decl_stmt|;
name|code
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|CATCH_ERROR_CODE
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|qncode
operator|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|code
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|catchVars
operator|.
name|add
argument_list|(
name|qncode
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|code
operator|.
name|getLine
argument_list|()
argument_list|,
name|code
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|code
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|CATCH_ERROR_DESC
case|:
block|{
name|desc
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|CATCH_ERROR_DESC
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|qndesc
operator|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|desc
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|catchVars
operator|.
name|add
argument_list|(
name|qndesc
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|desc
operator|.
name|getLine
argument_list|()
argument_list|,
name|desc
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|desc
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|CATCH_ERROR_VAL
case|:
block|{
name|val
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|CATCH_ERROR_VAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|qnval
operator|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|val
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|catchVars
operator|.
name|add
argument_list|(
name|qnval
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|val
operator|.
name|getLine
argument_list|()
argument_list|,
name|val
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|val
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
break|break;
block|}
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
break|break;
block|}
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
break|break;
block|}
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|catchExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|catchExpr
operator|.
name|setASTNode
argument_list|(
name|astCatch
argument_list|)
expr_stmt|;
name|cond
operator|.
name|addCatchClause
argument_list|(
name|catchErrorList
argument_list|,
name|catchVars
argument_list|,
name|catchExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t158
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|_cnt163
operator|>=
literal|1
condition|)
block|{
break|break
name|_loop163
break|;
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_cnt163
operator|++
expr_stmt|;
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|step
operator|=
name|cond
expr_stmt|;
name|_t
operator|=
name|__t156
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_return
case|:
block|{
name|AST
name|__t164
init|=
name|_t
decl_stmt|;
name|r
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_return
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|List
argument_list|<
name|ForLetClause
argument_list|>
name|clauses
init|=
operator|new
name|ArrayList
argument_list|<
name|ForLetClause
argument_list|>
argument_list|()
decl_stmt|;
name|Expression
name|action
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|action
operator|.
name|setASTNode
argument_list|(
name|r
argument_list|)
expr_stmt|;
name|PathExpr
name|whereExpr
init|=
literal|null
decl_stmt|;
name|List
argument_list|<
name|OrderSpec
argument_list|>
name|orderBy
init|=
literal|null
decl_stmt|;
block|{
name|int
name|_cnt195
init|=
literal|0
decl_stmt|;
name|_loop195
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_for
case|:
block|{
name|AST
name|__t166
init|=
name|_t
decl_stmt|;
name|f
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_for
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
block|{
name|int
name|_cnt173
init|=
literal|0
decl_stmt|;
name|_loop173
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|VARIABLE_BINDING
operator|)
condition|)
block|{
name|AST
name|__t168
init|=
name|_t
decl_stmt|;
name|varName
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|VARIABLE_BINDING
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|ForLetClause
name|clause
init|=
operator|new
name|ForLetClause
argument_list|()
decl_stmt|;
name|clause
operator|.
name|ast
operator|=
name|varName
expr_stmt|;
name|PathExpr
name|inputSequence
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_as
case|:
block|{
name|AST
name|__t170
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp8_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_as
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|clause
operator|.
name|sequenceType
operator|=
operator|new
name|SequenceType
argument_list|()
expr_stmt|;
name|sequenceType
argument_list|(
name|_t
argument_list|,
name|clause
operator|.
name|sequenceType
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t170
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|POSITIONAL_VAR
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|LITERAL_empty
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_empty
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp9_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_empty
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|clause
operator|.
name|allowEmpty
operator|=
literal|true
expr_stmt|;
break|break;
block|}
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|POSITIONAL_VAR
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|POSITIONAL_VAR
case|:
block|{
name|posVar
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|POSITIONAL_VAR
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|clause
operator|.
name|posVar
operator|=
name|posVar
operator|.
name|getText
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|inputSequence
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|clause
operator|.
name|varName
operator|=
name|varName
operator|.
name|getText
argument_list|()
expr_stmt|;
name|clause
operator|.
name|inputSequence
operator|=
name|inputSequence
expr_stmt|;
name|clauses
operator|.
name|add
argument_list|(
name|clause
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t168
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|_cnt173
operator|>=
literal|1
condition|)
block|{
break|break
name|_loop173
break|;
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_cnt173
operator|++
expr_stmt|;
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|_t
operator|=
name|__t166
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_let
case|:
block|{
name|AST
name|__t174
init|=
name|_t
decl_stmt|;
name|l
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_let
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
block|{
name|int
name|_cnt179
init|=
literal|0
decl_stmt|;
name|_loop179
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|VARIABLE_BINDING
operator|)
condition|)
block|{
name|AST
name|__t176
init|=
name|_t
decl_stmt|;
name|letVarName
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|VARIABLE_BINDING
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|ForLetClause
name|clause
init|=
operator|new
name|ForLetClause
argument_list|()
decl_stmt|;
name|clause
operator|.
name|ast
operator|=
name|letVarName
expr_stmt|;
name|clause
operator|.
name|type
operator|=
name|FLWORClause
operator|.
name|ClauseType
operator|.
name|LET
expr_stmt|;
name|PathExpr
name|inputSequence
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_as
case|:
block|{
name|AST
name|__t178
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp10_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_as
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|clause
operator|.
name|sequenceType
operator|=
operator|new
name|SequenceType
argument_list|()
expr_stmt|;
name|sequenceType
argument_list|(
name|_t
argument_list|,
name|clause
operator|.
name|sequenceType
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t178
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|inputSequence
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|clause
operator|.
name|varName
operator|=
name|letVarName
operator|.
name|getText
argument_list|()
expr_stmt|;
name|clause
operator|.
name|inputSequence
operator|=
name|inputSequence
expr_stmt|;
name|clauses
operator|.
name|add
argument_list|(
name|clause
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t176
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|_cnt179
operator|>=
literal|1
condition|)
block|{
break|break
name|_loop179
break|;
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_cnt179
operator|++
expr_stmt|;
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|_t
operator|=
name|__t174
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|GROUP_BY
case|:
block|{
name|AST
name|__t180
init|=
name|_t
decl_stmt|;
name|gb
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|GROUP_BY
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|ForLetClause
name|clause
init|=
operator|new
name|ForLetClause
argument_list|()
decl_stmt|;
name|clause
operator|.
name|ast
operator|=
name|gb
expr_stmt|;
name|clause
operator|.
name|type
operator|=
name|FLWORClause
operator|.
name|ClauseType
operator|.
name|GROUPBY
expr_stmt|;
name|clause
operator|.
name|groupSpecs
operator|=
operator|new
name|ArrayList
argument_list|<
name|GroupSpec
argument_list|>
argument_list|(
literal|4
argument_list|)
expr_stmt|;
name|clauses
operator|.
name|add
argument_list|(
name|clause
argument_list|)
expr_stmt|;
block|{
name|int
name|_cnt185
init|=
literal|0
decl_stmt|;
name|_loop185
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|VARIABLE_BINDING
operator|)
condition|)
block|{
name|AST
name|__t182
init|=
name|_t
decl_stmt|;
name|groupVarName
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|VARIABLE_BINDING
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|groupSpecExpr
init|=
literal|null
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|groupSpecExpr
operator|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|groupSpecExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
case|case
name|LITERAL_collation
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
specifier|final
name|QName
name|groupKeyVar
decl_stmt|;
try|try
block|{
name|groupKeyVar
operator|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|groupVarName
operator|.
name|getText
argument_list|()
argument_list|,
literal|null
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|groupVarName
operator|.
name|getLine
argument_list|()
argument_list|,
name|groupVarName
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|groupVarName
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
name|GroupSpec
name|groupSpec
init|=
operator|new
name|GroupSpec
argument_list|(
name|context
argument_list|,
name|groupSpecExpr
argument_list|,
name|groupKeyVar
argument_list|)
decl_stmt|;
name|clause
operator|.
name|groupSpecs
operator|.
name|add
argument_list|(
name|groupSpec
argument_list|)
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_collation
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp11_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_collation
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|groupCollURI
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|groupSpec
operator|.
name|setCollator
argument_list|(
name|groupCollURI
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t182
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|_cnt185
operator|>=
literal|1
condition|)
block|{
break|break
name|_loop185
break|;
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_cnt185
operator|++
expr_stmt|;
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|_t
operator|=
name|__t180
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|ORDER_BY
case|:
block|{
name|AST
name|__t186
init|=
name|_t
decl_stmt|;
name|ob
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|ORDER_BY
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|orderBy
operator|=
operator|new
name|ArrayList
argument_list|(
literal|3
argument_list|)
expr_stmt|;
block|{
name|int
name|_cnt193
init|=
literal|0
decl_stmt|;
name|_loop193
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_0
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|PathExpr
name|orderSpecExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|orderSpecExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|OrderSpec
name|orderSpec
init|=
operator|new
name|OrderSpec
argument_list|(
name|context
argument_list|,
name|orderSpecExpr
argument_list|)
decl_stmt|;
name|int
name|modifiers
init|=
literal|0
decl_stmt|;
name|boolean
name|orderDescending
init|=
literal|false
decl_stmt|;
name|orderBy
operator|.
name|add
argument_list|(
name|orderSpec
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|context
operator|.
name|orderEmptyGreatest
argument_list|()
condition|)
block|{
name|modifiers
operator||=
name|OrderSpec
operator|.
name|EMPTY_LEAST
expr_stmt|;
name|orderSpec
operator|.
name|setModifiers
argument_list|(
name|modifiers
argument_list|)
expr_stmt|;
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_ascending
case|:
case|case
name|LITERAL_descending
case|:
block|{
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_ascending
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp12_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_ascending
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_descending
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp13_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_descending
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|modifiers
operator||=
name|OrderSpec
operator|.
name|DESCENDING_ORDER
expr_stmt|;
name|orderSpec
operator|.
name|setModifiers
argument_list|(
name|modifiers
argument_list|)
expr_stmt|;
name|orderDescending
operator|=
literal|true
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
break|break;
block|}
case|case
name|EOF
case|:
case|case
literal|3
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_collation
case|:
case|case
name|LITERAL_element
case|:
case|case
name|LITERAL_empty
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_empty
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp14_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_empty
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_greatest
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp15_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_greatest
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
if|if
condition|(
operator|!
name|context
operator|.
name|orderEmptyGreatest
argument_list|()
condition|)
name|modifiers
operator|&=
name|OrderSpec
operator|.
name|EMPTY_GREATEST
expr_stmt|;
if|if
condition|(
name|orderDescending
condition|)
name|modifiers
operator||=
name|OrderSpec
operator|.
name|DESCENDING_ORDER
expr_stmt|;
name|orderSpec
operator|.
name|setModifiers
argument_list|(
name|modifiers
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_least
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp16_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_least
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|modifiers
operator||=
name|OrderSpec
operator|.
name|EMPTY_LEAST
expr_stmt|;
name|orderSpec
operator|.
name|setModifiers
argument_list|(
name|modifiers
argument_list|)
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
break|break;
block|}
case|case
name|EOF
case|:
case|case
literal|3
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_collation
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_collation
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp17_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_collation
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|collURI
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|orderSpec
operator|.
name|setCollation
argument_list|(
name|collURI
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|EOF
case|:
case|case
literal|3
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|_cnt193
operator|>=
literal|1
condition|)
block|{
break|break
name|_loop193
break|;
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_cnt193
operator|++
expr_stmt|;
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|ForLetClause
name|clause
init|=
operator|new
name|ForLetClause
argument_list|()
decl_stmt|;
name|clause
operator|.
name|ast
operator|=
name|ob
expr_stmt|;
name|clause
operator|.
name|type
operator|=
name|FLWORClause
operator|.
name|ClauseType
operator|.
name|ORDERBY
expr_stmt|;
name|clause
operator|.
name|orderSpecs
operator|=
name|orderBy
expr_stmt|;
name|clauses
operator|.
name|add
argument_list|(
name|clause
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t186
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_where
case|:
block|{
name|AST
name|__t194
init|=
name|_t
decl_stmt|;
name|w
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_where
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|whereExpr
operator|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|whereExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|ForLetClause
name|clause
init|=
operator|new
name|ForLetClause
argument_list|()
decl_stmt|;
name|clause
operator|.
name|ast
operator|=
name|w
expr_stmt|;
name|clause
operator|.
name|type
operator|=
name|FLWORClause
operator|.
name|ClauseType
operator|.
name|WHERE
expr_stmt|;
name|clause
operator|.
name|inputSequence
operator|=
name|whereExpr
expr_stmt|;
name|clauses
operator|.
name|add
argument_list|(
name|clause
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t194
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
default|default:
block|{
if|if
condition|(
name|_cnt195
operator|>=
literal|1
condition|)
block|{
break|break
name|_loop195
break|;
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_cnt195
operator|++
expr_stmt|;
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
operator|(
name|PathExpr
operator|)
name|action
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
for|for
control|(
name|int
name|i
init|=
name|clauses
operator|.
name|size
argument_list|()
operator|-
literal|1
init|;
name|i
operator|>=
literal|0
condition|;
name|i
operator|--
control|)
block|{
name|ForLetClause
name|clause
init|=
operator|(
name|ForLetClause
operator|)
name|clauses
operator|.
name|get
argument_list|(
name|i
argument_list|)
decl_stmt|;
name|FLWORClause
name|expr
decl_stmt|;
switch|switch
condition|(
name|clause
operator|.
name|type
condition|)
block|{
case|case
name|LET
case|:
name|expr
operator|=
operator|new
name|LetExpr
argument_list|(
name|context
argument_list|)
expr_stmt|;
break|break;
case|case
name|GROUPBY
case|:
name|expr
operator|=
operator|new
name|GroupByClause
argument_list|(
name|context
argument_list|)
expr_stmt|;
break|break;
case|case
name|ORDERBY
case|:
name|expr
operator|=
operator|new
name|OrderByClause
argument_list|(
name|context
argument_list|,
name|clause
operator|.
name|orderSpecs
argument_list|)
expr_stmt|;
break|break;
case|case
name|WHERE
case|:
name|expr
operator|=
operator|new
name|WhereClause
argument_list|(
name|context
argument_list|,
operator|new
name|DebuggableExpression
argument_list|(
name|clause
operator|.
name|inputSequence
argument_list|)
argument_list|)
expr_stmt|;
break|break;
default|default:
name|expr
operator|=
operator|new
name|ForExpr
argument_list|(
name|context
argument_list|,
name|clause
operator|.
name|allowEmpty
argument_list|)
expr_stmt|;
break|break;
block|}
name|expr
operator|.
name|setASTNode
argument_list|(
name|clause
operator|.
name|ast
argument_list|)
expr_stmt|;
if|if
condition|(
name|clause
operator|.
name|type
operator|==
name|FLWORClause
operator|.
name|ClauseType
operator|.
name|FOR
operator|||
name|clause
operator|.
name|type
operator|==
name|FLWORClause
operator|.
name|ClauseType
operator|.
name|LET
condition|)
block|{
specifier|final
name|BindingExpression
name|bind
init|=
operator|(
name|BindingExpression
operator|)
name|expr
decl_stmt|;
name|bind
operator|.
name|setVariable
argument_list|(
name|clause
operator|.
name|varName
argument_list|)
expr_stmt|;
name|bind
operator|.
name|setSequenceType
argument_list|(
name|clause
operator|.
name|sequenceType
argument_list|)
expr_stmt|;
name|bind
operator|.
name|setInputSequence
argument_list|(
name|clause
operator|.
name|inputSequence
argument_list|)
expr_stmt|;
if|if
condition|(
name|clause
operator|.
name|type
operator|==
name|FLWORClause
operator|.
name|ClauseType
operator|.
name|FOR
condition|)
block|{
operator|(
operator|(
name|ForExpr
operator|)
name|bind
operator|)
operator|.
name|setPositionalVariable
argument_list|(
name|clause
operator|.
name|posVar
argument_list|)
expr_stmt|;
block|}
block|}
if|else if
condition|(
name|clause
operator|.
name|type
operator|==
name|FLWORClause
operator|.
name|ClauseType
operator|.
name|GROUPBY
condition|)
block|{
if|if
condition|(
name|clause
operator|.
name|groupSpecs
operator|!=
literal|null
condition|)
block|{
name|GroupSpec
name|specs
index|[]
init|=
operator|new
name|GroupSpec
index|[
name|clause
operator|.
name|groupSpecs
operator|.
name|size
argument_list|()
index|]
decl_stmt|;
name|int
name|k
init|=
literal|0
decl_stmt|;
for|for
control|(
name|GroupSpec
name|groupSpec
range|:
name|clause
operator|.
name|groupSpecs
control|)
block|{
name|specs
index|[
name|k
operator|++
index|]
operator|=
name|groupSpec
expr_stmt|;
block|}
operator|(
operator|(
name|GroupByClause
operator|)
name|expr
operator|)
operator|.
name|setGroupSpecs
argument_list|(
name|specs
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
operator|!
operator|(
name|action
operator|instanceof
name|FLWORClause
operator|)
condition|)
name|expr
operator|.
name|setReturnExpression
argument_list|(
operator|new
name|DebuggableExpression
argument_list|(
name|action
argument_list|)
argument_list|)
expr_stmt|;
else|else
block|{
name|expr
operator|.
name|setReturnExpression
argument_list|(
name|action
argument_list|)
expr_stmt|;
operator|(
operator|(
name|FLWORClause
operator|)
name|action
operator|)
operator|.
name|setPreviousClause
argument_list|(
name|expr
argument_list|)
expr_stmt|;
block|}
name|action
operator|=
name|expr
expr_stmt|;
block|}
name|path
operator|.
name|add
argument_list|(
name|action
argument_list|)
expr_stmt|;
name|step
operator|=
name|action
expr_stmt|;
name|_t
operator|=
name|__t164
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_instance
case|:
block|{
name|AST
name|__t196
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp18_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_instance
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|expr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|SequenceType
name|type
init|=
operator|new
name|SequenceType
argument_list|()
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|expr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|sequenceType
argument_list|(
name|_t
argument_list|,
name|type
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
operator|new
name|InstanceOfExpression
argument_list|(
name|context
argument_list|,
name|expr
argument_list|,
name|type
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t196
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_treat
case|:
block|{
name|AST
name|__t197
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp19_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_treat
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|expr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|SequenceType
name|type
init|=
operator|new
name|SequenceType
argument_list|()
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|expr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|sequenceType
argument_list|(
name|_t
argument_list|,
name|type
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
operator|new
name|TreatAsExpression
argument_list|(
name|context
argument_list|,
name|expr
argument_list|,
name|type
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t197
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_switch
case|:
block|{
name|AST
name|__t198
init|=
name|_t
decl_stmt|;
name|switchAST
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_switch
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|operand
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|operand
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|SwitchExpression
name|switchExpr
init|=
operator|new
name|SwitchExpression
argument_list|(
name|context
argument_list|,
name|operand
argument_list|)
decl_stmt|;
name|switchExpr
operator|.
name|setASTNode
argument_list|(
name|switchAST
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|switchExpr
argument_list|)
expr_stmt|;
block|{
name|int
name|_cnt204
init|=
literal|0
decl_stmt|;
name|_loop204
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|LITERAL_case
operator|)
condition|)
block|{
name|List
name|caseOperands
init|=
operator|new
name|ArrayList
argument_list|<
name|Expression
argument_list|>
argument_list|(
literal|2
argument_list|)
decl_stmt|;
name|PathExpr
name|returnExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
block|{
block|{
name|int
name|_cnt202
init|=
literal|0
decl_stmt|;
name|_loop202
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|LITERAL_case
operator|)
condition|)
block|{
name|PathExpr
name|caseOperand
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp20_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_case
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|expr
argument_list|(
name|_t
argument_list|,
name|caseOperand
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|caseOperands
operator|.
name|add
argument_list|(
name|caseOperand
argument_list|)
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|_cnt202
operator|>=
literal|1
condition|)
block|{
break|break
name|_loop202
break|;
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_cnt202
operator|++
expr_stmt|;
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|AST
name|__t203
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp21_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_return
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|returnExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|switchExpr
operator|.
name|addCase
argument_list|(
name|caseOperands
argument_list|,
name|returnExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t203
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|_cnt204
operator|>=
literal|1
condition|)
block|{
break|break
name|_loop204
break|;
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_cnt204
operator|++
expr_stmt|;
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp22_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_default
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|PathExpr
name|returnExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|returnExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|switchExpr
operator|.
name|setDefault
argument_list|(
name|returnExpr
argument_list|)
expr_stmt|;
block|}
name|step
operator|=
name|switchExpr
expr_stmt|;
name|_t
operator|=
name|__t198
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_typeswitch
case|:
block|{
name|AST
name|__t206
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp23_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_typeswitch
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|operand
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|operand
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|TypeswitchExpression
name|tswitch
init|=
operator|new
name|TypeswitchExpression
argument_list|(
name|context
argument_list|,
name|operand
argument_list|)
decl_stmt|;
name|path
operator|.
name|add
argument_list|(
name|tswitch
argument_list|)
expr_stmt|;
block|{
name|int
name|_cnt213
init|=
literal|0
decl_stmt|;
name|_loop213
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|LITERAL_case
operator|)
condition|)
block|{
name|PathExpr
name|returnExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|QName
name|qn
init|=
literal|null
decl_stmt|;
name|List
argument_list|<
name|SequenceType
argument_list|>
name|types
init|=
operator|new
name|ArrayList
argument_list|<
name|SequenceType
argument_list|>
argument_list|(
literal|2
argument_list|)
decl_stmt|;
name|SequenceType
name|type
init|=
operator|new
name|SequenceType
argument_list|()
decl_stmt|;
name|AST
name|__t208
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp24_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_case
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|VARIABLE_BINDING
case|:
block|{
name|var
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|VARIABLE_BINDING
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|qn
operator|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|var
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|var
operator|.
name|getLine
argument_list|()
argument_list|,
name|var
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|var
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
break|break;
block|}
case|case
name|FUNCTION_TEST
case|:
case|case
name|MAP_TEST
case|:
case|case
name|ARRAY_TEST
case|:
case|case
name|ATOMIC_TYPE
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|LITERAL_item
case|:
case|case
name|LITERAL_element
case|:
case|case
name|LITERAL_empty
case|:
case|case
literal|115
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
block|{
name|int
name|_cnt211
init|=
literal|0
decl_stmt|;
name|_loop211
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_1
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|sequenceType
argument_list|(
name|_t
argument_list|,
name|type
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|types
operator|.
name|add
argument_list|(
name|type
argument_list|)
expr_stmt|;
name|type
operator|=
operator|new
name|SequenceType
argument_list|()
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|_cnt211
operator|>=
literal|1
condition|)
block|{
break|break
name|_loop211
break|;
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_cnt211
operator|++
expr_stmt|;
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|AST
name|__t212
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp25_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_return
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|returnExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|SequenceType
index|[]
name|atype
init|=
operator|new
name|SequenceType
index|[
name|types
operator|.
name|size
argument_list|()
index|]
decl_stmt|;
name|atype
operator|=
name|types
operator|.
name|toArray
argument_list|(
name|atype
argument_list|)
expr_stmt|;
name|tswitch
operator|.
name|addCase
argument_list|(
name|atype
argument_list|,
name|qn
argument_list|,
name|returnExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t212
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_t
operator|=
name|__t208
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|_cnt213
operator|>=
literal|1
condition|)
block|{
break|break
name|_loop213
break|;
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_cnt213
operator|++
expr_stmt|;
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp26_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_default
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|PathExpr
name|returnExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|QName
name|qn
init|=
literal|null
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|VARIABLE_BINDING
case|:
block|{
name|dvar
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|VARIABLE_BINDING
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|qn
operator|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|dvar
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|dvar
operator|.
name|getLine
argument_list|()
argument_list|,
name|dvar
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|dvar
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
break|break;
block|}
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|returnExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|tswitch
operator|.
name|setDefault
argument_list|(
name|qn
argument_list|,
name|returnExpr
argument_list|)
expr_stmt|;
block|}
name|step
operator|=
name|tswitch
expr_stmt|;
name|_t
operator|=
name|__t206
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_or
case|:
block|{
name|AST
name|__t216
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp27_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_or
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|left
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|PathExpr
name|right
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t216
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|OpOr
name|or
init|=
operator|new
name|OpOr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|or
operator|.
name|addPath
argument_list|(
name|left
argument_list|)
expr_stmt|;
name|or
operator|.
name|addPath
argument_list|(
name|right
argument_list|)
expr_stmt|;
name|path
operator|.
name|addPath
argument_list|(
name|or
argument_list|)
expr_stmt|;
name|step
operator|=
name|or
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_and
case|:
block|{
name|AST
name|__t217
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp28_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_and
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|left
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|PathExpr
name|right
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t217
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|OpAnd
name|and
init|=
operator|new
name|OpAnd
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|and
operator|.
name|addPath
argument_list|(
name|left
argument_list|)
expr_stmt|;
name|and
operator|.
name|addPath
argument_list|(
name|right
argument_list|)
expr_stmt|;
name|path
operator|.
name|addPath
argument_list|(
name|and
argument_list|)
expr_stmt|;
name|step
operator|=
name|and
expr_stmt|;
break|break;
block|}
case|case
name|UNION
case|:
block|{
name|AST
name|__t218
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp29_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|UNION
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|left
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|PathExpr
name|right
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t218
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|Union
name|union
init|=
operator|new
name|Union
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|)
decl_stmt|;
name|path
operator|.
name|add
argument_list|(
name|union
argument_list|)
expr_stmt|;
name|step
operator|=
name|union
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_intersect
case|:
block|{
name|AST
name|__t219
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp30_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_intersect
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|left
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|PathExpr
name|right
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t219
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|Intersect
name|intersect
init|=
operator|new
name|Intersect
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|)
decl_stmt|;
name|path
operator|.
name|add
argument_list|(
name|intersect
argument_list|)
expr_stmt|;
name|step
operator|=
name|intersect
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_except
case|:
block|{
name|AST
name|__t220
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp31_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_except
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|left
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|PathExpr
name|right
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t220
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|Except
name|intersect
init|=
operator|new
name|Except
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|)
decl_stmt|;
name|path
operator|.
name|add
argument_list|(
name|intersect
argument_list|)
expr_stmt|;
name|step
operator|=
name|intersect
expr_stmt|;
break|break;
block|}
case|case
name|ABSOLUTE_SLASH
case|:
block|{
name|AST
name|__t221
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp32_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|ABSOLUTE_SLASH
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|RootNode
name|root
init|=
operator|new
name|RootNode
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|path
operator|.
name|add
argument_list|(
name|root
argument_list|)
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t221
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|ABSOLUTE_DSLASH
case|:
block|{
name|AST
name|__t223
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp33_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|ABSOLUTE_DSLASH
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|RootNode
name|root
init|=
operator|new
name|RootNode
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|path
operator|.
name|add
argument_list|(
name|root
argument_list|)
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
if|if
condition|(
name|step
operator|instanceof
name|LocationStep
condition|)
block|{
name|LocationStep
name|s
init|=
operator|(
name|LocationStep
operator|)
name|step
decl_stmt|;
if|if
condition|(
name|s
operator|.
name|getAxis
argument_list|()
operator|==
name|Constants
operator|.
name|ATTRIBUTE_AXIS
operator|||
operator|(
name|s
operator|.
name|getTest
argument_list|()
operator|.
name|getType
argument_list|()
operator|==
name|Type
operator|.
name|ATTRIBUTE
operator|&&
name|s
operator|.
name|getAxis
argument_list|()
operator|==
name|Constants
operator|.
name|CHILD_AXIS
operator|)
condition|)
comment|// combines descendant-or-self::node()/attribute:*
name|s
operator|.
name|setAxis
argument_list|(
name|Constants
operator|.
name|DESCENDANT_ATTRIBUTE_AXIS
argument_list|)
expr_stmt|;
else|else
block|{
name|s
operator|.
name|setAxis
argument_list|(
name|Constants
operator|.
name|DESCENDANT_SELF_AXIS
argument_list|)
expr_stmt|;
name|s
operator|.
name|setAbbreviated
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
block|}
else|else
name|step
operator|.
name|setPrimaryAxis
argument_list|(
name|Constants
operator|.
name|DESCENDANT_SELF_AXIS
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t223
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_to
case|:
block|{
name|AST
name|__t225
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp34_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_to
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|start
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|PathExpr
name|end
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|List
name|args
init|=
operator|new
name|ArrayList
argument_list|(
literal|2
argument_list|)
decl_stmt|;
name|args
operator|.
name|add
argument_list|(
name|start
argument_list|)
expr_stmt|;
name|args
operator|.
name|add
argument_list|(
name|end
argument_list|)
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|start
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|end
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|RangeExpression
name|range
init|=
operator|new
name|RangeExpression
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|range
operator|.
name|setArguments
argument_list|(
name|args
argument_list|)
expr_stmt|;
name|path
operator|.
name|addPath
argument_list|(
name|range
argument_list|)
expr_stmt|;
name|step
operator|=
name|range
expr_stmt|;
name|_t
operator|=
name|__t225
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|GTEQ
case|:
case|case
name|EQ
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
block|{
name|step
operator|=
name|generalComp
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
block|{
name|step
operator|=
name|valueComp
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_is
case|:
block|{
name|step
operator|=
name|nodeComp
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
name|PARENTHESIZED
case|:
case|case
name|FUNCTION
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LCURLY
case|:
case|case
name|HASH
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|step
operator|=
name|primaryExpr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
name|EQNAME
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|NCNAME
case|:
case|case
name|LITERAL_element
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|BANG
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|SELF
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
block|{
name|step
operator|=
name|pathExpr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
name|PRAGMA
case|:
block|{
name|step
operator|=
name|extensionExpr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
block|{
name|step
operator|=
name|numericExpr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_update
case|:
block|{
name|step
operator|=
name|updateExpr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
specifier|public
specifier|final
name|void
name|xpath
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|XPathException
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|xpath_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|context
operator|.
name|setRootExpression
argument_list|(
name|path
argument_list|)
expr_stmt|;
try|try
block|{
comment|// for error handling
name|module
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|context
operator|.
name|resolveForwardReferences
argument_list|()
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|RecognitionException
name|e
parameter_list|)
block|{
name|handleException
argument_list|(
name|e
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|EXistException
name|e
parameter_list|)
block|{
name|handleException
argument_list|(
name|e
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|PermissionDeniedException
name|e
parameter_list|)
block|{
name|handleException
argument_list|(
name|e
argument_list|)
expr_stmt|;
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
block|}
specifier|public
specifier|final
name|void
name|module
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|module_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|v
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|enc
init|=
literal|null
decl_stmt|;
name|Expression
name|step
init|=
literal|null
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|VERSION_DECL
case|:
block|{
name|AST
name|__t7
init|=
name|_t
decl_stmt|;
name|v
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|VERSION_DECL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
specifier|final
name|String
name|version
init|=
name|v
operator|.
name|getText
argument_list|()
decl_stmt|;
if|if
condition|(
name|version
operator|.
name|equals
argument_list|(
literal|"3.1"
argument_list|)
condition|)
block|{
name|context
operator|.
name|setXQueryVersion
argument_list|(
literal|31
argument_list|)
expr_stmt|;
block|}
if|else if
condition|(
name|version
operator|.
name|equals
argument_list|(
literal|"3.0"
argument_list|)
condition|)
block|{
name|context
operator|.
name|setXQueryVersion
argument_list|(
literal|30
argument_list|)
expr_stmt|;
block|}
if|else if
condition|(
name|version
operator|.
name|equals
argument_list|(
literal|"1.0"
argument_list|)
condition|)
block|{
name|context
operator|.
name|setXQueryVersion
argument_list|(
literal|10
argument_list|)
expr_stmt|;
block|}
else|else
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|v
argument_list|,
literal|"err:XQST0031: Wrong XQuery version: require 1.0, 3.0 or 3.1"
argument_list|)
throw|;
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|STRING_LITERAL
case|:
block|{
name|enc
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
if|if
condition|(
name|enc
operator|!=
literal|null
condition|)
block|{
if|if
condition|(
operator|!
name|XMLChar
operator|.
name|isValidIANAEncoding
argument_list|(
name|enc
operator|.
name|getText
argument_list|()
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|enc
argument_list|,
literal|"err:XQST0087: Unknown or wrong encoding not adhering to required XML 1.0 EncName."
argument_list|)
throw|;
block|}
if|if
condition|(
operator|!
name|enc
operator|.
name|getText
argument_list|()
operator|.
name|equals
argument_list|(
literal|"UTF-8"
argument_list|)
condition|)
block|{
comment|//util.serializer.encodings.CharacterSet
comment|//context.setEncoding(enc.getText());
block|}
block|}
name|_t
operator|=
name|__t7
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|NAMESPACE_DECL
case|:
case|case
name|DEF_NAMESPACE_DECL
case|:
case|case
name|DEF_COLLATION_DECL
case|:
case|case
name|DEF_FUNCTION_NS_DECL
case|:
case|case
name|CONTEXT_ITEM_DECL
case|:
case|case
name|GLOBAL_VAR
case|:
case|case
name|FUNCTION_DECL
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|OPTION
case|:
case|case
name|MODULE_DECL
case|:
case|case
name|MODULE_IMPORT
case|:
case|case
name|SCHEMA_IMPORT
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
literal|79
case|:
case|case
name|LITERAL_ordering
case|:
case|case
name|LITERAL_construction
case|:
case|case
literal|82
case|:
case|case
literal|83
case|:
case|case
name|LITERAL_element
case|:
case|case
name|LITERAL_order
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|MODULE_DECL
case|:
block|{
name|libraryModule
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|NAMESPACE_DECL
case|:
case|case
name|DEF_NAMESPACE_DECL
case|:
case|case
name|DEF_COLLATION_DECL
case|:
case|case
name|DEF_FUNCTION_NS_DECL
case|:
case|case
name|CONTEXT_ITEM_DECL
case|:
case|case
name|GLOBAL_VAR
case|:
case|case
name|FUNCTION_DECL
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|OPTION
case|:
case|case
name|MODULE_IMPORT
case|:
case|case
name|SCHEMA_IMPORT
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
literal|79
case|:
case|case
name|LITERAL_ordering
case|:
case|case
name|LITERAL_construction
case|:
case|case
literal|82
case|:
case|case
literal|83
case|:
case|case
name|LITERAL_element
case|:
case|case
name|LITERAL_order
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|mainModule
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
block|}
specifier|public
specifier|final
name|void
name|libraryModule
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|libraryModule_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|m
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|uri
init|=
literal|null
decl_stmt|;
name|Expression
name|step
init|=
literal|null
decl_stmt|;
name|AST
name|__t11
init|=
name|_t
decl_stmt|;
name|m
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|MODULE_DECL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|uri
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
if|if
condition|(
name|myModule
operator|==
literal|null
condition|)
name|myModule
operator|=
operator|new
name|ExternalModuleImpl
argument_list|(
name|uri
operator|.
name|getText
argument_list|()
argument_list|,
name|m
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
else|else
block|{
name|myModule
operator|.
name|setNamespace
argument_list|(
name|m
operator|.
name|getText
argument_list|()
argument_list|,
name|uri
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|myModule
operator|.
name|getContext
argument_list|()
operator|!=
literal|null
condition|)
operator|(
operator|(
name|ModuleContext
operator|)
name|myModule
operator|.
name|getContext
argument_list|()
operator|)
operator|.
name|setModuleNamespace
argument_list|(
name|m
operator|.
name|getText
argument_list|()
argument_list|,
name|uri
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|myModule
operator|.
name|setDescription
argument_list|(
name|m
operator|.
name|getDoc
argument_list|()
argument_list|)
expr_stmt|;
name|context
operator|.
name|declareNamespace
argument_list|(
name|m
operator|.
name|getText
argument_list|()
argument_list|,
name|uri
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|staticContext
operator|.
name|declareNamespace
argument_list|(
name|m
operator|.
name|getText
argument_list|()
argument_list|,
name|uri
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t11
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|prolog
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_retTree
operator|=
name|_t
expr_stmt|;
block|}
specifier|public
specifier|final
name|void
name|mainModule
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|mainModule_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|Expression
name|step
init|=
literal|null
decl_stmt|;
name|prolog
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_retTree
operator|=
name|_t
expr_stmt|;
block|}
comment|/**  * Process the XQuery prolog.  */
specifier|public
specifier|final
name|void
name|prolog
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|prolog_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|prefix
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|uri
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|base
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|defu
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|deff
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|defc
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|qname
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|e
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|ext
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|qname2
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|content
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|c
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|cidExpr
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|cidExtDefExpr
init|=
literal|null
decl_stmt|;
name|Expression
name|step
init|=
literal|null
decl_stmt|;
name|boolean
name|boundaryspace
init|=
literal|false
decl_stmt|;
name|boolean
name|defaultcollation
init|=
literal|false
decl_stmt|;
name|boolean
name|orderempty
init|=
literal|false
decl_stmt|;
name|boolean
name|copynamespaces
init|=
literal|false
decl_stmt|;
name|boolean
name|baseuri
init|=
literal|false
decl_stmt|;
name|boolean
name|ordering
init|=
literal|false
decl_stmt|;
name|boolean
name|construction
init|=
literal|false
decl_stmt|;
block|{
name|_loop43
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|NAMESPACE_DECL
case|:
block|{
name|AST
name|__t15
init|=
name|_t
decl_stmt|;
name|prefix
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|NAMESPACE_DECL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|uri
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
if|if
condition|(
name|declaredNamespaces
operator|.
name|get
argument_list|(
name|prefix
operator|.
name|getText
argument_list|()
argument_list|)
operator|!=
literal|null
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
name|prefix
argument_list|,
literal|"err:XQST0033: Prolog contains "
operator|+
literal|"multiple declarations for namespace prefix: "
operator|+
name|prefix
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
name|context
operator|.
name|declareNamespace
argument_list|(
name|prefix
operator|.
name|getText
argument_list|()
argument_list|,
name|uri
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|staticContext
operator|.
name|declareNamespace
argument_list|(
name|prefix
operator|.
name|getText
argument_list|()
argument_list|,
name|uri
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|declaredNamespaces
operator|.
name|put
argument_list|(
name|prefix
operator|.
name|getText
argument_list|()
argument_list|,
name|uri
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t15
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
literal|79
case|:
block|{
name|AST
name|__t16
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp35_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|79
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_preserve
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp36_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_preserve
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
if|if
condition|(
name|boundaryspace
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
literal|"err:XQST0068: Boundary-space already declared."
argument_list|)
throw|;
name|boundaryspace
operator|=
literal|true
expr_stmt|;
name|context
operator|.
name|setStripWhitespace
argument_list|(
literal|false
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_strip
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp37_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_strip
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
if|if
condition|(
name|boundaryspace
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
literal|"err:XQST0068: Boundary-space already declared."
argument_list|)
throw|;
name|boundaryspace
operator|=
literal|true
expr_stmt|;
name|context
operator|.
name|setStripWhitespace
argument_list|(
literal|true
argument_list|)
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t16
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_order
case|:
block|{
name|AST
name|__t18
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp38_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_order
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_greatest
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp39_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_greatest
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|context
operator|.
name|setOrderEmptyGreatest
argument_list|(
literal|true
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_least
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp40_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_least
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|context
operator|.
name|setOrderEmptyGreatest
argument_list|(
literal|false
argument_list|)
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
if|if
condition|(
name|orderempty
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
literal|"err:XQST0065: Ordering mode already declared."
argument_list|)
throw|;
name|orderempty
operator|=
literal|true
expr_stmt|;
name|_t
operator|=
name|__t18
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
literal|83
case|:
block|{
try|try
block|{
comment|// for error handling
name|AST
name|__t20
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp41_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|83
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_preserve
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp42_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_preserve
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|staticContext
operator|.
name|setPreserveNamespaces
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|context
operator|.
name|setPreserveNamespaces
argument_list|(
literal|true
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
literal|103
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp43_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|103
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|staticContext
operator|.
name|setPreserveNamespaces
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|context
operator|.
name|setPreserveNamespaces
argument_list|(
literal|false
argument_list|)
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_inherit
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp44_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_inherit
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|staticContext
operator|.
name|setInheritNamespaces
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|context
operator|.
name|setInheritNamespaces
argument_list|(
literal|true
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
literal|105
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp45_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|105
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|staticContext
operator|.
name|setInheritNamespaces
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|context
operator|.
name|setInheritNamespaces
argument_list|(
literal|false
argument_list|)
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
if|if
condition|(
name|copynamespaces
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
literal|"err:XQST0055: Copy-namespaces mode already declared."
argument_list|)
throw|;
name|copynamespaces
operator|=
literal|true
expr_stmt|;
name|_t
operator|=
name|__t20
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|RecognitionException
name|se
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
literal|"err:XPST0003: XQuery syntax error."
argument_list|)
throw|;
block|}
break|break;
block|}
case|case
literal|82
case|:
block|{
name|AST
name|__t23
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp46_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|82
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|base
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|context
operator|.
name|setBaseURI
argument_list|(
operator|new
name|AnyURIValue
argument_list|(
name|StringValue
operator|.
name|expand
argument_list|(
name|base
operator|.
name|getText
argument_list|()
argument_list|)
argument_list|)
argument_list|,
literal|true
argument_list|)
expr_stmt|;
if|if
condition|(
name|baseuri
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
name|base
argument_list|,
literal|"err:XQST0032: Base URI is already declared."
argument_list|)
throw|;
name|baseuri
operator|=
literal|true
expr_stmt|;
name|_t
operator|=
name|__t23
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_ordering
case|:
block|{
name|AST
name|__t24
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp47_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_ordering
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_ordered
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp48_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_ordered
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_unordered
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp49_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_unordered
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
comment|// ignored
if|if
condition|(
name|ordering
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
literal|"err:XQST0065: Ordering already declared."
argument_list|)
throw|;
name|ordering
operator|=
literal|true
expr_stmt|;
name|_t
operator|=
name|__t24
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_construction
case|:
block|{
name|AST
name|__t26
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp50_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_construction
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_preserve
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp51_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_preserve
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_strip
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp52_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_strip
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
comment|// ignored
if|if
condition|(
name|construction
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
literal|"err:XQST0069: Construction already declared."
argument_list|)
throw|;
name|construction
operator|=
literal|true
expr_stmt|;
name|_t
operator|=
name|__t26
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|DEF_NAMESPACE_DECL
case|:
block|{
name|AST
name|__t28
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp53_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|DEF_NAMESPACE_DECL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|defu
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
comment|// Use setDefaultElementNamespace()
name|context
operator|.
name|declareNamespace
argument_list|(
literal|""
argument_list|,
name|defu
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|staticContext
operator|.
name|declareNamespace
argument_list|(
literal|""
argument_list|,
name|defu
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t28
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|DEF_FUNCTION_NS_DECL
case|:
block|{
name|AST
name|__t29
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp54_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|DEF_FUNCTION_NS_DECL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|deff
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|context
operator|.
name|setDefaultFunctionNamespace
argument_list|(
name|deff
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|staticContext
operator|.
name|setDefaultFunctionNamespace
argument_list|(
name|deff
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t29
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|DEF_COLLATION_DECL
case|:
block|{
name|AST
name|__t30
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp55_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|DEF_COLLATION_DECL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|defc
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
if|if
condition|(
name|defaultcollation
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
literal|"err:XQST0038: Default collation already declared."
argument_list|)
throw|;
name|defaultcollation
operator|=
literal|true
expr_stmt|;
try|try
block|{
name|context
operator|.
name|setDefaultCollation
argument_list|(
name|defc
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|XPathException
name|xp
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|defc
argument_list|,
literal|"err:XQST0038: the value specified by a default collation declaration is not present in statically known collations."
argument_list|)
throw|;
block|}
name|_t
operator|=
name|__t30
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|GLOBAL_VAR
case|:
block|{
name|AST
name|__t31
init|=
name|_t
decl_stmt|;
name|qname
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|GLOBAL_VAR
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|enclosed
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|SequenceType
name|type
init|=
literal|null
decl_stmt|;
specifier|final
name|QName
name|qn
decl_stmt|;
try|try
block|{
name|qn
operator|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|qname
operator|.
name|getText
argument_list|()
argument_list|,
literal|null
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|qname
operator|.
name|getLine
argument_list|()
argument_list|,
name|qname
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|qname
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
if|if
condition|(
name|declaredGlobalVars
operator|.
name|contains
argument_list|(
name|qn
argument_list|)
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
name|qname
argument_list|,
literal|"err:XQST0049: It is a "
operator|+
literal|"static error if more than one variable declared or "
operator|+
literal|"imported by a module has the same expanded QName. "
operator|+
literal|"Variable: "
operator|+
name|qn
operator|.
name|toString
argument_list|()
argument_list|)
throw|;
name|declaredGlobalVars
operator|.
name|add
argument_list|(
name|qn
argument_list|)
expr_stmt|;
name|List
name|annots
init|=
operator|new
name|ArrayList
argument_list|()
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_2
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|annotations
argument_list|(
name|_t
argument_list|,
name|annots
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|}
if|else if
condition|(
operator|(
name|_tokenSet_3
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_as
case|:
block|{
name|AST
name|__t34
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp56_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_as
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|type
operator|=
operator|new
name|SequenceType
argument_list|()
expr_stmt|;
name|sequenceType
argument_list|(
name|_t
argument_list|,
name|type
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t34
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LITERAL_external
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|e
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|enclosed
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
specifier|final
name|VariableDeclaration
name|decl
init|=
operator|new
name|VariableDeclaration
argument_list|(
name|context
argument_list|,
name|qn
argument_list|,
name|enclosed
argument_list|)
decl_stmt|;
name|decl
operator|.
name|setSequenceType
argument_list|(
name|type
argument_list|)
expr_stmt|;
name|decl
operator|.
name|setASTNode
argument_list|(
name|e
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|decl
argument_list|)
expr_stmt|;
if|if
condition|(
name|myModule
operator|!=
literal|null
condition|)
block|{
name|myModule
operator|.
name|declareVariable
argument_list|(
name|qn
argument_list|,
name|decl
argument_list|)
expr_stmt|;
block|}
break|break;
block|}
case|case
name|LITERAL_external
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp57_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_external
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|PathExpr
name|defaultValue
init|=
literal|null
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|defaultValue
operator|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
expr_stmt|;
name|ext
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|defaultValue
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
comment|// variable may be declared in static context: retrieve and set its sequence type
name|Variable
name|external
init|=
literal|null
decl_stmt|;
try|try
block|{
name|external
operator|=
name|context
operator|.
name|resolveVariable
argument_list|(
name|qname
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|external
operator|!=
literal|null
condition|)
block|{
name|external
operator|.
name|setSequenceType
argument_list|(
name|type
argument_list|)
expr_stmt|;
block|}
block|}
catch|catch
parameter_list|(
name|XPathException
name|ignoredException
parameter_list|)
block|{
block|}
specifier|final
name|VariableDeclaration
name|decl
init|=
operator|new
name|VariableDeclaration
argument_list|(
name|context
argument_list|,
name|qn
argument_list|,
name|defaultValue
argument_list|)
decl_stmt|;
name|decl
operator|.
name|setSequenceType
argument_list|(
name|type
argument_list|)
expr_stmt|;
name|decl
operator|.
name|setASTNode
argument_list|(
name|ext
argument_list|)
expr_stmt|;
if|if
condition|(
name|external
operator|==
literal|null
condition|)
block|{
name|path
operator|.
name|add
argument_list|(
name|decl
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|myModule
operator|!=
literal|null
condition|)
block|{
name|myModule
operator|.
name|declareVariable
argument_list|(
name|qn
argument_list|,
name|decl
argument_list|)
expr_stmt|;
block|}
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t31
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|OPTION
case|:
block|{
name|AST
name|__t37
init|=
name|_t
decl_stmt|;
name|qname2
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|OPTION
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|content
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|context
operator|.
name|addOption
argument_list|(
name|qname2
operator|.
name|getText
argument_list|()
argument_list|,
name|content
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|XPathException
name|e2
parameter_list|)
block|{
name|e2
operator|.
name|setLocation
argument_list|(
name|qname2
operator|.
name|getLine
argument_list|()
argument_list|,
name|qname2
operator|.
name|getColumn
argument_list|()
argument_list|)
expr_stmt|;
throw|throw
name|e2
throw|;
block|}
name|_t
operator|=
name|__t37
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|CONTEXT_ITEM_DECL
case|:
block|{
name|AST
name|__t38
init|=
name|_t
decl_stmt|;
name|c
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|CONTEXT_ITEM_DECL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|enclosed
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|SequenceType
name|type
init|=
literal|null
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_as
case|:
block|{
name|AST
name|__t40
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp58_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_as
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|type
operator|=
operator|new
name|SequenceType
argument_list|()
expr_stmt|;
name|sequenceType
argument_list|(
name|_t
argument_list|,
name|type
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t40
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LITERAL_external
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|cidExpr
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|enclosed
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
specifier|final
name|ContextItemDeclaration
name|cid
init|=
operator|new
name|ContextItemDeclaration
argument_list|(
name|context
argument_list|,
name|type
argument_list|,
literal|false
argument_list|,
name|enclosed
argument_list|)
decl_stmt|;
name|cid
operator|.
name|setASTNode
argument_list|(
name|cidExpr
argument_list|)
expr_stmt|;
comment|//path.add(cid);
name|staticContext
operator|.
name|setContextItemDeclaration
argument_list|(
name|cid
argument_list|)
expr_stmt|;
name|context
operator|.
name|setContextItemDeclaration
argument_list|(
name|cid
argument_list|)
expr_stmt|;
if|if
condition|(
name|myModule
operator|!=
literal|null
condition|)
block|{
if|if
condition|(
name|myModule
operator|.
name|getContext
argument_list|()
operator|!=
literal|null
condition|)
block|{
name|myModule
operator|.
name|getContext
argument_list|()
operator|.
name|setContextItemDeclaration
argument_list|(
name|cid
argument_list|)
expr_stmt|;
block|}
block|}
break|break;
block|}
case|case
name|LITERAL_external
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp59_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_external
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|PathExpr
name|defaultValue
init|=
literal|null
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|defaultValue
operator|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
expr_stmt|;
name|cidExtDefExpr
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|defaultValue
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
specifier|final
name|ContextItemDeclaration
name|cid
init|=
operator|new
name|ContextItemDeclaration
argument_list|(
name|context
argument_list|,
name|type
argument_list|,
literal|true
argument_list|,
name|defaultValue
argument_list|)
decl_stmt|;
name|cid
operator|.
name|setASTNode
argument_list|(
name|cidExtDefExpr
argument_list|)
expr_stmt|;
comment|//path.add(cid);
name|staticContext
operator|.
name|setContextItemDeclaration
argument_list|(
name|cid
argument_list|)
expr_stmt|;
name|context
operator|.
name|setContextItemDeclaration
argument_list|(
name|cid
argument_list|)
expr_stmt|;
if|if
condition|(
name|myModule
operator|!=
literal|null
condition|)
block|{
if|if
condition|(
name|myModule
operator|.
name|getContext
argument_list|()
operator|!=
literal|null
condition|)
block|{
name|myModule
operator|.
name|getContext
argument_list|()
operator|.
name|setContextItemDeclaration
argument_list|(
name|cid
argument_list|)
expr_stmt|;
block|}
block|}
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t38
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|FUNCTION_DECL
case|:
block|{
name|functionDecl
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
name|MODULE_IMPORT
case|:
case|case
name|SCHEMA_IMPORT
case|:
block|{
name|importDecl
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
default|default:
block|{
break|break
name|_loop43
break|;
block|}
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
block|}
comment|/** Parse a declared set of annotation associated to a function declaration or  * a variable declaration  * (distinction is made via one of the two parameters set to null)  */
specifier|public
specifier|final
name|void
name|annotations
parameter_list|(
name|AST
name|_t
parameter_list|,
name|List
name|annots
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|XPathException
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|annotations_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|List
name|annotList
init|=
literal|null
decl_stmt|;
block|{
name|_loop53
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|ANNOT_DECL
operator|)
condition|)
block|{
name|annotList
operator|=
operator|new
name|ArrayList
argument_list|()
expr_stmt|;
name|annotation
argument_list|(
name|_t
argument_list|,
name|annotList
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
if|if
condition|(
name|annotList
operator|.
name|size
argument_list|()
operator|!=
literal|0
condition|)
name|annots
operator|.
name|add
argument_list|(
name|annotList
argument_list|)
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop53
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
block|}
comment|/**  * A sequence type declaration.  */
specifier|public
specifier|final
name|void
name|sequenceType
parameter_list|(
name|AST
name|_t
parameter_list|,
name|SequenceType
name|type
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|XPathException
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|sequenceType_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|t
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|lelement
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|eq1
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|eq12
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|lattr
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|eq2
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|eq21
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|nc
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|sl
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|lelement2
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|dneq
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|dneq2
init|=
literal|null
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|ATOMIC_TYPE
case|:
block|{
name|AST
name|__t97
init|=
name|_t
decl_stmt|;
name|t
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|ATOMIC_TYPE
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
try|try
block|{
name|QName
name|qn
init|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|t
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|int
name|code
init|=
name|Type
operator|.
name|getType
argument_list|(
name|qn
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|Type
operator|.
name|subTypeOf
argument_list|(
name|code
argument_list|,
name|Type
operator|.
name|ATOMIC
argument_list|)
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
name|t
argument_list|,
literal|"Type "
operator|+
name|qn
operator|.
name|toString
argument_list|()
operator|+
literal|" is not an atomic type"
argument_list|)
throw|;
name|type
operator|.
name|setPrimaryType
argument_list|(
name|code
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|e
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|t
operator|.
name|getLine
argument_list|()
argument_list|,
name|t
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|t
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
name|_t
operator|=
name|__t97
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_empty
case|:
block|{
name|AST
name|__t98
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp60_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_empty
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|type
operator|.
name|setPrimaryType
argument_list|(
name|Type
operator|.
name|EMPTY
argument_list|)
expr_stmt|;
name|type
operator|.
name|setCardinality
argument_list|(
name|Cardinality
operator|.
name|EMPTY
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t98
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
literal|115
case|:
block|{
name|AST
name|__t99
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp61_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|115
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|type
operator|.
name|setPrimaryType
argument_list|(
name|Type
operator|.
name|EMPTY
argument_list|)
expr_stmt|;
name|type
operator|.
name|setCardinality
argument_list|(
name|Cardinality
operator|.
name|EMPTY
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t99
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|FUNCTION_TEST
case|:
block|{
name|AST
name|__t100
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp62_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|FUNCTION_TEST
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|type
operator|.
name|setPrimaryType
argument_list|(
name|Type
operator|.
name|FUNCTION_REFERENCE
argument_list|)
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|STAR
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp63_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STAR
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|FUNCTION_TEST
case|:
case|case
name|MAP_TEST
case|:
case|case
name|ARRAY_TEST
case|:
case|case
name|ATOMIC_TYPE
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|LITERAL_item
case|:
case|case
name|LITERAL_element
case|:
case|case
name|LITERAL_empty
case|:
case|case
name|LITERAL_as
case|:
case|case
literal|115
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
block|{
block|{
name|List
argument_list|<
name|SequenceType
argument_list|>
name|paramTypes
init|=
operator|new
name|ArrayList
argument_list|<
name|SequenceType
argument_list|>
argument_list|(
literal|5
argument_list|)
decl_stmt|;
block|{
name|_loop104
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_1
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|SequenceType
name|paramType
init|=
operator|new
name|SequenceType
argument_list|()
decl_stmt|;
name|sequenceType
argument_list|(
name|_t
argument_list|,
name|paramType
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|paramTypes
operator|.
name|add
argument_list|(
name|paramType
argument_list|)
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop104
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|SequenceType
name|returnType
init|=
operator|new
name|SequenceType
argument_list|()
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp64_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_as
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|sequenceType
argument_list|(
name|_t
argument_list|,
name|returnType
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|}
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t100
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|MAP_TEST
case|:
block|{
name|AST
name|__t105
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp65_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|MAP_TEST
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|type
operator|.
name|setPrimaryType
argument_list|(
name|Type
operator|.
name|MAP
argument_list|)
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|STAR
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp66_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STAR
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
case|case
name|FUNCTION_TEST
case|:
case|case
name|MAP_TEST
case|:
case|case
name|ARRAY_TEST
case|:
case|case
name|ATOMIC_TYPE
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|LITERAL_item
case|:
case|case
name|LITERAL_element
case|:
case|case
name|LITERAL_empty
case|:
case|case
literal|115
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
block|{
block|{
name|List
argument_list|<
name|SequenceType
argument_list|>
name|paramTypes
init|=
operator|new
name|ArrayList
argument_list|<
name|SequenceType
argument_list|>
argument_list|(
literal|5
argument_list|)
decl_stmt|;
block|{
name|_loop109
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_1
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|SequenceType
name|paramType
init|=
operator|new
name|SequenceType
argument_list|()
decl_stmt|;
name|sequenceType
argument_list|(
name|_t
argument_list|,
name|paramType
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|paramTypes
operator|.
name|add
argument_list|(
name|paramType
argument_list|)
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop109
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
block|}
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t105
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|ARRAY_TEST
case|:
block|{
name|AST
name|__t110
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp67_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|ARRAY_TEST
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|type
operator|.
name|setPrimaryType
argument_list|(
name|Type
operator|.
name|ARRAY
argument_list|)
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|STAR
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp68_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STAR
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
case|case
name|FUNCTION_TEST
case|:
case|case
name|MAP_TEST
case|:
case|case
name|ARRAY_TEST
case|:
case|case
name|ATOMIC_TYPE
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|LITERAL_item
case|:
case|case
name|LITERAL_element
case|:
case|case
name|LITERAL_empty
case|:
case|case
literal|115
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
block|{
block|{
name|List
argument_list|<
name|SequenceType
argument_list|>
name|paramTypes
init|=
operator|new
name|ArrayList
argument_list|<
name|SequenceType
argument_list|>
argument_list|(
literal|5
argument_list|)
decl_stmt|;
block|{
name|_loop114
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_1
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|SequenceType
name|paramType
init|=
operator|new
name|SequenceType
argument_list|()
decl_stmt|;
name|sequenceType
argument_list|(
name|_t
argument_list|,
name|paramType
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|paramTypes
operator|.
name|add
argument_list|(
name|paramType
argument_list|)
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop114
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
block|}
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t110
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_item
case|:
block|{
name|AST
name|__t115
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp69_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_item
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|type
operator|.
name|setPrimaryType
argument_list|(
name|Type
operator|.
name|ITEM
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t115
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_node
case|:
block|{
name|AST
name|__t116
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp70_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_node
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|type
operator|.
name|setPrimaryType
argument_list|(
name|Type
operator|.
name|NODE
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t116
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_element
case|:
block|{
name|AST
name|__t117
init|=
name|_t
decl_stmt|;
name|lelement
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_element
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|type
operator|.
name|setPrimaryType
argument_list|(
name|Type
operator|.
name|ELEMENT
argument_list|)
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|WILDCARD
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp71_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|WILDCARD
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|EQNAME
case|:
block|{
name|eq1
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|QName
name|qname
init|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|eq1
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|type
operator|.
name|setNodeName
argument_list|(
name|qname
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|eq1
operator|.
name|getLine
argument_list|()
argument_list|,
name|eq1
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|eq1
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EQNAME
case|:
block|{
name|eq12
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|QName
name|qname12
init|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|eq12
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|TypeTest
name|test
init|=
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|getType
argument_list|(
name|qname12
argument_list|)
argument_list|)
decl_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|eq12
operator|.
name|getLine
argument_list|()
argument_list|,
name|eq12
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|eq12
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t117
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|ATTRIBUTE_TEST
case|:
block|{
name|AST
name|__t120
init|=
name|_t
decl_stmt|;
name|lattr
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|ATTRIBUTE_TEST
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|type
operator|.
name|setPrimaryType
argument_list|(
name|Type
operator|.
name|ATTRIBUTE
argument_list|)
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EQNAME
case|:
block|{
name|eq2
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|QName
name|qname
init|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|eq2
operator|.
name|getText
argument_list|()
argument_list|,
name|XMLConstants
operator|.
name|DEFAULT_NS_PREFIX
argument_list|)
decl_stmt|;
name|qname
operator|=
operator|new
name|QName
argument_list|(
name|qname
argument_list|,
name|ElementValue
operator|.
name|ATTRIBUTE
argument_list|)
expr_stmt|;
name|type
operator|.
name|setNodeName
argument_list|(
name|qname
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|lattr
operator|.
name|getLine
argument_list|()
argument_list|,
name|lattr
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|eq2
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
break|break;
block|}
case|case
name|WILDCARD
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp72_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|WILDCARD
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EQNAME
case|:
block|{
name|eq21
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|QName
name|qname21
init|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|eq21
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|TypeTest
name|test
init|=
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|getType
argument_list|(
name|qname21
argument_list|)
argument_list|)
decl_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|lattr
operator|.
name|getLine
argument_list|()
argument_list|,
name|lattr
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|eq21
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t120
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_text
case|:
block|{
name|AST
name|__t123
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp73_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_text
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|type
operator|.
name|setPrimaryType
argument_list|(
name|Type
operator|.
name|TEXT
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t123
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
literal|194
case|:
block|{
name|AST
name|__t124
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp74_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|194
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|type
operator|.
name|setPrimaryType
argument_list|(
name|Type
operator|.
name|PROCESSING_INSTRUCTION
argument_list|)
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|NCNAME
case|:
block|{
name|nc
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|NCNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|STRING_LITERAL
case|:
block|{
name|sl
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|String
name|value
init|=
literal|""
decl_stmt|;
if|if
condition|(
name|nc
operator|!=
literal|null
condition|)
name|value
operator|=
name|nc
operator|.
name|getText
argument_list|()
expr_stmt|;
if|if
condition|(
name|sl
operator|!=
literal|null
condition|)
name|value
operator|=
name|sl
operator|.
name|getText
argument_list|()
expr_stmt|;
name|QName
name|qname
init|=
operator|new
name|QName
operator|.
name|WildcardNamespaceURIQName
argument_list|(
name|value
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
literal|""
operator|.
name|equals
argument_list|(
name|value
argument_list|)
condition|)
name|type
operator|.
name|setNodeName
argument_list|(
name|qname
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t124
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_comment
case|:
block|{
name|AST
name|__t126
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp75_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_comment
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|type
operator|.
name|setPrimaryType
argument_list|(
name|Type
operator|.
name|COMMENT
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t126
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
literal|193
case|:
block|{
name|AST
name|__t127
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp76_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|193
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|type
operator|.
name|setPrimaryType
argument_list|(
name|Type
operator|.
name|NAMESPACE
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t127
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
literal|195
case|:
block|{
name|AST
name|__t128
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp77_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|195
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|type
operator|.
name|setPrimaryType
argument_list|(
name|Type
operator|.
name|DOCUMENT
argument_list|)
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_element
case|:
block|{
name|AST
name|__t130
init|=
name|_t
decl_stmt|;
name|lelement2
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_element
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EQNAME
case|:
block|{
name|dneq
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|QName
name|qname
init|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|dneq
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|type
operator|.
name|setNodeName
argument_list|(
name|qname
argument_list|)
expr_stmt|;
name|NameTest
name|test
init|=
operator|new
name|NameTest
argument_list|(
name|Type
operator|.
name|DOCUMENT
argument_list|,
name|qname
argument_list|)
decl_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|lelement2
operator|.
name|getLine
argument_list|()
argument_list|,
name|lelement2
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|dneq
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
break|break;
block|}
case|case
name|WILDCARD
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp78_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|WILDCARD
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|TypeTest
name|test
init|=
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|DOCUMENT
argument_list|)
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EQNAME
case|:
block|{
name|dneq2
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|QName
name|qname
init|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|dneq2
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|test
operator|=
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|getType
argument_list|(
name|qname
argument_list|)
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|lelement2
operator|.
name|getLine
argument_list|()
argument_list|,
name|lelement2
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|dneq2
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t130
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
literal|223
case|:
block|{
name|AST
name|__t133
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp79_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|223
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp80_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_t
operator|=
name|__t133
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t128
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|STAR
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp81_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STAR
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|type
operator|.
name|setCardinality
argument_list|(
name|Cardinality
operator|.
name|ZERO_OR_MORE
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|PLUS
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp82_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|PLUS
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|type
operator|.
name|setCardinality
argument_list|(
name|Cardinality
operator|.
name|ONE_OR_MORE
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|QUESTION
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp83_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|QUESTION
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|type
operator|.
name|setCardinality
argument_list|(
name|Cardinality
operator|.
name|ZERO_OR_ONE
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
case|case
name|FUNCTION_TEST
case|:
case|case
name|MAP_TEST
case|:
case|case
name|ARRAY_TEST
case|:
case|case
name|ATOMIC_TYPE
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|LITERAL_item
case|:
case|case
name|LITERAL_element
case|:
case|case
name|LITERAL_empty
case|:
case|case
name|LITERAL_as
case|:
case|case
literal|115
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
block|}
comment|/**  * Parse a function declared in the prolog.  */
specifier|public
specifier|final
name|Expression
name|functionDecl
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|functionDecl_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|name
init|=
literal|null
decl_stmt|;
name|step
operator|=
literal|null
expr_stmt|;
name|AST
name|__t60
init|=
name|_t
decl_stmt|;
name|name
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|FUNCTION_DECL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|body
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|QName
name|qn
init|=
literal|null
decl_stmt|;
try|try
block|{
name|qn
operator|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|name
operator|.
name|getText
argument_list|()
argument_list|,
name|staticContext
operator|.
name|getDefaultFunctionNamespace
argument_list|()
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|name
operator|.
name|getLine
argument_list|()
argument_list|,
name|name
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|name
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
name|FunctionSignature
name|signature
init|=
operator|new
name|FunctionSignature
argument_list|(
name|qn
argument_list|)
decl_stmt|;
name|signature
operator|.
name|setDescription
argument_list|(
name|name
operator|.
name|getDoc
argument_list|()
argument_list|)
expr_stmt|;
name|UserDefinedFunction
name|func
init|=
operator|new
name|UserDefinedFunction
argument_list|(
name|context
argument_list|,
name|signature
argument_list|)
decl_stmt|;
name|func
operator|.
name|setASTNode
argument_list|(
name|name
argument_list|)
expr_stmt|;
name|List
name|varList
init|=
operator|new
name|ArrayList
argument_list|(
literal|3
argument_list|)
decl_stmt|;
name|List
name|annots
init|=
operator|new
name|ArrayList
argument_list|()
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_4
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|annotations
argument_list|(
name|_t
argument_list|,
name|annots
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|processAnnotations
argument_list|(
name|annots
argument_list|,
name|signature
argument_list|)
expr_stmt|;
block|}
if|else if
condition|(
operator|(
name|_tokenSet_5
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|VARIABLE_BINDING
case|:
block|{
name|paramList
argument_list|(
name|_t
argument_list|,
name|varList
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_external
case|:
case|case
name|LCURLY
case|:
case|case
name|LITERAL_as
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|processParams
argument_list|(
name|varList
argument_list|,
name|func
argument_list|,
name|signature
argument_list|)
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_as
case|:
block|{
name|AST
name|__t64
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp84_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_as
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|SequenceType
name|type
init|=
operator|new
name|SequenceType
argument_list|()
decl_stmt|;
name|sequenceType
argument_list|(
name|_t
argument_list|,
name|type
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|signature
operator|.
name|setReturnType
argument_list|(
name|type
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t64
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_external
case|:
case|case
name|LCURLY
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LCURLY
case|:
block|{
name|AST
name|__t66
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp85_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LCURLY
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|expr
argument_list|(
name|_t
argument_list|,
name|body
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|func
operator|.
name|setFunctionBody
argument_list|(
name|body
argument_list|)
expr_stmt|;
name|context
operator|.
name|declareFunction
argument_list|(
name|func
argument_list|)
expr_stmt|;
if|if
condition|(
name|myModule
operator|!=
literal|null
condition|)
name|myModule
operator|.
name|declareFunction
argument_list|(
name|func
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t66
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_external
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp86_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_external
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t60
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
specifier|public
specifier|final
name|void
name|importDecl
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|importDecl_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|i
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|pfx
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|moduleURI
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|s
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|pfx1
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|targetURI
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|MODULE_IMPORT
case|:
block|{
name|AST
name|__t45
init|=
name|_t
decl_stmt|;
name|i
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|MODULE_IMPORT
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|String
name|modulePrefix
init|=
literal|null
decl_stmt|;
name|String
name|location
init|=
literal|null
decl_stmt|;
name|List
name|uriList
init|=
operator|new
name|ArrayList
argument_list|(
literal|2
argument_list|)
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|NCNAME
case|:
block|{
name|pfx
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|NCNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|modulePrefix
operator|=
name|pfx
operator|.
name|getText
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|STRING_LITERAL
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|moduleURI
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|STRING_LITERAL
case|:
block|{
name|uriList
argument_list|(
name|_t
argument_list|,
name|uriList
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
if|if
condition|(
name|modulePrefix
operator|!=
literal|null
condition|)
block|{
if|if
condition|(
name|declaredNamespaces
operator|.
name|get
argument_list|(
name|modulePrefix
argument_list|)
operator|!=
literal|null
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
name|i
argument_list|,
literal|"err:XQST0033: Prolog contains "
operator|+
literal|"multiple declarations for namespace prefix: "
operator|+
name|modulePrefix
argument_list|)
throw|;
name|declaredNamespaces
operator|.
name|put
argument_list|(
name|modulePrefix
argument_list|,
name|moduleURI
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
block|}
try|try
block|{
if|if
condition|(
name|uriList
operator|.
name|size
argument_list|()
operator|>
literal|0
condition|)
block|{
for|for
control|(
name|Iterator
name|j
init|=
name|uriList
operator|.
name|iterator
argument_list|()
init|;
name|j
operator|.
name|hasNext
argument_list|()
condition|;
control|)
block|{
try|try
block|{
name|location
operator|=
operator|(
operator|(
name|AnyURIValue
operator|)
name|j
operator|.
name|next
argument_list|()
operator|)
operator|.
name|getStringValue
argument_list|()
expr_stmt|;
name|context
operator|.
name|importModule
argument_list|(
name|moduleURI
operator|.
name|getText
argument_list|()
argument_list|,
name|modulePrefix
argument_list|,
name|location
argument_list|)
expr_stmt|;
name|staticContext
operator|.
name|declareNamespace
argument_list|(
name|modulePrefix
argument_list|,
name|moduleURI
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|XPathException
name|xpe
parameter_list|)
block|{
if|if
condition|(
operator|!
name|j
operator|.
name|hasNext
argument_list|()
condition|)
block|{
throw|throw
name|xpe
throw|;
block|}
block|}
block|}
block|}
else|else
block|{
name|context
operator|.
name|importModule
argument_list|(
name|moduleURI
operator|.
name|getText
argument_list|()
argument_list|,
name|modulePrefix
argument_list|,
name|location
argument_list|)
expr_stmt|;
name|staticContext
operator|.
name|declareNamespace
argument_list|(
name|modulePrefix
argument_list|,
name|moduleURI
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
block|}
block|}
catch|catch
parameter_list|(
name|XPathException
name|xpe
parameter_list|)
block|{
name|xpe
operator|.
name|prependMessage
argument_list|(
literal|"error found while loading module "
operator|+
name|modulePrefix
operator|+
literal|": "
argument_list|)
expr_stmt|;
throw|throw
name|xpe
throw|;
block|}
name|_t
operator|=
name|__t45
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|SCHEMA_IMPORT
case|:
block|{
name|AST
name|__t48
init|=
name|_t
decl_stmt|;
name|s
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|SCHEMA_IMPORT
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|String
name|nsPrefix
init|=
literal|null
decl_stmt|;
name|String
name|location
init|=
literal|null
decl_stmt|;
name|boolean
name|defaultElementNS
init|=
literal|false
decl_stmt|;
name|List
name|uriList
init|=
operator|new
name|ArrayList
argument_list|(
literal|2
argument_list|)
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|NCNAME
case|:
block|{
name|pfx1
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|NCNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|nsPrefix
operator|=
name|pfx1
operator|.
name|getText
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_default
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp87_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_default
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp88_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_element
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp89_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_namespace
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|defaultElementNS
operator|=
literal|true
expr_stmt|;
break|break;
block|}
case|case
name|STRING_LITERAL
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|targetURI
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|STRING_LITERAL
case|:
block|{
name|uriList
argument_list|(
name|_t
argument_list|,
name|uriList
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
if|if
condition|(
literal|""
operator|.
name|equals
argument_list|(
name|targetURI
operator|.
name|getText
argument_list|()
argument_list|)
operator|&&
name|nsPrefix
operator|!=
literal|null
condition|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|s
argument_list|,
literal|"err:XQST0057: A schema without target namespace (zero-length string target namespace) may not bind a namespace prefix: "
operator|+
name|nsPrefix
argument_list|)
throw|;
block|}
if|if
condition|(
name|nsPrefix
operator|!=
literal|null
condition|)
block|{
if|if
condition|(
name|declaredNamespaces
operator|.
name|get
argument_list|(
name|nsPrefix
argument_list|)
operator|!=
literal|null
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
name|s
argument_list|,
literal|"err:XQST0033: Prolog contains "
operator|+
literal|"multiple declarations for namespace prefix: "
operator|+
name|nsPrefix
argument_list|)
throw|;
name|declaredNamespaces
operator|.
name|put
argument_list|(
name|nsPrefix
argument_list|,
name|targetURI
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
block|}
try|try
block|{
name|context
operator|.
name|declareNamespace
argument_list|(
name|nsPrefix
argument_list|,
name|targetURI
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
name|staticContext
operator|.
name|declareNamespace
argument_list|(
name|nsPrefix
argument_list|,
name|targetURI
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
comment|// We currently do nothing with eventual location hints. /ljo
block|}
catch|catch
parameter_list|(
name|XPathException
name|xpe
parameter_list|)
block|{
name|xpe
operator|.
name|prependMessage
argument_list|(
literal|"err:XQST0059: Error found while loading schema "
operator|+
name|nsPrefix
operator|+
literal|": "
argument_list|)
expr_stmt|;
throw|throw
name|xpe
throw|;
block|}
comment|// We ought to do this for now until Dannes can say it works. /ljo
comment|//throw new XPathException(s, "err:XQST0009: the eXist XQuery implementation does not support the Schema Import Feature quite yet.");
name|_t
operator|=
name|__t48
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
block|}
comment|/**  * Parse uris in schema and module declarations.  */
specifier|public
specifier|final
name|void
name|uriList
parameter_list|(
name|AST
name|_t
parameter_list|,
name|List
name|uris
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|XPathException
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|uriList_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|uri
argument_list|(
name|_t
argument_list|,
name|uris
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|{
name|_loop83
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|STRING_LITERAL
operator|)
condition|)
block|{
name|uri
argument_list|(
name|_t
argument_list|,
name|uris
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop83
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
block|}
specifier|public
specifier|final
name|void
name|annotation
parameter_list|(
name|AST
name|_t
parameter_list|,
name|List
name|annotList
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|XPathException
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|annotation_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|name
init|=
literal|null
decl_stmt|;
name|Expression
name|le
init|=
literal|null
decl_stmt|;
name|AST
name|__t55
init|=
name|_t
decl_stmt|;
name|name
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|ANNOT_DECL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
specifier|final
name|QName
name|qn
decl_stmt|;
try|try
block|{
name|qn
operator|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|name
operator|.
name|getText
argument_list|()
argument_list|,
name|staticContext
operator|.
name|getDefaultFunctionNamespace
argument_list|()
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|name
operator|.
name|getLine
argument_list|()
argument_list|,
name|name
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|name
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
name|String
name|ns
init|=
name|qn
operator|.
name|getNamespaceURI
argument_list|()
decl_stmt|;
if|if
condition|(
operator|!
name|annotationValid
argument_list|(
name|qn
argument_list|)
condition|)
block|{
name|XPathException
name|e
init|=
operator|new
name|XPathException
argument_list|(
name|ErrorCodes
operator|.
name|XQST0045
argument_list|,
literal|"Annotation in a reserved namespace: "
operator|+
name|qn
operator|.
name|getNamespaceURI
argument_list|()
argument_list|)
decl_stmt|;
name|e
operator|.
name|setLocation
argument_list|(
name|name
operator|.
name|getLine
argument_list|()
argument_list|,
name|name
operator|.
name|getColumn
argument_list|()
argument_list|)
expr_stmt|;
throw|throw
name|e
throw|;
block|}
name|annotList
operator|.
name|add
argument_list|(
name|qn
argument_list|)
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|STRING_LITERAL
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
block|{
name|PathExpr
name|annotPath
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|le
operator|=
name|literalExpr
argument_list|(
name|_t
argument_list|,
name|annotPath
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|annotPath
operator|.
name|add
argument_list|(
name|le
argument_list|)
expr_stmt|;
block|{
name|_loop58
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_6
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|le
operator|=
name|literalExpr
argument_list|(
name|_t
argument_list|,
name|annotPath
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|annotPath
operator|.
name|add
argument_list|(
name|le
argument_list|)
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop58
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|annotList
operator|.
name|add
argument_list|(
name|annotPath
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t55
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_retTree
operator|=
name|_t
expr_stmt|;
block|}
specifier|public
specifier|final
name|Expression
name|literalExpr
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|XPathException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|literalExpr_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|c
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|i
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|dec
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|dbl
init|=
literal|null
decl_stmt|;
name|step
operator|=
literal|null
expr_stmt|;
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|STRING_LITERAL
case|:
block|{
name|c
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|StringValue
name|val
init|=
operator|new
name|StringValue
argument_list|(
name|c
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|val
operator|.
name|expand
argument_list|()
expr_stmt|;
name|step
operator|=
operator|new
name|LiteralValue
argument_list|(
name|context
argument_list|,
name|val
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|c
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|INTEGER_LITERAL
case|:
block|{
name|i
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|INTEGER_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|step
operator|=
operator|new
name|LiteralValue
argument_list|(
name|context
argument_list|,
operator|new
name|IntegerValue
argument_list|(
name|i
operator|.
name|getText
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|i
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
block|{
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|DECIMAL_LITERAL
case|:
block|{
name|dec
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|DECIMAL_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|step
operator|=
operator|new
name|LiteralValue
argument_list|(
name|context
argument_list|,
operator|new
name|DecimalValue
argument_list|(
name|dec
operator|.
name|getText
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|dec
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|DOUBLE_LITERAL
case|:
block|{
name|dbl
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|DOUBLE_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|step
operator|=
operator|new
name|LiteralValue
argument_list|(
name|context
argument_list|,
operator|new
name|DoubleValue
argument_list|(
name|Double
operator|.
name|parseDouble
argument_list|(
name|dbl
operator|.
name|getText
argument_list|()
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|dbl
argument_list|)
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
comment|/**  * Parse params in function declaration.  */
specifier|public
specifier|final
name|void
name|paramList
parameter_list|(
name|AST
name|_t
parameter_list|,
name|List
name|vars
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|XPathException
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|paramList_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|param
argument_list|(
name|_t
argument_list|,
name|vars
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|{
name|_loop76
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|VARIABLE_BINDING
operator|)
condition|)
block|{
name|param
argument_list|(
name|_t
argument_list|,
name|vars
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop76
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
block|}
comment|/**  * Parse an inline function declaration.  */
specifier|public
specifier|final
name|Expression
name|inlineFunctionDecl
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|inlineFunctionDecl_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|name
init|=
literal|null
decl_stmt|;
name|step
operator|=
literal|null
expr_stmt|;
name|AST
name|__t68
init|=
name|_t
decl_stmt|;
name|name
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|INLINE_FUNCTION_DECL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|body
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|FunctionSignature
name|signature
init|=
operator|new
name|FunctionSignature
argument_list|(
name|InlineFunction
operator|.
name|INLINE_FUNCTION_QNAME
argument_list|)
decl_stmt|;
name|signature
operator|.
name|setDescription
argument_list|(
name|name
operator|.
name|getDoc
argument_list|()
argument_list|)
expr_stmt|;
name|UserDefinedFunction
name|func
init|=
operator|new
name|UserDefinedFunction
argument_list|(
name|context
argument_list|,
name|signature
argument_list|)
decl_stmt|;
name|func
operator|.
name|setASTNode
argument_list|(
name|name
argument_list|)
expr_stmt|;
name|List
name|varList
init|=
operator|new
name|ArrayList
argument_list|(
literal|3
argument_list|)
decl_stmt|;
name|List
name|annots
init|=
operator|new
name|ArrayList
argument_list|()
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_7
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|annotations
argument_list|(
name|_t
argument_list|,
name|annots
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|processAnnotations
argument_list|(
name|annots
argument_list|,
name|signature
argument_list|)
expr_stmt|;
block|}
if|else if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|VARIABLE_BINDING
operator|||
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|LCURLY
operator|||
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|LITERAL_as
operator|)
condition|)
block|{
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|VARIABLE_BINDING
case|:
block|{
name|paramList
argument_list|(
name|_t
argument_list|,
name|varList
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
name|LCURLY
case|:
case|case
name|LITERAL_as
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|processParams
argument_list|(
name|varList
argument_list|,
name|func
argument_list|,
name|signature
argument_list|)
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_as
case|:
block|{
name|AST
name|__t72
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp90_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_as
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|SequenceType
name|type
init|=
operator|new
name|SequenceType
argument_list|()
decl_stmt|;
name|sequenceType
argument_list|(
name|_t
argument_list|,
name|type
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|signature
operator|.
name|setReturnType
argument_list|(
name|type
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t72
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LCURLY
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|AST
name|__t73
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp91_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LCURLY
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|expr
argument_list|(
name|_t
argument_list|,
name|body
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|func
operator|.
name|setFunctionBody
argument_list|(
name|body
argument_list|)
expr_stmt|;
comment|// anonymous function
name|step
operator|=
operator|new
name|InlineFunction
argument_list|(
name|context
argument_list|,
name|func
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t73
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_t
operator|=
name|__t68
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
comment|/**  * Single function param.  */
specifier|public
specifier|final
name|void
name|param
parameter_list|(
name|AST
name|_t
parameter_list|,
name|List
name|vars
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|XPathException
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|param_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|varname
init|=
literal|null
decl_stmt|;
name|AST
name|__t78
init|=
name|_t
decl_stmt|;
name|varname
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|VARIABLE_BINDING
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|FunctionParameterSequenceType
name|var
init|=
operator|new
name|FunctionParameterSequenceType
argument_list|(
name|varname
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|var
operator|.
name|setCardinality
argument_list|(
name|Cardinality
operator|.
name|ZERO_OR_MORE
argument_list|)
expr_stmt|;
name|vars
operator|.
name|add
argument_list|(
name|var
argument_list|)
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_as
case|:
block|{
name|AST
name|__t80
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp92_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_as
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|var
operator|.
name|setCardinality
argument_list|(
name|Cardinality
operator|.
name|EXACTLY_ONE
argument_list|)
expr_stmt|;
name|sequenceType
argument_list|(
name|_t
argument_list|,
name|var
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t80
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t78
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_retTree
operator|=
name|_t
expr_stmt|;
block|}
comment|/**  * Single uri.  */
specifier|public
specifier|final
name|void
name|uri
parameter_list|(
name|AST
name|_t
parameter_list|,
name|List
name|uris
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|XPathException
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|uri_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|uri
init|=
literal|null
decl_stmt|;
name|AST
name|__t85
init|=
name|_t
decl_stmt|;
name|uri
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|AnyURIValue
name|any
init|=
operator|new
name|AnyURIValue
argument_list|(
name|uri
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|uris
operator|.
name|add
argument_list|(
name|any
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t85
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_retTree
operator|=
name|_t
expr_stmt|;
block|}
comment|/**  * catchErrorList in try-catch.  */
specifier|public
specifier|final
name|void
name|catchErrorList
parameter_list|(
name|AST
name|_t
parameter_list|,
name|List
argument_list|<
name|QName
argument_list|>
name|catchErrors
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|XPathException
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|catchErrorList_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|catchError
argument_list|(
name|_t
argument_list|,
name|catchErrors
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|{
name|_loop88
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_8
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|catchError
argument_list|(
name|_t
argument_list|,
name|catchErrors
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop88
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
block|}
comment|/**  * Single catchError.  */
specifier|public
specifier|final
name|void
name|catchError
parameter_list|(
name|AST
name|_t
parameter_list|,
name|List
argument_list|<
name|QName
argument_list|>
name|catchErrors
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|XPathException
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|catchError_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|ncwc
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|wc
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|pwcnc
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|eq
init|=
literal|null
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|NCNAME
case|:
block|{
name|AST
name|__t91
init|=
name|_t
decl_stmt|;
name|ncwc
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|NCNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp93_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|WILDCARD
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|catchErrors
operator|.
name|add
argument_list|(
name|QName
operator|.
name|WildcardLocalPartQName
operator|.
name|parseFromPrefix
argument_list|(
name|staticContext
argument_list|,
name|ncwc
operator|.
name|toString
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|e
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|ncwc
operator|.
name|getLine
argument_list|()
argument_list|,
name|ncwc
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|ncwc
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
name|_t
operator|=
name|__t91
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|WILDCARD
case|:
block|{
name|AST
name|__t92
init|=
name|_t
decl_stmt|;
name|wc
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|WILDCARD
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|catchErrors
operator|.
name|add
argument_list|(
name|QName
operator|.
name|WildcardQName
operator|.
name|getInstance
argument_list|()
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t92
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|PREFIX_WILDCARD
case|:
block|{
name|AST
name|__t93
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp94_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|PREFIX_WILDCARD
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|pwcnc
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|NCNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|catchErrors
operator|.
name|add
argument_list|(
operator|new
name|QName
operator|.
name|WildcardNamespaceURIQName
argument_list|(
name|pwcnc
operator|.
name|toString
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t93
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|EQNAME
case|:
block|{
name|AST
name|__t94
init|=
name|_t
decl_stmt|;
name|eq
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
try|try
block|{
name|catchErrors
operator|.
name|add
argument_list|(
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|eq
operator|.
name|toString
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|e
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|eq
operator|.
name|getLine
argument_list|()
argument_list|,
name|eq
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|eq
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
name|_t
operator|=
name|__t94
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
block|}
specifier|public
specifier|final
name|Expression
name|arrowOp
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|arrowOp_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|arrowAST
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|eq
init|=
literal|null
decl_stmt|;
name|step
operator|=
literal|null
expr_stmt|;
name|AST
name|__t350
init|=
name|_t
decl_stmt|;
name|arrowAST
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|ARROW_OP
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|leftExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|expr
argument_list|(
name|_t
argument_list|,
name|leftExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|ArrowOperator
name|op
init|=
operator|new
name|ArrowOperator
argument_list|(
name|context
argument_list|,
name|leftExpr
operator|.
name|simplify
argument_list|()
argument_list|)
decl_stmt|;
name|op
operator|.
name|setASTNode
argument_list|(
name|arrowAST
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|op
argument_list|)
expr_stmt|;
name|step
operator|=
name|op
expr_stmt|;
name|PathExpr
name|nameExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|String
name|name
init|=
literal|null
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|EQNAME
operator|)
condition|)
block|{
name|eq
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|name
operator|=
name|eq
operator|.
name|toString
argument_list|()
expr_stmt|;
block|}
if|else if
condition|(
operator|(
name|_tokenSet_0
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|expr
argument_list|(
name|_t
argument_list|,
name|nameExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|List
argument_list|<
name|Expression
argument_list|>
name|params
init|=
operator|new
name|ArrayList
argument_list|<
name|Expression
argument_list|>
argument_list|(
literal|5
argument_list|)
decl_stmt|;
block|{
name|_loop353
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_0
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|PathExpr
name|pathExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|expr
argument_list|(
name|_t
argument_list|,
name|pathExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|params
operator|.
name|add
argument_list|(
name|pathExpr
operator|.
name|simplify
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop353
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
if|if
condition|(
name|name
operator|==
literal|null
condition|)
block|{
name|op
operator|.
name|setArrowFunction
argument_list|(
name|nameExpr
argument_list|,
name|params
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|op
operator|.
name|setArrowFunction
argument_list|(
name|name
argument_list|,
name|params
argument_list|)
expr_stmt|;
block|}
name|_t
operator|=
name|__t350
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
specifier|public
specifier|final
name|Expression
name|typeCastExpr
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|typeCastExpr_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|castAST
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|t
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|castableAST
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|t2
init|=
literal|null
decl_stmt|;
name|step
operator|=
literal|null
expr_stmt|;
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_cast
case|:
block|{
name|AST
name|__t355
init|=
name|_t
decl_stmt|;
name|castAST
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_cast
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|expr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|int
name|cardinality
init|=
name|Cardinality
operator|.
name|EXACTLY_ONE
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|expr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|t
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|ATOMIC_TYPE
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|QUESTION
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp95_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|QUESTION
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|cardinality
operator|=
name|Cardinality
operator|.
name|ZERO_OR_ONE
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
try|try
block|{
name|QName
name|qn
init|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|t
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|int
name|code
init|=
name|Type
operator|.
name|getType
argument_list|(
name|qn
argument_list|)
decl_stmt|;
name|CastExpression
name|castExpr
init|=
operator|new
name|CastExpression
argument_list|(
name|context
argument_list|,
name|expr
argument_list|,
name|code
argument_list|,
name|cardinality
argument_list|)
decl_stmt|;
name|castExpr
operator|.
name|setASTNode
argument_list|(
name|castAST
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|castExpr
argument_list|)
expr_stmt|;
name|step
operator|=
name|castExpr
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|e
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|t
operator|.
name|getLine
argument_list|()
argument_list|,
name|t
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|t
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
name|_t
operator|=
name|__t355
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_castable
case|:
block|{
name|AST
name|__t357
init|=
name|_t
decl_stmt|;
name|castableAST
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_castable
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|expr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|int
name|cardinality
init|=
name|Cardinality
operator|.
name|EXACTLY_ONE
decl_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|expr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|t2
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|ATOMIC_TYPE
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|QUESTION
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp96_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|QUESTION
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|cardinality
operator|=
name|Cardinality
operator|.
name|ZERO_OR_ONE
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
try|try
block|{
name|QName
name|qn
init|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|t2
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|int
name|code
init|=
name|Type
operator|.
name|getType
argument_list|(
name|qn
argument_list|)
decl_stmt|;
name|CastableExpression
name|castExpr
init|=
operator|new
name|CastableExpression
argument_list|(
name|context
argument_list|,
name|expr
argument_list|,
name|code
argument_list|,
name|cardinality
argument_list|)
decl_stmt|;
name|castExpr
operator|.
name|setASTNode
argument_list|(
name|castAST
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|castExpr
argument_list|)
expr_stmt|;
name|step
operator|=
name|castExpr
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|e
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|t2
operator|.
name|getLine
argument_list|()
argument_list|,
name|t2
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|t2
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
name|_t
operator|=
name|__t357
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
specifier|public
specifier|final
name|Expression
name|generalComp
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|generalComp_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|eq
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|neq
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|lt
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|lteq
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|gt
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|gteq
init|=
literal|null
decl_stmt|;
name|step
operator|=
literal|null
expr_stmt|;
name|PathExpr
name|left
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|PathExpr
name|right
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EQ
case|:
block|{
name|AST
name|__t310
init|=
name|_t
decl_stmt|;
name|eq
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQ
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
operator|new
name|GeneralComparison
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|Comparison
operator|.
name|EQ
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|eq
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t310
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|NEQ
case|:
block|{
name|AST
name|__t311
init|=
name|_t
decl_stmt|;
name|neq
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|NEQ
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
operator|new
name|GeneralComparison
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|Comparison
operator|.
name|NEQ
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|neq
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t311
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LT
case|:
block|{
name|AST
name|__t312
init|=
name|_t
decl_stmt|;
name|lt
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LT
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
operator|new
name|GeneralComparison
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|Comparison
operator|.
name|LT
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|lt
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t312
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LTEQ
case|:
block|{
name|AST
name|__t313
init|=
name|_t
decl_stmt|;
name|lteq
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LTEQ
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
operator|new
name|GeneralComparison
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|Comparison
operator|.
name|LTEQ
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|lteq
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t313
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|GT
case|:
block|{
name|AST
name|__t314
init|=
name|_t
decl_stmt|;
name|gt
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|GT
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
operator|new
name|GeneralComparison
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|Comparison
operator|.
name|GT
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|gt
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t314
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|GTEQ
case|:
block|{
name|AST
name|__t315
init|=
name|_t
decl_stmt|;
name|gteq
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|GTEQ
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
operator|new
name|GeneralComparison
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|Comparison
operator|.
name|GTEQ
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|gteq
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t315
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
specifier|public
specifier|final
name|Expression
name|valueComp
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|valueComp_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|eq
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|ne
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|lt
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|le
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|gt
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|ge
init|=
literal|null
decl_stmt|;
name|step
operator|=
literal|null
expr_stmt|;
name|PathExpr
name|left
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|PathExpr
name|right
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_eq
case|:
block|{
name|AST
name|__t303
init|=
name|_t
decl_stmt|;
name|eq
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_eq
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
operator|new
name|ValueComparison
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|Comparison
operator|.
name|EQ
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|eq
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t303
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_ne
case|:
block|{
name|AST
name|__t304
init|=
name|_t
decl_stmt|;
name|ne
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_ne
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
operator|new
name|ValueComparison
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|Comparison
operator|.
name|NEQ
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|ne
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t304
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_lt
case|:
block|{
name|AST
name|__t305
init|=
name|_t
decl_stmt|;
name|lt
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_lt
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
operator|new
name|ValueComparison
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|Comparison
operator|.
name|LT
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|lt
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t305
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_le
case|:
block|{
name|AST
name|__t306
init|=
name|_t
decl_stmt|;
name|le
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_le
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
operator|new
name|ValueComparison
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|Comparison
operator|.
name|LTEQ
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|le
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t306
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_gt
case|:
block|{
name|AST
name|__t307
init|=
name|_t
decl_stmt|;
name|gt
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_gt
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
operator|new
name|ValueComparison
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|Comparison
operator|.
name|GT
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|gt
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t307
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_ge
case|:
block|{
name|AST
name|__t308
init|=
name|_t
decl_stmt|;
name|ge
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_ge
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
operator|new
name|ValueComparison
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|Comparison
operator|.
name|GTEQ
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|ge
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t308
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
specifier|public
specifier|final
name|Expression
name|nodeComp
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|nodeComp_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|is
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|before
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|after
init|=
literal|null
decl_stmt|;
name|step
operator|=
literal|null
expr_stmt|;
name|PathExpr
name|left
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|PathExpr
name|right
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_is
case|:
block|{
name|AST
name|__t317
init|=
name|_t
decl_stmt|;
name|is
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_is
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
operator|new
name|NodeComparison
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|NodeComparisonOperator
operator|.
name|IS
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|is
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t317
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|BEFORE
case|:
block|{
name|AST
name|__t318
init|=
name|_t
decl_stmt|;
name|before
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|BEFORE
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
operator|new
name|NodeComparison
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|NodeComparisonOperator
operator|.
name|BEFORE
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|before
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t318
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|AFTER
case|:
block|{
name|AST
name|__t319
init|=
name|_t
decl_stmt|;
name|after
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|AFTER
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
operator|new
name|NodeComparison
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|NodeComparisonOperator
operator|.
name|AFTER
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|after
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t319
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
comment|/**  * Process a primary expression like function calls,  * variable references, value constructors etc.  */
specifier|public
specifier|final
name|Expression
name|primaryExpr
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|primaryExpr_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|v
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|scAST
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|content
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|i
init|=
literal|null
decl_stmt|;
name|step
operator|=
literal|null
expr_stmt|;
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|LCURLY
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|XML_CDATA
case|:
block|{
name|step
operator|=
name|constructor
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|postfixExpr
argument_list|(
name|_t
argument_list|,
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|MAP
case|:
block|{
name|step
operator|=
name|mapConstr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|postfixExpr
argument_list|(
name|_t
argument_list|,
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|ARRAY
case|:
block|{
name|step
operator|=
name|arrayConstr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|postfixExpr
argument_list|(
name|_t
argument_list|,
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|PARENTHESIZED
case|:
block|{
name|AST
name|__t227
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp97_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|PARENTHESIZED
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|pathExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|expr
argument_list|(
name|_t
argument_list|,
name|pathExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
comment|// simplify the expression
switch|switch
condition|(
name|pathExpr
operator|.
name|getSubExpressionCount
argument_list|()
condition|)
block|{
case|case
literal|0
case|:
name|step
operator|=
operator|new
name|EmptySequenceExpr
argument_list|(
name|context
argument_list|)
expr_stmt|;
break|break;
case|case
literal|1
case|:
name|step
operator|=
name|pathExpr
operator|.
name|getSubExpression
argument_list|(
literal|0
argument_list|)
expr_stmt|;
break|break;
default|default:
name|step
operator|=
name|pathExpr
expr_stmt|;
break|break;
block|}
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t227
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|step
operator|=
name|postfixExpr
argument_list|(
name|_t
argument_list|,
name|pathExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|STRING_LITERAL
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
block|{
name|step
operator|=
name|literalExpr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|postfixExpr
argument_list|(
name|_t
argument_list|,
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|VARIABLE_REF
case|:
block|{
name|v
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|VARIABLE_REF
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
specifier|final
name|QName
name|vrqn
decl_stmt|;
try|try
block|{
name|vrqn
operator|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|v
operator|.
name|getText
argument_list|()
argument_list|,
literal|null
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|v
operator|.
name|getLine
argument_list|()
argument_list|,
name|v
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|v
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
name|step
operator|=
operator|new
name|VariableReference
argument_list|(
name|context
argument_list|,
name|vrqn
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|v
argument_list|)
expr_stmt|;
name|step
operator|=
name|postfixExpr
argument_list|(
name|_t
argument_list|,
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|FUNCTION
case|:
block|{
name|step
operator|=
name|functionCall
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|postfixExpr
argument_list|(
name|_t
argument_list|,
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|HASH
case|:
block|{
name|step
operator|=
name|functionReference
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|INLINE_FUNCTION_DECL
case|:
block|{
name|step
operator|=
name|inlineFunctionDecl
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|postfixExpr
argument_list|(
name|_t
argument_list|,
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|LOOKUP
case|:
block|{
name|step
operator|=
name|lookup
argument_list|(
name|_t
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|postfixExpr
argument_list|(
name|_t
argument_list|,
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|STRING_CONSTRUCTOR_START
case|:
block|{
name|AST
name|__t229
init|=
name|_t
decl_stmt|;
name|scAST
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_CONSTRUCTOR_START
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|StringConstructor
name|sc
init|=
operator|new
name|StringConstructor
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|sc
operator|.
name|setASTNode
argument_list|(
name|scAST
argument_list|)
expr_stmt|;
block|{
name|_loop233
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|STRING_CONSTRUCTOR_CONTENT
case|:
block|{
name|content
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_CONSTRUCTOR_CONTENT
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|sc
operator|.
name|addContent
argument_list|(
name|content
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|STRING_CONSTRUCTOR_INTERPOLATION_START
case|:
block|{
name|AST
name|__t231
init|=
name|_t
decl_stmt|;
name|i
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_CONSTRUCTOR_INTERPOLATION_START
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|interpolation
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|expr
argument_list|(
name|_t
argument_list|,
name|interpolation
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|sc
operator|.
name|addInterpolation
argument_list|(
name|interpolation
operator|.
name|simplify
argument_list|()
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t231
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
default|default:
block|{
break|break
name|_loop233
break|;
block|}
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|path
operator|.
name|add
argument_list|(
name|sc
argument_list|)
expr_stmt|;
name|step
operator|=
name|sc
expr_stmt|;
name|_t
operator|=
name|__t229
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
specifier|public
specifier|final
name|Expression
name|pathExpr
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|pathExpr_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|eq
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|nc1
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|nc
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|w
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|n
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|t
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|e
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|eq2
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|eq21
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|att
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|eq3
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|eq31
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|com
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|pi
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|ncpi
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|slpi
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|nt
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|dn
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|dneq
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|dneq1
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|at
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|attr
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|nc2
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|nc3
init|=
literal|null
decl_stmt|;
name|Expression
name|rightStep
init|=
literal|null
decl_stmt|;
name|step
operator|=
literal|null
expr_stmt|;
name|int
name|axis
init|=
name|Constants
operator|.
name|CHILD_AXIS
decl_stmt|;
name|boolean
name|axisGiven
init|=
literal|false
decl_stmt|;
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EQNAME
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|NCNAME
case|:
case|case
name|LITERAL_element
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
block|{
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
block|{
name|axis
operator|=
name|forwardAxis
argument_list|(
name|_t
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|axisGiven
operator|=
literal|true
expr_stmt|;
break|break;
block|}
case|case
name|EQNAME
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|NCNAME
case|:
case|case
name|LITERAL_element
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|NodeTest
name|test
init|=
literal|null
decl_stmt|;
name|XQueryAST
name|ast
init|=
literal|null
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EQNAME
case|:
block|{
name|eq
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|QName
name|qname
init|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|eq
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
name|axis
operator|==
name|Constants
operator|.
name|ATTRIBUTE_AXIS
condition|)
block|{
name|qname
operator|=
operator|new
name|QName
argument_list|(
name|qname
argument_list|,
name|ElementValue
operator|.
name|ATTRIBUTE
argument_list|)
expr_stmt|;
name|test
operator|=
operator|new
name|NameTest
argument_list|(
name|Type
operator|.
name|ATTRIBUTE
argument_list|,
name|qname
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|test
operator|=
operator|new
name|NameTest
argument_list|(
name|Type
operator|.
name|ELEMENT
argument_list|,
name|qname
argument_list|)
expr_stmt|;
block|}
name|ast
operator|=
name|eq
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|eq
operator|.
name|getLine
argument_list|()
argument_list|,
name|eq
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|eq
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
break|break;
block|}
case|case
name|PREFIX_WILDCARD
case|:
block|{
name|AST
name|__t237
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp98_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|PREFIX_WILDCARD
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|nc1
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|NCNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_t
operator|=
name|__t237
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|QName
name|qname
init|=
operator|new
name|QName
operator|.
name|WildcardNamespaceURIQName
argument_list|(
name|nc1
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|test
operator|=
operator|new
name|NameTest
argument_list|(
name|Type
operator|.
name|ELEMENT
argument_list|,
name|qname
argument_list|)
expr_stmt|;
if|if
condition|(
name|axis
operator|==
name|Constants
operator|.
name|ATTRIBUTE_AXIS
condition|)
name|test
operator|.
name|setType
argument_list|(
name|Type
operator|.
name|ATTRIBUTE
argument_list|)
expr_stmt|;
name|ast
operator|=
name|nc1
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|XPathException
name|ex2
parameter_list|)
block|{
name|ex2
operator|.
name|setLocation
argument_list|(
name|nc1
operator|.
name|getLine
argument_list|()
argument_list|,
name|nc1
operator|.
name|getColumn
argument_list|()
argument_list|)
expr_stmt|;
block|}
break|break;
block|}
case|case
name|NCNAME
case|:
block|{
name|AST
name|__t238
init|=
name|_t
decl_stmt|;
name|nc
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|NCNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp99_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|WILDCARD
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_t
operator|=
name|__t238
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|String
name|namespaceURI
init|=
name|staticContext
operator|.
name|getURIForPrefix
argument_list|(
name|nc
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|QName
name|qname
init|=
operator|new
name|QName
operator|.
name|WildcardLocalPartQName
argument_list|(
name|namespaceURI
argument_list|,
name|nc
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|test
operator|=
operator|new
name|NameTest
argument_list|(
name|Type
operator|.
name|ELEMENT
argument_list|,
name|qname
argument_list|)
expr_stmt|;
if|if
condition|(
name|axis
operator|==
name|Constants
operator|.
name|ATTRIBUTE_AXIS
condition|)
name|test
operator|.
name|setType
argument_list|(
name|Type
operator|.
name|ATTRIBUTE
argument_list|)
expr_stmt|;
name|ast
operator|=
name|nc
expr_stmt|;
block|}
catch|catch
parameter_list|(
name|XPathException
name|ex3
parameter_list|)
block|{
name|ex3
operator|.
name|setLocation
argument_list|(
name|nc1
operator|.
name|getLine
argument_list|()
argument_list|,
name|nc1
operator|.
name|getColumn
argument_list|()
argument_list|)
expr_stmt|;
block|}
break|break;
block|}
case|case
name|WILDCARD
case|:
block|{
name|w
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|WILDCARD
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
if|if
condition|(
name|axis
operator|==
name|Constants
operator|.
name|ATTRIBUTE_AXIS
condition|)
name|test
operator|=
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|ATTRIBUTE
argument_list|)
expr_stmt|;
else|else
name|test
operator|=
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|ELEMENT
argument_list|)
expr_stmt|;
name|ast
operator|=
name|w
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_node
case|:
block|{
name|n
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_node
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
if|if
condition|(
name|axis
operator|==
name|Constants
operator|.
name|ATTRIBUTE_AXIS
condition|)
block|{
comment|//	throw new XPathException(n, "Cannot test for node() on the attribute axis");
name|test
operator|=
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|ATTRIBUTE
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|test
operator|=
operator|new
name|AnyNodeTest
argument_list|()
expr_stmt|;
block|}
name|ast
operator|=
name|n
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_text
case|:
block|{
name|t
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_text
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
if|if
condition|(
name|axis
operator|==
name|Constants
operator|.
name|ATTRIBUTE_AXIS
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
name|t
argument_list|,
literal|"Cannot test for text() on the attribute axis"
argument_list|)
throw|;
name|test
operator|=
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|TEXT
argument_list|)
expr_stmt|;
name|ast
operator|=
name|t
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_element
case|:
block|{
name|AST
name|__t239
init|=
name|_t
decl_stmt|;
name|e
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_element
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
if|if
condition|(
name|axis
operator|==
name|Constants
operator|.
name|ATTRIBUTE_AXIS
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
name|e
argument_list|,
literal|"Cannot test for element() on the attribute axis"
argument_list|)
throw|;
name|test
operator|=
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|ELEMENT
argument_list|)
expr_stmt|;
name|ast
operator|=
name|e
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EQNAME
case|:
block|{
name|eq2
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|QName
name|qname
init|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|eq2
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|test
operator|=
operator|new
name|NameTest
argument_list|(
name|Type
operator|.
name|ELEMENT
argument_list|,
name|qname
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|eq2
operator|.
name|getLine
argument_list|()
argument_list|,
name|eq2
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|eq2
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
break|break;
block|}
case|case
name|WILDCARD
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp100_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|WILDCARD
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EQNAME
case|:
block|{
name|eq21
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|QName
name|qname
init|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|eq21
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|test
operator|=
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|getType
argument_list|(
name|qname
argument_list|)
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|eq21
operator|.
name|getLine
argument_list|()
argument_list|,
name|eq21
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|eq21
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t239
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|ATTRIBUTE_TEST
case|:
block|{
name|AST
name|__t242
init|=
name|_t
decl_stmt|;
name|att
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|ATTRIBUTE_TEST
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|test
operator|=
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|ATTRIBUTE
argument_list|)
expr_stmt|;
name|ast
operator|=
name|att
expr_stmt|;
if|if
condition|(
operator|!
name|axisGiven
condition|)
block|{
name|axis
operator|=
name|Constants
operator|.
name|ATTRIBUTE_AXIS
expr_stmt|;
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EQNAME
case|:
block|{
name|eq3
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|QName
name|qname
init|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|eq3
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|qname
operator|=
operator|new
name|QName
argument_list|(
name|qname
argument_list|,
name|ElementValue
operator|.
name|ATTRIBUTE
argument_list|)
expr_stmt|;
name|test
operator|=
operator|new
name|NameTest
argument_list|(
name|Type
operator|.
name|ATTRIBUTE
argument_list|,
name|qname
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|eq3
operator|.
name|getLine
argument_list|()
argument_list|,
name|eq3
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|eq3
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
break|break;
block|}
case|case
name|WILDCARD
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp101_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|WILDCARD
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EQNAME
case|:
block|{
name|eq31
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|QName
name|qname
init|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|eq31
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|test
operator|=
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|getType
argument_list|(
name|qname
argument_list|)
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|eq31
operator|.
name|getLine
argument_list|()
argument_list|,
name|eq31
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|eq31
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t242
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_comment
case|:
block|{
name|com
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_comment
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
if|if
condition|(
name|axis
operator|==
name|Constants
operator|.
name|ATTRIBUTE_AXIS
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
name|n
argument_list|,
literal|"Cannot test for comment() on the attribute axis"
argument_list|)
throw|;
name|test
operator|=
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|COMMENT
argument_list|)
expr_stmt|;
name|ast
operator|=
name|com
expr_stmt|;
break|break;
block|}
case|case
literal|194
case|:
block|{
name|AST
name|__t245
init|=
name|_t
decl_stmt|;
name|pi
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|194
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
if|if
condition|(
name|axis
operator|==
name|Constants
operator|.
name|ATTRIBUTE_AXIS
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
name|n
argument_list|,
literal|"Cannot test for processing-instruction() on the attribute axis"
argument_list|)
throw|;
name|test
operator|=
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|PROCESSING_INSTRUCTION
argument_list|)
expr_stmt|;
name|ast
operator|=
name|pi
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|NCNAME
case|:
block|{
name|ncpi
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|NCNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|QName
name|qname
decl_stmt|;
name|qname
operator|=
operator|new
name|QName
argument_list|(
name|ncpi
operator|.
name|getText
argument_list|()
argument_list|,
literal|""
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|test
operator|=
operator|new
name|NameTest
argument_list|(
name|Type
operator|.
name|PROCESSING_INSTRUCTION
argument_list|,
name|qname
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|STRING_LITERAL
case|:
block|{
name|slpi
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STRING_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|QName
name|qname
decl_stmt|;
name|qname
operator|=
operator|new
name|QName
argument_list|(
name|slpi
operator|.
name|getText
argument_list|()
argument_list|,
literal|""
argument_list|,
literal|null
argument_list|)
expr_stmt|;
name|test
operator|=
operator|new
name|NameTest
argument_list|(
name|Type
operator|.
name|PROCESSING_INSTRUCTION
argument_list|,
name|qname
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t245
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
literal|193
case|:
block|{
name|nt
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|193
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
if|if
condition|(
name|axis
operator|==
name|Constants
operator|.
name|ATTRIBUTE_AXIS
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
name|n
argument_list|,
literal|"Cannot test for namespace-node() on the attribute axis"
argument_list|)
throw|;
name|test
operator|=
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|NAMESPACE
argument_list|)
expr_stmt|;
name|ast
operator|=
name|nt
expr_stmt|;
break|break;
block|}
case|case
literal|195
case|:
block|{
name|dn
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|195
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|test
operator|=
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|DOCUMENT
argument_list|)
expr_stmt|;
name|ast
operator|=
name|dn
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|LITERAL_element
operator|)
condition|)
block|{
name|AST
name|__t248
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp102_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_element
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EQNAME
case|:
block|{
name|dneq
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|QName
name|qname
init|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|dneq
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|test
operator|=
operator|new
name|NameTest
argument_list|(
name|Type
operator|.
name|DOCUMENT
argument_list|,
name|qname
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|dneq
operator|.
name|getLine
argument_list|()
argument_list|,
name|dneq
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|dneq
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
break|break;
block|}
case|case
name|WILDCARD
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp103_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|WILDCARD
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EQNAME
case|:
block|{
name|dneq1
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|QName
name|qname
init|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|dneq1
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|test
operator|=
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|getType
argument_list|(
name|qname
argument_list|)
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|dneq1
operator|.
name|getLine
argument_list|()
argument_list|,
name|dneq1
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|dneq1
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t248
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|}
if|else if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
literal|223
operator|)
condition|)
block|{
name|AST
name|__t251
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp104_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|223
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp105_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_t
operator|=
name|__t251
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|}
if|else if
condition|(
operator|(
name|_tokenSet_9
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|step
operator|=
operator|new
name|LocationStep
argument_list|(
name|context
argument_list|,
name|axis
argument_list|,
name|test
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
if|if
condition|(
name|ast
operator|!=
literal|null
condition|)
name|step
operator|.
name|setASTNode
argument_list|(
name|ast
argument_list|)
expr_stmt|;
block|{
name|_loop253
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|PREDICATE
operator|)
condition|)
block|{
name|predicate
argument_list|(
name|_t
argument_list|,
operator|(
name|LocationStep
operator|)
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop253
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
break|break;
block|}
case|case
name|AT
case|:
block|{
name|at
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|AT
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|QName
name|qname
init|=
literal|null
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EQNAME
case|:
block|{
name|attr
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|EQNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
try|try
block|{
name|qname
operator|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|attr
operator|.
name|getText
argument_list|()
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|qname
operator|=
operator|new
name|QName
argument_list|(
name|qname
argument_list|,
name|ElementValue
operator|.
name|ATTRIBUTE
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|attr
operator|.
name|getLine
argument_list|()
argument_list|,
name|attr
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|attr
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
break|break;
block|}
case|case
name|PREFIX_WILDCARD
case|:
block|{
name|AST
name|__t255
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp106_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|PREFIX_WILDCARD
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|nc2
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|NCNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_t
operator|=
name|__t255
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|qname
operator|=
operator|new
name|QName
operator|.
name|WildcardNamespaceURIQName
argument_list|(
name|nc2
operator|.
name|getText
argument_list|()
argument_list|,
name|ElementValue
operator|.
name|ATTRIBUTE
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|NCNAME
case|:
block|{
name|AST
name|__t256
init|=
name|_t
decl_stmt|;
name|nc3
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|NCNAME
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp107_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|WILDCARD
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_t
operator|=
name|__t256
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|String
name|namespaceURI
init|=
name|staticContext
operator|.
name|getURIForPrefix
argument_list|(
name|nc3
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
name|namespaceURI
operator|==
literal|null
condition|)
throw|throw
operator|new
name|EXistException
argument_list|(
literal|"No namespace defined for prefix "
operator|+
name|nc3
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
name|qname
operator|=
operator|new
name|QName
operator|.
name|WildcardLocalPartQName
argument_list|(
name|namespaceURI
argument_list|,
name|ElementValue
operator|.
name|ATTRIBUTE
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|WILDCARD
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp108_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|WILDCARD
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|NodeTest
name|test
init|=
name|qname
operator|==
literal|null
condition|?
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|ATTRIBUTE
argument_list|)
else|:
operator|new
name|NameTest
argument_list|(
name|Type
operator|.
name|ATTRIBUTE
argument_list|,
name|qname
argument_list|)
decl_stmt|;
name|step
operator|=
operator|new
name|LocationStep
argument_list|(
name|context
argument_list|,
name|Constants
operator|.
name|ATTRIBUTE_AXIS
argument_list|,
name|test
argument_list|)
expr_stmt|;
name|step
operator|.
name|setASTNode
argument_list|(
name|at
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
block|{
name|_loop258
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|PREDICATE
operator|)
condition|)
block|{
name|predicate
argument_list|(
name|_t
argument_list|,
operator|(
name|LocationStep
operator|)
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop258
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
break|break;
block|}
case|case
name|SELF
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp109_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|SELF
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|step
operator|=
operator|new
name|LocationStep
argument_list|(
name|context
argument_list|,
name|Constants
operator|.
name|SELF_AXIS
argument_list|,
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|NODE
argument_list|)
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
block|{
name|_loop260
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|PREDICATE
operator|)
condition|)
block|{
name|predicate
argument_list|(
name|_t
argument_list|,
operator|(
name|LocationStep
operator|)
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop260
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
break|break;
block|}
case|case
name|PARENT
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp110_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|PARENT
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|step
operator|=
operator|new
name|LocationStep
argument_list|(
name|context
argument_list|,
name|Constants
operator|.
name|PARENT_AXIS
argument_list|,
operator|new
name|TypeTest
argument_list|(
name|Type
operator|.
name|NODE
argument_list|)
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|step
argument_list|)
expr_stmt|;
block|{
name|_loop262
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|PREDICATE
operator|)
condition|)
block|{
name|predicate
argument_list|(
name|_t
argument_list|,
operator|(
name|LocationStep
operator|)
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop262
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
break|break;
block|}
case|case
name|BANG
case|:
block|{
name|AST
name|__t263
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp111_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|BANG
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|left
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|PathExpr
name|right
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|OpSimpleMap
name|map
init|=
operator|new
name|OpSimpleMap
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|)
decl_stmt|;
name|path
operator|.
name|add
argument_list|(
name|map
argument_list|)
expr_stmt|;
name|step
operator|=
name|path
expr_stmt|;
name|_t
operator|=
name|__t263
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|SLASH
case|:
block|{
name|AST
name|__t264
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp112_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|SLASH
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|rightStep
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
if|if
condition|(
name|rightStep
operator|instanceof
name|LocationStep
condition|)
block|{
if|if
condition|(
operator|(
operator|(
name|LocationStep
operator|)
name|rightStep
operator|)
operator|.
name|getAxis
argument_list|()
operator|==
name|Constants
operator|.
name|UNKNOWN_AXIS
condition|)
operator|(
operator|(
name|LocationStep
operator|)
name|rightStep
operator|)
operator|.
name|setAxis
argument_list|(
name|Constants
operator|.
name|CHILD_AXIS
argument_list|)
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|rightStep
operator|.
name|getPrimaryAxis
argument_list|()
operator|==
name|Constants
operator|.
name|UNKNOWN_AXIS
condition|)
name|rightStep
operator|.
name|setPrimaryAxis
argument_list|(
name|Constants
operator|.
name|CHILD_AXIS
argument_list|)
expr_stmt|;
if|if
condition|(
name|rightStep
operator|instanceof
name|VariableReference
condition|)
block|{
name|rightStep
operator|=
operator|new
name|SimpleStep
argument_list|(
name|context
argument_list|,
name|Constants
operator|.
name|CHILD_AXIS
argument_list|,
name|rightStep
argument_list|)
expr_stmt|;
name|path
operator|.
name|replaceLastExpression
argument_list|(
name|rightStep
argument_list|)
expr_stmt|;
block|}
block|}
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t264
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
if|if
condition|(
name|step
operator|instanceof
name|LocationStep
operator|&&
operator|(
operator|(
name|LocationStep
operator|)
name|step
operator|)
operator|.
name|getAxis
argument_list|()
operator|==
name|Constants
operator|.
name|UNKNOWN_AXIS
condition|)
operator|(
operator|(
name|LocationStep
operator|)
name|step
operator|)
operator|.
name|setAxis
argument_list|(
name|Constants
operator|.
name|CHILD_AXIS
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|DSLASH
case|:
block|{
name|AST
name|__t266
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp113_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|DSLASH
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|rightStep
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
if|if
condition|(
name|rightStep
operator|instanceof
name|LocationStep
condition|)
block|{
name|LocationStep
name|rs
init|=
operator|(
name|LocationStep
operator|)
name|rightStep
decl_stmt|;
if|if
condition|(
name|rs
operator|.
name|getAxis
argument_list|()
operator|==
name|Constants
operator|.
name|ATTRIBUTE_AXIS
operator|||
operator|(
name|rs
operator|.
name|getTest
argument_list|()
operator|.
name|getType
argument_list|()
operator|==
name|Type
operator|.
name|ATTRIBUTE
operator|&&
name|rs
operator|.
name|getAxis
argument_list|()
operator|==
name|Constants
operator|.
name|CHILD_AXIS
operator|)
condition|)
block|{
name|rs
operator|.
name|setAxis
argument_list|(
name|Constants
operator|.
name|DESCENDANT_ATTRIBUTE_AXIS
argument_list|)
expr_stmt|;
block|}
if|else if
condition|(
name|rs
operator|.
name|getAxis
argument_list|()
operator|==
name|Constants
operator|.
name|CHILD_AXIS
operator|&&
name|rs
operator|.
name|getTest
argument_list|()
operator|.
name|isWildcardTest
argument_list|()
condition|)
block|{
name|rs
operator|.
name|setAxis
argument_list|(
name|Constants
operator|.
name|DESCENDANT_AXIS
argument_list|)
expr_stmt|;
block|}
if|else if
condition|(
name|rs
operator|.
name|getAxis
argument_list|()
operator|==
name|Constants
operator|.
name|SELF_AXIS
condition|)
block|{
name|rs
operator|.
name|setAxis
argument_list|(
name|Constants
operator|.
name|DESCENDANT_SELF_AXIS
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|rs
operator|.
name|setAxis
argument_list|(
name|Constants
operator|.
name|DESCENDANT_SELF_AXIS
argument_list|)
expr_stmt|;
name|rs
operator|.
name|setAbbreviated
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|rightStep
operator|.
name|setPrimaryAxis
argument_list|(
name|Constants
operator|.
name|DESCENDANT_SELF_AXIS
argument_list|)
expr_stmt|;
if|if
condition|(
name|rightStep
operator|instanceof
name|VariableReference
condition|)
block|{
name|rightStep
operator|=
operator|new
name|SimpleStep
argument_list|(
name|context
argument_list|,
name|Constants
operator|.
name|DESCENDANT_SELF_AXIS
argument_list|,
name|rightStep
argument_list|)
expr_stmt|;
name|path
operator|.
name|replaceLastExpression
argument_list|(
name|rightStep
argument_list|)
expr_stmt|;
block|}
if|else if
condition|(
name|rightStep
operator|instanceof
name|FilteredExpression
condition|)
operator|(
operator|(
name|FilteredExpression
operator|)
name|rightStep
operator|)
operator|.
name|setAbbreviated
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t266
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
if|if
condition|(
name|step
operator|instanceof
name|LocationStep
operator|&&
operator|(
operator|(
name|LocationStep
operator|)
name|step
operator|)
operator|.
name|getAxis
argument_list|()
operator|==
name|Constants
operator|.
name|UNKNOWN_AXIS
condition|)
block|{
operator|(
operator|(
name|LocationStep
operator|)
name|step
operator|)
operator|.
name|setAxis
argument_list|(
name|Constants
operator|.
name|DESCENDANT_SELF_AXIS
argument_list|)
expr_stmt|;
operator|(
operator|(
name|LocationStep
operator|)
name|step
operator|)
operator|.
name|setAbbreviated
argument_list|(
literal|true
argument_list|)
expr_stmt|;
block|}
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
specifier|public
specifier|final
name|Expression
name|extensionExpr
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|XPathException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|extensionExpr_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|p
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|c
init|=
literal|null
decl_stmt|;
name|step
operator|=
literal|null
expr_stmt|;
name|PathExpr
name|pathExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|ExtensionExpression
name|ext
init|=
literal|null
decl_stmt|;
block|{
name|int
name|_cnt363
init|=
literal|0
decl_stmt|;
name|_loop363
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|PRAGMA
operator|)
condition|)
block|{
name|AST
name|__t361
init|=
name|_t
decl_stmt|;
name|p
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|PRAGMA
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|PRAGMA_END
case|:
block|{
name|c
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|PRAGMA_END
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|Pragma
name|pragma
init|=
name|context
operator|.
name|getPragma
argument_list|(
name|p
operator|.
name|getText
argument_list|()
argument_list|,
name|c
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
name|pragma
operator|!=
literal|null
condition|)
block|{
if|if
condition|(
name|ext
operator|==
literal|null
condition|)
name|ext
operator|=
operator|new
name|ExtensionExpression
argument_list|(
name|context
argument_list|)
expr_stmt|;
name|ext
operator|.
name|addPragma
argument_list|(
name|pragma
argument_list|)
expr_stmt|;
block|}
name|_t
operator|=
name|__t361
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|_cnt363
operator|>=
literal|1
condition|)
block|{
break|break
name|_loop363
break|;
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_cnt363
operator|++
expr_stmt|;
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|expr
argument_list|(
name|_t
argument_list|,
name|pathExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
if|if
condition|(
name|ext
operator|!=
literal|null
condition|)
block|{
name|ext
operator|.
name|setExpression
argument_list|(
name|pathExpr
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|ext
argument_list|)
expr_stmt|;
name|step
operator|=
name|ext
expr_stmt|;
block|}
else|else
block|{
name|path
operator|.
name|add
argument_list|(
name|pathExpr
argument_list|)
expr_stmt|;
name|step
operator|=
name|pathExpr
expr_stmt|;
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
specifier|public
specifier|final
name|Expression
name|numericExpr
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|numericExpr_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|plus
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|minus
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|uminus
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|uplus
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|div
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|idiv
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|mod
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|mult
init|=
literal|null
decl_stmt|;
name|step
operator|=
literal|null
expr_stmt|;
name|PathExpr
name|left
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|PathExpr
name|right
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|PLUS
case|:
block|{
name|AST
name|__t271
init|=
name|_t
decl_stmt|;
name|plus
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|PLUS
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t271
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|OpNumeric
name|op
init|=
operator|new
name|OpNumeric
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|ArithmeticOperator
operator|.
name|ADDITION
argument_list|)
decl_stmt|;
name|op
operator|.
name|setASTNode
argument_list|(
name|plus
argument_list|)
expr_stmt|;
name|path
operator|.
name|addPath
argument_list|(
name|op
argument_list|)
expr_stmt|;
name|step
operator|=
name|op
expr_stmt|;
break|break;
block|}
case|case
name|MINUS
case|:
block|{
name|AST
name|__t272
init|=
name|_t
decl_stmt|;
name|minus
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|MINUS
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t272
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|OpNumeric
name|op
init|=
operator|new
name|OpNumeric
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|ArithmeticOperator
operator|.
name|SUBTRACTION
argument_list|)
decl_stmt|;
name|op
operator|.
name|setASTNode
argument_list|(
name|minus
argument_list|)
expr_stmt|;
name|path
operator|.
name|addPath
argument_list|(
name|op
argument_list|)
expr_stmt|;
name|step
operator|=
name|op
expr_stmt|;
break|break;
block|}
case|case
name|UNARY_MINUS
case|:
block|{
name|AST
name|__t273
init|=
name|_t
decl_stmt|;
name|uminus
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|UNARY_MINUS
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t273
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|UnaryExpr
name|unary
init|=
operator|new
name|UnaryExpr
argument_list|(
name|context
argument_list|,
name|ArithmeticOperator
operator|.
name|SUBTRACTION
argument_list|)
decl_stmt|;
name|unary
operator|.
name|setASTNode
argument_list|(
name|uminus
argument_list|)
expr_stmt|;
name|unary
operator|.
name|add
argument_list|(
name|left
argument_list|)
expr_stmt|;
name|path
operator|.
name|addPath
argument_list|(
name|unary
argument_list|)
expr_stmt|;
name|step
operator|=
name|unary
expr_stmt|;
break|break;
block|}
case|case
name|UNARY_PLUS
case|:
block|{
name|AST
name|__t274
init|=
name|_t
decl_stmt|;
name|uplus
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|UNARY_PLUS
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t274
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|UnaryExpr
name|unary
init|=
operator|new
name|UnaryExpr
argument_list|(
name|context
argument_list|,
name|ArithmeticOperator
operator|.
name|ADDITION
argument_list|)
decl_stmt|;
name|unary
operator|.
name|setASTNode
argument_list|(
name|uplus
argument_list|)
expr_stmt|;
name|unary
operator|.
name|add
argument_list|(
name|left
argument_list|)
expr_stmt|;
name|path
operator|.
name|addPath
argument_list|(
name|unary
argument_list|)
expr_stmt|;
name|step
operator|=
name|unary
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_div
case|:
block|{
name|AST
name|__t275
init|=
name|_t
decl_stmt|;
name|div
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_div
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t275
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|OpNumeric
name|op
init|=
operator|new
name|OpNumeric
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|ArithmeticOperator
operator|.
name|DIVISION
argument_list|)
decl_stmt|;
name|op
operator|.
name|setASTNode
argument_list|(
name|div
argument_list|)
expr_stmt|;
name|path
operator|.
name|addPath
argument_list|(
name|op
argument_list|)
expr_stmt|;
name|step
operator|=
name|op
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_idiv
case|:
block|{
name|AST
name|__t276
init|=
name|_t
decl_stmt|;
name|idiv
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_idiv
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t276
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|OpNumeric
name|op
init|=
operator|new
name|OpNumeric
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|ArithmeticOperator
operator|.
name|DIVISION_INTEGER
argument_list|)
decl_stmt|;
name|op
operator|.
name|setASTNode
argument_list|(
name|idiv
argument_list|)
expr_stmt|;
name|path
operator|.
name|addPath
argument_list|(
name|op
argument_list|)
expr_stmt|;
name|step
operator|=
name|op
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_mod
case|:
block|{
name|AST
name|__t277
init|=
name|_t
decl_stmt|;
name|mod
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_mod
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t277
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|OpNumeric
name|op
init|=
operator|new
name|OpNumeric
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|ArithmeticOperator
operator|.
name|MODULUS
argument_list|)
decl_stmt|;
name|op
operator|.
name|setASTNode
argument_list|(
name|mod
argument_list|)
expr_stmt|;
name|path
operator|.
name|addPath
argument_list|(
name|op
argument_list|)
expr_stmt|;
name|step
operator|=
name|op
expr_stmt|;
break|break;
block|}
case|case
name|STAR
case|:
block|{
name|AST
name|__t278
init|=
name|_t
decl_stmt|;
name|mult
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|STAR
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|left
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|right
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t278
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|OpNumeric
name|op
init|=
operator|new
name|OpNumeric
argument_list|(
name|context
argument_list|,
name|left
argument_list|,
name|right
argument_list|,
name|ArithmeticOperator
operator|.
name|MULTIPLICATION
argument_list|)
decl_stmt|;
name|op
operator|.
name|setASTNode
argument_list|(
name|mult
argument_list|)
expr_stmt|;
name|path
operator|.
name|addPath
argument_list|(
name|op
argument_list|)
expr_stmt|;
name|step
operator|=
name|op
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
specifier|public
specifier|final
name|Expression
name|updateExpr
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|XPathException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|updateExpr_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|updateAST
init|=
literal|null
decl_stmt|;
name|AST
name|__t365
init|=
name|_t
decl_stmt|;
name|updateAST
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_update
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|p1
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|PathExpr
name|p2
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|int
name|type
decl_stmt|;
name|int
name|position
init|=
name|Insert
operator|.
name|INSERT_APPEND
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_replace
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp114_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_replace
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|type
operator|=
literal|0
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_value
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp115_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_value
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|type
operator|=
literal|1
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_insert
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp116_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_insert
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|type
operator|=
literal|2
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_delete
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp117_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_delete
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|type
operator|=
literal|3
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_rename
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp118_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_rename
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|type
operator|=
literal|4
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|p1
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|LITERAL_preceding
operator|)
condition|)
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp119_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_preceding
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|position
operator|=
name|Insert
operator|.
name|INSERT_BEFORE
expr_stmt|;
block|}
if|else if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|LITERAL_following
operator|)
condition|)
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp120_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_following
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|position
operator|=
name|Insert
operator|.
name|INSERT_AFTER
expr_stmt|;
block|}
if|else if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|LITERAL_into
operator|)
condition|)
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp121_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_into
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|position
operator|=
name|Insert
operator|.
name|INSERT_APPEND
expr_stmt|;
block|}
if|else if
condition|(
operator|(
name|_tokenSet_10
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|p2
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|Modification
name|mod
decl_stmt|;
if|if
condition|(
name|type
operator|==
literal|0
condition|)
name|mod
operator|=
operator|new
name|Replace
argument_list|(
name|context
argument_list|,
name|p1
argument_list|,
name|p2
argument_list|)
expr_stmt|;
if|else if
condition|(
name|type
operator|==
literal|1
condition|)
name|mod
operator|=
operator|new
name|Update
argument_list|(
name|context
argument_list|,
name|p1
argument_list|,
name|p2
argument_list|)
expr_stmt|;
if|else if
condition|(
name|type
operator|==
literal|2
condition|)
name|mod
operator|=
operator|new
name|Insert
argument_list|(
name|context
argument_list|,
name|p2
argument_list|,
name|p1
argument_list|,
name|position
argument_list|)
expr_stmt|;
if|else if
condition|(
name|type
operator|==
literal|3
condition|)
name|mod
operator|=
operator|new
name|Delete
argument_list|(
name|context
argument_list|,
name|p1
argument_list|)
expr_stmt|;
else|else
name|mod
operator|=
operator|new
name|Rename
argument_list|(
name|context
argument_list|,
name|p1
argument_list|,
name|p2
argument_list|)
expr_stmt|;
name|mod
operator|.
name|setASTNode
argument_list|(
name|updateAST
argument_list|)
expr_stmt|;
name|path
operator|.
name|add
argument_list|(
name|mod
argument_list|)
expr_stmt|;
name|step
operator|=
name|mod
expr_stmt|;
name|_t
operator|=
name|__t365
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
specifier|public
specifier|final
name|Expression
name|constructor
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|constructor_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|qn
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|qns
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|attr
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|qna
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|pid
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|ex
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|e
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|attrName
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|attrVal
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|pcdata
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|t
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tc
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|d
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|cdata
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|p
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|cdataSect
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|l
init|=
literal|null
decl_stmt|;
name|step
operator|=
literal|null
expr_stmt|;
name|PathExpr
name|elementContent
init|=
literal|null
decl_stmt|;
name|Expression
name|contentExpr
init|=
literal|null
decl_stmt|;
name|Expression
name|qnameExpr
init|=
literal|null
decl_stmt|;
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
block|{
name|AST
name|__t321
init|=
name|_t
decl_stmt|;
name|qn
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|COMP_ELEM_CONSTRUCTOR
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|ElementConstructor
name|c
init|=
operator|new
name|ElementConstructor
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|c
operator|.
name|setASTNode
argument_list|(
name|qn
argument_list|)
expr_stmt|;
name|step
operator|=
name|c
expr_stmt|;
name|SequenceConstructor
name|construct
init|=
operator|new
name|SequenceConstructor
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|EnclosedExpr
name|enclosed
init|=
operator|new
name|EnclosedExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|enclosed
operator|.
name|addPath
argument_list|(
name|construct
argument_list|)
expr_stmt|;
name|c
operator|.
name|setContent
argument_list|(
name|enclosed
argument_list|)
expr_stmt|;
name|PathExpr
name|qnamePathExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|c
operator|.
name|setNameExpr
argument_list|(
name|qnamePathExpr
argument_list|)
expr_stmt|;
name|qnameExpr
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|qnamePathExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|{
name|_loop323
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_0
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|elementContent
operator|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
expr_stmt|;
name|contentExpr
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|elementContent
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|construct
operator|.
name|addPath
argument_list|(
name|elementContent
argument_list|)
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop323
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|_t
operator|=
name|__t321
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|COMP_NS_CONSTRUCTOR
case|:
block|{
name|AST
name|__t324
init|=
name|_t
decl_stmt|;
name|qns
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|COMP_NS_CONSTRUCTOR
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|NamespaceConstructor
name|c
init|=
operator|new
name|NamespaceConstructor
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|c
operator|.
name|setASTNode
argument_list|(
name|qns
argument_list|)
expr_stmt|;
name|step
operator|=
name|c
expr_stmt|;
name|PathExpr
name|qnamePathExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|c
operator|.
name|setNameExpr
argument_list|(
name|qnamePathExpr
argument_list|)
expr_stmt|;
name|elementContent
operator|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
expr_stmt|;
name|c
operator|.
name|setContentExpr
argument_list|(
name|elementContent
argument_list|)
expr_stmt|;
name|qnameExpr
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|qnamePathExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|contentExpr
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|elementContent
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t324
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
block|{
name|AST
name|__t326
init|=
name|_t
decl_stmt|;
name|attr
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|COMP_ATTR_CONSTRUCTOR
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|DynamicAttributeConstructor
name|a
init|=
operator|new
name|DynamicAttributeConstructor
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|a
operator|.
name|setASTNode
argument_list|(
name|attr
argument_list|)
expr_stmt|;
name|step
operator|=
name|a
expr_stmt|;
name|PathExpr
name|qnamePathExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|a
operator|.
name|setNameExpr
argument_list|(
name|qnamePathExpr
argument_list|)
expr_stmt|;
name|elementContent
operator|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
expr_stmt|;
name|a
operator|.
name|setContentExpr
argument_list|(
name|elementContent
argument_list|)
expr_stmt|;
name|qna
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|qnameExpr
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|qnamePathExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
try|try
block|{
name|QName
name|qname
init|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|qna
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
if|if
condition|(
name|Namespaces
operator|.
name|XMLNS_NS
operator|.
name|equals
argument_list|(
name|qname
operator|.
name|getNamespaceURI
argument_list|()
argument_list|)
operator|||
operator|(
literal|""
operator|.
name|equals
argument_list|(
name|qname
operator|.
name|getNamespaceURI
argument_list|()
argument_list|)
operator|&&
name|qname
operator|.
name|getLocalPart
argument_list|()
operator|.
name|equals
argument_list|(
name|XMLConstants
operator|.
name|XMLNS_ATTRIBUTE
argument_list|)
operator|)
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
literal|"err:XQDY0044: the node-name property of the node constructed by a computed attribute constructor is in the namespace http://www.w3.org/2000/xmlns/ (corresponding to namespace prefix xmlns), or is in no namespace and has local name xmlns."
argument_list|)
throw|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|qna
operator|.
name|getLine
argument_list|()
argument_list|,
name|qna
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|qna
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
name|AST
name|__t327
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp122_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LCURLY
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|contentExpr
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|elementContent
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t327
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_t
operator|=
name|__t326
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|COMP_PI_CONSTRUCTOR
case|:
block|{
name|AST
name|__t329
init|=
name|_t
decl_stmt|;
name|pid
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|COMP_PI_CONSTRUCTOR
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|DynamicPIConstructor
name|pd
init|=
operator|new
name|DynamicPIConstructor
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|pd
operator|.
name|setASTNode
argument_list|(
name|pid
argument_list|)
expr_stmt|;
name|step
operator|=
name|pd
expr_stmt|;
name|PathExpr
name|qnamePathExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|pd
operator|.
name|setNameExpr
argument_list|(
name|qnamePathExpr
argument_list|)
expr_stmt|;
name|elementContent
operator|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
expr_stmt|;
name|pd
operator|.
name|setContentExpr
argument_list|(
name|elementContent
argument_list|)
expr_stmt|;
name|qnameExpr
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|qnamePathExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|AST
name|__t330
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp123_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LCURLY
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|ex
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|contentExpr
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|elementContent
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
if|if
condition|(
name|ex
operator|.
name|getText
argument_list|()
operator|!=
literal|null
operator|&&
name|ex
operator|.
name|getText
argument_list|()
operator|.
name|indexOf
argument_list|(
literal|"?>"
argument_list|)
operator|>
name|Constants
operator|.
name|STRING_NOT_FOUND
condition|)
throw|throw
operator|new
name|XPathException
argument_list|(
literal|"err:XQDY0026: content expression of a computed processing instruction constructor contains the string '?>' which is not allowed."
argument_list|)
throw|;
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
name|_t
operator|=
name|__t330
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_t
operator|=
name|__t329
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|ELEMENT
case|:
block|{
name|AST
name|__t332
init|=
name|_t
decl_stmt|;
name|e
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|ELEMENT
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|ElementConstructor
name|c
init|=
operator|new
name|ElementConstructor
argument_list|(
name|context
argument_list|,
name|e
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|c
operator|.
name|setASTNode
argument_list|(
name|e
argument_list|)
expr_stmt|;
name|step
operator|=
name|c
expr_stmt|;
name|staticContext
operator|.
name|pushInScopeNamespaces
argument_list|()
expr_stmt|;
block|{
name|_loop338
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|ATTRIBUTE
operator|)
condition|)
block|{
name|AST
name|__t334
init|=
name|_t
decl_stmt|;
name|attrName
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|ATTRIBUTE
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|AttributeConstructor
name|attrib
init|=
operator|new
name|AttributeConstructor
argument_list|(
name|context
argument_list|,
name|attrName
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|attrib
operator|.
name|setASTNode
argument_list|(
name|attrName
argument_list|)
expr_stmt|;
block|{
name|_loop337
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|ATTRIBUTE_CONTENT
case|:
block|{
name|attrVal
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|ATTRIBUTE_CONTENT
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|attrib
operator|.
name|addValue
argument_list|(
name|StringValue
operator|.
name|expand
argument_list|(
name|attrVal
operator|.
name|getText
argument_list|()
argument_list|)
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|LCURLY
case|:
block|{
name|AST
name|__t336
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp124_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LCURLY
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|enclosed
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|expr
argument_list|(
name|_t
argument_list|,
name|enclosed
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|attrib
operator|.
name|addEnclosedExpr
argument_list|(
name|enclosed
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t336
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
default|default:
block|{
break|break
name|_loop337
break|;
block|}
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|c
operator|.
name|addAttribute
argument_list|(
name|attrib
argument_list|)
expr_stmt|;
if|if
condition|(
name|attrib
operator|.
name|isNamespaceDeclaration
argument_list|()
condition|)
block|{
try|try
block|{
name|String
name|nsPrefix
init|=
name|attrib
operator|.
name|getQName
argument_list|()
operator|.
name|equals
argument_list|(
name|XMLConstants
operator|.
name|XMLNS_ATTRIBUTE
argument_list|)
condition|?
literal|""
else|:
name|QName
operator|.
name|extractLocalName
argument_list|(
name|attrib
operator|.
name|getQName
argument_list|()
argument_list|)
decl_stmt|;
name|staticContext
operator|.
name|declareInScopeNamespace
argument_list|(
name|nsPrefix
argument_list|,
name|attrib
operator|.
name|getLiteralValue
argument_list|()
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|attrib
operator|.
name|getLine
argument_list|()
argument_list|,
name|attrib
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|attrib
operator|.
name|getQName
argument_list|()
argument_list|)
throw|;
block|}
block|}
name|_t
operator|=
name|__t334
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop338
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
block|{
name|_loop340
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_11
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
if|if
condition|(
name|elementContent
operator|==
literal|null
condition|)
block|{
name|elementContent
operator|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
expr_stmt|;
name|c
operator|.
name|setContent
argument_list|(
name|elementContent
argument_list|)
expr_stmt|;
block|}
name|contentExpr
operator|=
name|constructor
argument_list|(
name|_t
argument_list|,
name|elementContent
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|elementContent
operator|.
name|add
argument_list|(
name|contentExpr
argument_list|)
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop340
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|staticContext
operator|.
name|popInScopeNamespaces
argument_list|()
expr_stmt|;
name|_t
operator|=
name|__t332
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|TEXT
case|:
block|{
name|AST
name|__t341
init|=
name|_t
decl_stmt|;
name|pcdata
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|TEXT
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|TextConstructor
name|text
init|=
operator|new
name|TextConstructor
argument_list|(
name|context
argument_list|,
name|pcdata
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|text
operator|.
name|setASTNode
argument_list|(
name|pcdata
argument_list|)
expr_stmt|;
name|step
operator|=
name|text
expr_stmt|;
name|_t
operator|=
name|__t341
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
block|{
name|AST
name|__t342
init|=
name|_t
decl_stmt|;
name|t
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|COMP_TEXT_CONSTRUCTOR
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|elementContent
operator|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
expr_stmt|;
name|DynamicTextConstructor
name|text
init|=
operator|new
name|DynamicTextConstructor
argument_list|(
name|context
argument_list|,
name|elementContent
argument_list|)
decl_stmt|;
name|text
operator|.
name|setASTNode
argument_list|(
name|t
argument_list|)
expr_stmt|;
name|step
operator|=
name|text
expr_stmt|;
name|contentExpr
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|elementContent
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t342
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
block|{
name|AST
name|__t343
init|=
name|_t
decl_stmt|;
name|tc
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|COMP_COMMENT_CONSTRUCTOR
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|elementContent
operator|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
expr_stmt|;
name|DynamicCommentConstructor
name|comment
init|=
operator|new
name|DynamicCommentConstructor
argument_list|(
name|context
argument_list|,
name|elementContent
argument_list|)
decl_stmt|;
name|comment
operator|.
name|setASTNode
argument_list|(
name|t
argument_list|)
expr_stmt|;
name|step
operator|=
name|comment
expr_stmt|;
name|contentExpr
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|elementContent
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t343
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
block|{
name|AST
name|__t344
init|=
name|_t
decl_stmt|;
name|d
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|COMP_DOC_CONSTRUCTOR
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|elementContent
operator|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
expr_stmt|;
name|DocumentConstructor
name|doc
init|=
operator|new
name|DocumentConstructor
argument_list|(
name|context
argument_list|,
name|elementContent
argument_list|)
decl_stmt|;
name|doc
operator|.
name|setASTNode
argument_list|(
name|d
argument_list|)
expr_stmt|;
name|step
operator|=
name|doc
expr_stmt|;
name|contentExpr
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|elementContent
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|_t
operator|=
name|__t344
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|XML_COMMENT
case|:
block|{
name|AST
name|__t345
init|=
name|_t
decl_stmt|;
name|cdata
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|XML_COMMENT
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|CommentConstructor
name|comment
init|=
operator|new
name|CommentConstructor
argument_list|(
name|context
argument_list|,
name|cdata
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|comment
operator|.
name|setASTNode
argument_list|(
name|cdata
argument_list|)
expr_stmt|;
name|step
operator|=
name|comment
expr_stmt|;
name|_t
operator|=
name|__t345
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|XML_PI
case|:
block|{
name|AST
name|__t346
init|=
name|_t
decl_stmt|;
name|p
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|XML_PI
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PIConstructor
name|pi
init|=
operator|new
name|PIConstructor
argument_list|(
name|context
argument_list|,
name|p
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|pi
operator|.
name|setASTNode
argument_list|(
name|p
argument_list|)
expr_stmt|;
name|step
operator|=
name|pi
expr_stmt|;
name|_t
operator|=
name|__t346
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|XML_CDATA
case|:
block|{
name|AST
name|__t347
init|=
name|_t
decl_stmt|;
name|cdataSect
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|XML_CDATA
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|CDATAConstructor
name|cd
init|=
operator|new
name|CDATAConstructor
argument_list|(
name|context
argument_list|,
name|cdataSect
operator|.
name|getText
argument_list|()
argument_list|)
decl_stmt|;
name|cd
operator|.
name|setASTNode
argument_list|(
name|cdataSect
argument_list|)
expr_stmt|;
name|step
operator|=
name|cd
expr_stmt|;
name|_t
operator|=
name|__t347
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|LCURLY
case|:
block|{
name|AST
name|__t348
init|=
name|_t
decl_stmt|;
name|l
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LCURLY
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|EnclosedExpr
name|subexpr
init|=
operator|new
name|EnclosedExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|subexpr
operator|.
name|setASTNode
argument_list|(
name|l
argument_list|)
expr_stmt|;
name|step
operator|=
name|expr
argument_list|(
name|_t
argument_list|,
name|subexpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|step
operator|=
name|subexpr
expr_stmt|;
name|_t
operator|=
name|__t348
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
comment|/**  * Handles predicates and dynamic function calls:  * PostfixExpr	   ::=   	PrimaryExpr (Predicate | ArgumentList)*  */
specifier|public
specifier|final
name|Expression
name|postfixExpr
parameter_list|(
name|AST
name|_t
parameter_list|,
name|Expression
name|expression
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|postfixExpr_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|fn
init|=
literal|null
decl_stmt|;
name|step
operator|=
name|expression
expr_stmt|;
block|{
name|_loop286
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|PREDICATE
case|:
block|{
name|AST
name|__t281
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp125_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|PREDICATE
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|FilteredExpression
name|filter
init|=
operator|new
name|FilteredExpression
argument_list|(
name|context
argument_list|,
name|step
argument_list|)
decl_stmt|;
name|step
operator|=
name|filter
expr_stmt|;
name|Predicate
name|predicateExpr
init|=
operator|new
name|Predicate
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|expr
argument_list|(
name|_t
argument_list|,
name|predicateExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|filter
operator|.
name|addPredicate
argument_list|(
name|predicateExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t281
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
case|case
name|DYNAMIC_FCALL
case|:
block|{
name|AST
name|__t282
init|=
name|_t
decl_stmt|;
name|fn
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|DYNAMIC_FCALL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|List
argument_list|<
name|Expression
argument_list|>
name|params
init|=
operator|new
name|ArrayList
argument_list|<
name|Expression
argument_list|>
argument_list|(
literal|5
argument_list|)
decl_stmt|;
name|boolean
name|isPartial
init|=
literal|false
decl_stmt|;
block|{
name|_loop285
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_12
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|QUESTION
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp126_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|QUESTION
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|params
operator|.
name|add
argument_list|(
operator|new
name|Function
operator|.
name|Placeholder
argument_list|(
name|context
argument_list|)
argument_list|)
expr_stmt|;
name|isPartial
operator|=
literal|true
expr_stmt|;
break|break;
block|}
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|PathExpr
name|pathExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|expr
argument_list|(
name|_t
argument_list|,
name|pathExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|params
operator|.
name|add
argument_list|(
name|pathExpr
argument_list|)
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
block|}
else|else
block|{
break|break
name|_loop285
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|step
operator|=
operator|new
name|DynamicFunctionCall
argument_list|(
name|context
argument_list|,
name|step
argument_list|,
name|params
argument_list|,
name|isPartial
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t282
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
break|break;
block|}
default|default:
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|LOOKUP
operator|)
condition|)
block|{
name|step
operator|=
name|lookup
argument_list|(
name|_t
argument_list|,
name|step
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop286
break|;
block|}
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
specifier|public
specifier|final
name|Expression
name|mapConstr
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|XPathException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|mapConstr_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|t
init|=
literal|null
decl_stmt|;
name|AST
name|__t370
init|=
name|_t
decl_stmt|;
name|t
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|MAP
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|MapExpr
name|expr
init|=
operator|new
name|MapExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|step
operator|=
name|expr
expr_stmt|;
block|{
name|_loop373
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_t
operator|.
name|getType
argument_list|()
operator|==
name|COLON
operator|)
condition|)
block|{
name|AST
name|__t372
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp127_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|COLON
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|key
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|PathExpr
name|value
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|expr
argument_list|(
name|_t
argument_list|,
name|key
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|expr
argument_list|(
name|_t
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|expr
operator|.
name|map
argument_list|(
name|key
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t372
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop373
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|_t
operator|=
name|__t370
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
specifier|public
specifier|final
name|Expression
name|arrayConstr
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|XPathException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|arrayConstr_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|t
init|=
literal|null
decl_stmt|;
name|AST
name|__t375
init|=
name|_t
decl_stmt|;
name|t
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|ARRAY
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|String
name|type
init|=
name|t
operator|.
name|getText
argument_list|()
decl_stmt|;
name|ArrayConstructor
name|array
decl_stmt|;
if|if
condition|(
name|type
operator|.
name|equals
argument_list|(
literal|"["
argument_list|)
condition|)
block|{
name|array
operator|=
operator|new
name|ArrayConstructor
argument_list|(
name|context
argument_list|,
name|ArrayConstructor
operator|.
name|ConstructorType
operator|.
name|SQUARE_ARRAY
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|array
operator|=
operator|new
name|ArrayConstructor
argument_list|(
name|context
argument_list|,
name|ArrayConstructor
operator|.
name|ConstructorType
operator|.
name|CURLY_ARRAY
argument_list|)
expr_stmt|;
block|}
name|step
operator|=
name|array
expr_stmt|;
block|{
name|_loop377
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_0
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|PathExpr
name|arg
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|expr
argument_list|(
name|_t
argument_list|,
name|arg
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|array
operator|.
name|addArgument
argument_list|(
name|arg
argument_list|)
expr_stmt|;
block|}
else|else
block|{
break|break
name|_loop377
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|_t
operator|=
name|__t375
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
specifier|public
specifier|final
name|Expression
name|functionCall
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|functionCall_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|fn
init|=
literal|null
decl_stmt|;
name|PathExpr
name|pathExpr
decl_stmt|;
name|step
operator|=
literal|null
expr_stmt|;
name|boolean
name|isPartial
init|=
literal|false
decl_stmt|;
name|AST
name|__t295
init|=
name|_t
decl_stmt|;
name|fn
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|FUNCTION
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|List
name|params
init|=
operator|new
name|ArrayList
argument_list|(
literal|2
argument_list|)
decl_stmt|;
block|{
name|_loop298
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_12
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|pathExpr
operator|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
expr_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|QUESTION
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp128_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|QUESTION
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|params
operator|.
name|add
argument_list|(
operator|new
name|Function
operator|.
name|Placeholder
argument_list|(
name|context
argument_list|)
argument_list|)
expr_stmt|;
name|isPartial
operator|=
literal|true
expr_stmt|;
break|break;
block|}
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
name|expr
argument_list|(
name|_t
argument_list|,
name|pathExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|params
operator|.
name|add
argument_list|(
name|pathExpr
argument_list|)
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
block|}
else|else
block|{
break|break
name|_loop298
break|;
block|}
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
name|_t
operator|=
name|__t295
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|step
operator|=
name|FunctionFactory
operator|.
name|createFunction
argument_list|(
name|context
argument_list|,
name|fn
argument_list|,
name|path
argument_list|,
name|params
argument_list|)
expr_stmt|;
if|if
condition|(
name|isPartial
condition|)
block|{
if|if
condition|(
operator|!
operator|(
name|step
operator|instanceof
name|FunctionCall
operator|)
condition|)
block|{
if|if
condition|(
name|step
operator|instanceof
name|CastExpression
condition|)
block|{
name|step
operator|=
operator|(
operator|(
name|CastExpression
operator|)
name|step
operator|)
operator|.
name|toFunction
argument_list|()
expr_stmt|;
block|}
name|step
operator|=
name|FunctionFactory
operator|.
name|wrap
argument_list|(
name|context
argument_list|,
operator|(
name|Function
operator|)
name|step
argument_list|)
expr_stmt|;
block|}
name|step
operator|=
operator|new
name|PartialFunctionApplication
argument_list|(
name|context
argument_list|,
operator|(
name|FunctionCall
operator|)
name|step
argument_list|)
expr_stmt|;
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
specifier|public
specifier|final
name|Expression
name|functionReference
parameter_list|(
name|AST
name|_t
parameter_list|,
name|PathExpr
name|path
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|functionReference_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|name
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|arity
init|=
literal|null
decl_stmt|;
name|step
operator|=
literal|null
expr_stmt|;
name|AST
name|__t300
init|=
name|_t
decl_stmt|;
name|name
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|HASH
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|arity
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|INTEGER_LITERAL
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|QName
name|qname
decl_stmt|;
try|try
block|{
name|qname
operator|=
name|QName
operator|.
name|parse
argument_list|(
name|staticContext
argument_list|,
name|name
operator|.
name|getText
argument_list|()
argument_list|,
name|staticContext
operator|.
name|getDefaultFunctionNamespace
argument_list|()
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalQNameException
name|iqe
parameter_list|)
block|{
throw|throw
operator|new
name|XPathException
argument_list|(
name|name
operator|.
name|getLine
argument_list|()
argument_list|,
name|name
operator|.
name|getColumn
argument_list|()
argument_list|,
name|ErrorCodes
operator|.
name|XPST0081
argument_list|,
literal|"No namespace defined for prefix "
operator|+
name|name
operator|.
name|getText
argument_list|()
argument_list|)
throw|;
block|}
name|NamedFunctionReference
name|ref
init|=
operator|new
name|NamedFunctionReference
argument_list|(
name|context
argument_list|,
name|qname
argument_list|,
name|Integer
operator|.
name|parseInt
argument_list|(
name|arity
operator|.
name|getText
argument_list|()
argument_list|)
argument_list|)
decl_stmt|;
name|step
operator|=
name|ref
expr_stmt|;
name|_t
operator|=
name|__t300
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
specifier|public
specifier|final
name|Expression
name|lookup
parameter_list|(
name|AST
name|_t
parameter_list|,
name|Expression
name|leftExpr
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|Expression
name|step
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|lookup_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|lookup
init|=
literal|null
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|pos
init|=
literal|null
decl_stmt|;
name|AST
name|__t290
init|=
name|_t
decl_stmt|;
name|lookup
operator|=
name|_t
operator|==
name|ASTNULL
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LOOKUP
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|lookupExpr
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|int
name|position
init|=
literal|0
decl_stmt|;
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|INTEGER_VALUE
case|:
block|{
name|pos
operator|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
expr_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|INTEGER_VALUE
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|position
operator|=
name|Integer
operator|.
name|parseInt
argument_list|(
name|pos
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|EOF
case|:
case|case
name|EQNAME
case|:
case|case
name|PARENTHESIZED
case|:
case|case
name|ABSOLUTE_SLASH
case|:
case|case
name|ABSOLUTE_DSLASH
case|:
case|case
name|WILDCARD
case|:
case|case
name|PREFIX_WILDCARD
case|:
case|case
name|FUNCTION
case|:
case|case
name|UNARY_MINUS
case|:
case|case
name|UNARY_PLUS
case|:
case|case
name|VARIABLE_REF
case|:
case|case
name|ELEMENT
case|:
case|case
name|TEXT
case|:
case|case
name|INLINE_FUNCTION_DECL
case|:
case|case
name|MAP
case|:
case|case
name|LOOKUP
case|:
case|case
name|ARRAY
case|:
case|case
name|ATTRIBUTE_TEST
case|:
case|case
name|COMP_ELEM_CONSTRUCTOR
case|:
case|case
name|COMP_ATTR_CONSTRUCTOR
case|:
case|case
name|COMP_TEXT_CONSTRUCTOR
case|:
case|case
name|COMP_COMMENT_CONSTRUCTOR
case|:
case|case
name|COMP_PI_CONSTRUCTOR
case|:
case|case
name|COMP_NS_CONSTRUCTOR
case|:
case|case
name|COMP_DOC_CONSTRUCTOR
case|:
case|case
name|PRAGMA
case|:
case|case
name|GTEQ
case|:
case|case
name|SEQUENCE
case|:
case|case
name|NCNAME
case|:
case|case
name|EQ
case|:
case|case
name|STRING_LITERAL
case|:
case|case
name|LITERAL_element
case|:
case|case
name|COMMA
case|:
case|case
name|LCURLY
case|:
case|case
name|STAR
case|:
case|case
name|PLUS
case|:
case|case
name|LITERAL_try
case|:
case|case
name|LITERAL_some
case|:
case|case
name|LITERAL_every
case|:
case|case
name|LITERAL_if
case|:
case|case
name|LITERAL_switch
case|:
case|case
name|LITERAL_typeswitch
case|:
case|case
name|LITERAL_update
case|:
case|case
name|LITERAL_preceding
case|:
case|case
name|LITERAL_following
case|:
case|case
name|UNION
case|:
case|case
name|LITERAL_return
case|:
case|case
name|LITERAL_or
case|:
case|case
name|LITERAL_and
case|:
case|case
name|LITERAL_instance
case|:
case|case
name|LITERAL_treat
case|:
case|case
name|LITERAL_castable
case|:
case|case
name|LITERAL_cast
case|:
case|case
name|BEFORE
case|:
case|case
name|AFTER
case|:
case|case
name|LITERAL_eq
case|:
case|case
name|LITERAL_ne
case|:
case|case
name|LITERAL_lt
case|:
case|case
name|LITERAL_le
case|:
case|case
name|LITERAL_gt
case|:
case|case
name|LITERAL_ge
case|:
case|case
name|GT
case|:
case|case
name|NEQ
case|:
case|case
name|LT
case|:
case|case
name|LTEQ
case|:
case|case
name|LITERAL_is
case|:
case|case
name|CONCAT
case|:
case|case
name|LITERAL_to
case|:
case|case
name|MINUS
case|:
case|case
name|LITERAL_div
case|:
case|case
name|LITERAL_idiv
case|:
case|case
name|LITERAL_mod
case|:
case|case
name|BANG
case|:
case|case
name|LITERAL_intersect
case|:
case|case
name|LITERAL_except
case|:
case|case
name|SLASH
case|:
case|case
name|DSLASH
case|:
case|case
name|LITERAL_text
case|:
case|case
name|LITERAL_node
case|:
case|case
name|LITERAL_attribute
case|:
case|case
name|LITERAL_comment
case|:
case|case
literal|193
case|:
case|case
literal|194
case|:
case|case
literal|195
case|:
case|case
name|HASH
case|:
case|case
name|SELF
case|:
case|case
name|XML_COMMENT
case|:
case|case
name|XML_PI
case|:
case|case
name|STRING_CONSTRUCTOR_START
case|:
case|case
name|AT
case|:
case|case
name|PARENT
case|:
case|case
name|LITERAL_child
case|:
case|case
name|LITERAL_self
case|:
case|case
name|LITERAL_descendant
case|:
case|case
literal|209
case|:
case|case
literal|210
case|:
case|case
name|LITERAL_parent
case|:
case|case
name|LITERAL_ancestor
case|:
case|case
literal|213
case|:
case|case
literal|214
case|:
case|case
name|ARROW_OP
case|:
case|case
name|INTEGER_LITERAL
case|:
case|case
name|DOUBLE_LITERAL
case|:
case|case
name|DECIMAL_LITERAL
case|:
case|case
name|XML_CDATA
case|:
block|{
block|{
name|int
name|_cnt293
init|=
literal|0
decl_stmt|;
name|_loop293
label|:
do|do
block|{
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
if|if
condition|(
operator|(
name|_tokenSet_0
operator|.
name|member
argument_list|(
name|_t
operator|.
name|getType
argument_list|()
argument_list|)
operator|)
condition|)
block|{
name|expr
argument_list|(
name|_t
argument_list|,
name|lookupExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|_cnt293
operator|>=
literal|1
condition|)
block|{
break|break
name|_loop293
break|;
block|}
else|else
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_cnt293
operator|++
expr_stmt|;
block|}
do|while
condition|(
literal|true
condition|)
do|;
block|}
break|break;
block|}
case|case
literal|3
case|:
block|{
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
block|}
if|if
condition|(
name|lookupExpr
operator|.
name|getLength
argument_list|()
operator|==
literal|0
condition|)
block|{
if|if
condition|(
name|lookup
operator|.
name|getText
argument_list|()
operator|.
name|equals
argument_list|(
literal|"?*"
argument_list|)
condition|)
block|{
name|step
operator|=
operator|new
name|Lookup
argument_list|(
name|context
argument_list|,
name|leftExpr
argument_list|)
expr_stmt|;
block|}
if|else if
condition|(
name|position
operator|==
literal|0
condition|)
block|{
name|step
operator|=
operator|new
name|Lookup
argument_list|(
name|context
argument_list|,
name|leftExpr
argument_list|,
name|lookup
operator|.
name|getText
argument_list|()
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|step
operator|=
operator|new
name|Lookup
argument_list|(
name|context
argument_list|,
name|leftExpr
argument_list|,
name|position
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|step
operator|=
operator|new
name|Lookup
argument_list|(
name|context
argument_list|,
name|leftExpr
argument_list|,
name|lookupExpr
argument_list|)
expr_stmt|;
block|}
name|step
operator|.
name|setASTNode
argument_list|(
name|lookup
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t290
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|step
return|;
block|}
specifier|public
specifier|final
name|int
name|forwardAxis
parameter_list|(
name|AST
name|_t
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
block|{
name|int
name|axis
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|forwardAxis_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|axis
operator|=
name|Constants
operator|.
name|UNKNOWN_AXIS
expr_stmt|;
if|if
condition|(
name|_t
operator|==
literal|null
condition|)
name|_t
operator|=
name|ASTNULL
expr_stmt|;
switch|switch
condition|(
name|_t
operator|.
name|getType
argument_list|()
condition|)
block|{
case|case
name|LITERAL_child
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp129_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_child
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|axis
operator|=
name|Constants
operator|.
name|CHILD_AXIS
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_attribute
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp130_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_attribute
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|axis
operator|=
name|Constants
operator|.
name|ATTRIBUTE_AXIS
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_self
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp131_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_self
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|axis
operator|=
name|Constants
operator|.
name|SELF_AXIS
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_parent
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp132_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_parent
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|axis
operator|=
name|Constants
operator|.
name|PARENT_AXIS
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_descendant
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp133_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_descendant
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|axis
operator|=
name|Constants
operator|.
name|DESCENDANT_AXIS
expr_stmt|;
break|break;
block|}
case|case
literal|209
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp134_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|209
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|axis
operator|=
name|Constants
operator|.
name|DESCENDANT_SELF_AXIS
expr_stmt|;
break|break;
block|}
case|case
literal|210
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp135_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|210
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|axis
operator|=
name|Constants
operator|.
name|FOLLOWING_SIBLING_AXIS
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_following
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp136_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_following
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|axis
operator|=
name|Constants
operator|.
name|FOLLOWING_AXIS
expr_stmt|;
break|break;
block|}
case|case
literal|214
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp137_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|214
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|axis
operator|=
name|Constants
operator|.
name|PRECEDING_SIBLING_AXIS
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_preceding
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp138_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_preceding
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|axis
operator|=
name|Constants
operator|.
name|PRECEDING_AXIS
expr_stmt|;
break|break;
block|}
case|case
name|LITERAL_ancestor
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp139_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|LITERAL_ancestor
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|axis
operator|=
name|Constants
operator|.
name|ANCESTOR_AXIS
expr_stmt|;
break|break;
block|}
case|case
literal|213
case|:
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp140_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
literal|213
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|axis
operator|=
name|Constants
operator|.
name|ANCESTOR_SELF_AXIS
expr_stmt|;
break|break;
block|}
default|default:
block|{
throw|throw
operator|new
name|NoViableAltException
argument_list|(
name|_t
argument_list|)
throw|;
block|}
block|}
name|_retTree
operator|=
name|_t
expr_stmt|;
return|return
name|axis
return|;
block|}
specifier|public
specifier|final
name|void
name|predicate
parameter_list|(
name|AST
name|_t
parameter_list|,
name|LocationStep
name|step
parameter_list|)
throws|throws
name|RecognitionException
throws|,
name|PermissionDeniedException
throws|,
name|EXistException
throws|,
name|XPathException
block|{
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|predicate_AST_in
init|=
operator|(
name|_t
operator|==
name|ASTNULL
operator|)
condition|?
literal|null
else|:
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|AST
name|__t288
init|=
name|_t
decl_stmt|;
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
name|tmp141_AST_in
init|=
operator|(
name|org
operator|.
name|exist
operator|.
name|xquery
operator|.
name|parser
operator|.
name|XQueryAST
operator|)
name|_t
decl_stmt|;
name|match
argument_list|(
name|_t
argument_list|,
name|PREDICATE
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getFirstChild
argument_list|()
expr_stmt|;
name|PathExpr
name|path
init|=
operator|new
name|PathExpr
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|expr
argument_list|(
name|_t
argument_list|,
name|path
argument_list|)
expr_stmt|;
name|_t
operator|=
name|_retTree
expr_stmt|;
name|Predicate
name|predicateExpr
init|=
operator|new
name|Predicate
argument_list|(
name|context
argument_list|)
decl_stmt|;
name|predicateExpr
operator|.
name|addPath
argument_list|(
name|path
argument_list|)
expr_stmt|;
name|step
operator|.
name|addPredicate
argument_list|(
name|predicateExpr
argument_list|)
expr_stmt|;
name|_t
operator|=
name|__t288
expr_stmt|;
name|_t
operator|=
name|_t
operator|.
name|getNextSibling
argument_list|()
expr_stmt|;
name|_retTree
operator|=
name|_t
expr_stmt|;
block|}
specifier|public
specifier|static
specifier|final
name|String
index|[]
name|_tokenNames
init|=
block|{
literal|"<0>"
block|,
literal|"EOF"
block|,
literal|"<2>"
block|,
literal|"NULL_TREE_LOOKAHEAD"
block|,
literal|"QNAME"
block|,
literal|"EQNAME"
block|,
literal|"PREDICATE"
block|,
literal|"FLWOR"
block|,
literal|"PARENTHESIZED"
block|,
literal|"ABSOLUTE_SLASH"
block|,
literal|"ABSOLUTE_DSLASH"
block|,
literal|"WILDCARD"
block|,
literal|"PREFIX_WILDCARD"
block|,
literal|"FUNCTION"
block|,
literal|"DYNAMIC_FCALL"
block|,
literal|"UNARY_MINUS"
block|,
literal|"UNARY_PLUS"
block|,
literal|"XPOINTER"
block|,
literal|"XPOINTER_ID"
block|,
literal|"VARIABLE_REF"
block|,
literal|"VARIABLE_BINDING"
block|,
literal|"ELEMENT"
block|,
literal|"ATTRIBUTE"
block|,
literal|"ATTRIBUTE_CONTENT"
block|,
literal|"TEXT"
block|,
literal|"VERSION_DECL"
block|,
literal|"NAMESPACE_DECL"
block|,
literal|"DEF_NAMESPACE_DECL"
block|,
literal|"DEF_COLLATION_DECL"
block|,
literal|"DEF_FUNCTION_NS_DECL"
block|,
literal|"CONTEXT_ITEM_DECL"
block|,
literal|"ANNOT_DECL"
block|,
literal|"GLOBAL_VAR"
block|,
literal|"FUNCTION_DECL"
block|,
literal|"INLINE_FUNCTION_DECL"
block|,
literal|"FUNCTION_INLINE"
block|,
literal|"FUNCTION_TEST"
block|,
literal|"MAP"
block|,
literal|"MAP_TEST"
block|,
literal|"LOOKUP"
block|,
literal|"ARRAY"
block|,
literal|"ARRAY_TEST"
block|,
literal|"PROLOG"
block|,
literal|"OPTION"
block|,
literal|"ATOMIC_TYPE"
block|,
literal|"MODULE"
block|,
literal|"ORDER_BY"
block|,
literal|"GROUP_BY"
block|,
literal|"POSITIONAL_VAR"
block|,
literal|"CATCH_ERROR_CODE"
block|,
literal|"CATCH_ERROR_DESC"
block|,
literal|"CATCH_ERROR_VAL"
block|,
literal|"MODULE_DECL"
block|,
literal|"MODULE_IMPORT"
block|,
literal|"SCHEMA_IMPORT"
block|,
literal|"ATTRIBUTE_TEST"
block|,
literal|"COMP_ELEM_CONSTRUCTOR"
block|,
literal|"COMP_ATTR_CONSTRUCTOR"
block|,
literal|"COMP_TEXT_CONSTRUCTOR"
block|,
literal|"COMP_COMMENT_CONSTRUCTOR"
block|,
literal|"COMP_PI_CONSTRUCTOR"
block|,
literal|"COMP_NS_CONSTRUCTOR"
block|,
literal|"COMP_DOC_CONSTRUCTOR"
block|,
literal|"PRAGMA"
block|,
literal|"GTEQ"
block|,
literal|"SEQUENCE"
block|,
literal|"\"xpointer\""
block|,
literal|"opening parenthesis '('"
block|,
literal|"closing parenthesis ')'"
block|,
literal|"name"
block|,
literal|"\"xquery\""
block|,
literal|"\"version\""
block|,
literal|"semicolon ';'"
block|,
literal|"\"module\""
block|,
literal|"\"namespace\""
block|,
literal|"="
block|,
literal|"string literal"
block|,
literal|"\"declare\""
block|,
literal|"\"default\""
block|,
literal|"\"boundary-space\""
block|,
literal|"\"ordering\""
block|,
literal|"\"construction\""
block|,
literal|"\"base-uri\""
block|,
literal|"\"copy-namespaces\""
block|,
literal|"\"option\""
block|,
literal|"\"function\""
block|,
literal|"\"variable\""
block|,
literal|"\"context\""
block|,
literal|"\"item\""
block|,
literal|"MOD"
block|,
literal|"\"import\""
block|,
literal|"\"encoding\""
block|,
literal|"\"collation\""
block|,
literal|"\"element\""
block|,
literal|"\"order\""
block|,
literal|"\"empty\""
block|,
literal|"\"greatest\""
block|,
literal|"\"least\""
block|,
literal|"\"preserve\""
block|,
literal|"\"strip\""
block|,
literal|"\"ordered\""
block|,
literal|"\"unordered\""
block|,
literal|"COMMA"
block|,
literal|"\"no-preserve\""
block|,
literal|"\"inherit\""
block|,
literal|"\"no-inherit\""
block|,
literal|"dollar sign '$'"
block|,
literal|"\"external\""
block|,
literal|"COLON"
block|,
literal|"opening curly brace '{'"
block|,
literal|"closing curly brace '}'"
block|,
literal|"\"schema\""
block|,
literal|"braced uri literal"
block|,
literal|"\"as\""
block|,
literal|"\"at\""
block|,
literal|"\"empty-sequence\""
block|,
literal|"question mark '?'"
block|,
literal|"wildcard '*'"
block|,
literal|"+"
block|,
literal|"\"map\""
block|,
literal|"\"array\""
block|,
literal|"\"for\""
block|,
literal|"\"let\""
block|,
literal|"\"try\""
block|,
literal|"\"some\""
block|,
literal|"\"every\""
block|,
literal|"\"if\""
block|,
literal|"\"switch\""
block|,
literal|"\"typeswitch\""
block|,
literal|"\"update\""
block|,
literal|"\"replace\""
block|,
literal|"\"value\""
block|,
literal|"\"insert\""
block|,
literal|"\"delete\""
block|,
literal|"\"rename\""
block|,
literal|"\"with\""
block|,
literal|"\"into\""
block|,
literal|"\"preceding\""
block|,
literal|"\"following\""
block|,
literal|"\"catch\""
block|,
literal|"union"
block|,
literal|"\"return\""
block|,
literal|"\"where\""
block|,
literal|"\"in\""
block|,
literal|"\"allowing\""
block|,
literal|"\"by\""
block|,
literal|"\"stable\""
block|,
literal|"\"ascending\""
block|,
literal|"\"descending\""
block|,
literal|"\"group\""
block|,
literal|"\"satisfies\""
block|,
literal|"\"case\""
block|,
literal|"\"then\""
block|,
literal|"\"else\""
block|,
literal|"\"or\""
block|,
literal|"\"and\""
block|,
literal|"\"instance\""
block|,
literal|"\"of\""
block|,
literal|"\"treat\""
block|,
literal|"\"castable\""
block|,
literal|"\"cast\""
block|,
literal|"BEFORE"
block|,
literal|"AFTER"
block|,
literal|"\"eq\""
block|,
literal|"\"ne\""
block|,
literal|"\"lt\""
block|,
literal|"\"le\""
block|,
literal|"\"gt\""
block|,
literal|"\"ge\""
block|,
literal|">"
block|,
literal|"!="
block|,
literal|"<"
block|,
literal|"<="
block|,
literal|"\"is\""
block|,
literal|"\"isnot\""
block|,
literal|"||"
block|,
literal|"\"to\""
block|,
literal|"-"
block|,
literal|"\"div\""
block|,
literal|"\"idiv\""
block|,
literal|"\"mod\""
block|,
literal|"BANG"
block|,
literal|"PRAGMA_START"
block|,
literal|"pragma expression"
block|,
literal|"\"union\""
block|,
literal|"\"intersect\""
block|,
literal|"\"except\""
block|,
literal|"single slash '/'"
block|,
literal|"double slash '//'"
block|,
literal|"\"text\""
block|,
literal|"\"node\""
block|,
literal|"\"attribute\""
block|,
literal|"\"comment\""
block|,
literal|"\"namespace-node\""
block|,
literal|"\"processing-instruction\""
block|,
literal|"\"document-node\""
block|,
literal|"\"document\""
block|,
literal|"HASH"
block|,
literal|"."
block|,
literal|"XML comment"
block|,
literal|"processing instruction"
block|,
literal|"opening brace '['"
block|,
literal|"start of string constructor"
block|,
literal|"closing brace ']'"
block|,
literal|"@ char"
block|,
literal|".."
block|,
literal|"\"child\""
block|,
literal|"\"self\""
block|,
literal|"\"descendant\""
block|,
literal|"\"descendant-or-self\""
block|,
literal|"\"following-sibling\""
block|,
literal|"\"parent\""
block|,
literal|"\"ancestor\""
block|,
literal|"\"ancestor-or-self\""
block|,
literal|"\"preceding-sibling\""
block|,
literal|"arrow operator"
block|,
literal|"INTEGER_LITERAL"
block|,
literal|"start of string constructor"
block|,
literal|"string constructor content"
block|,
literal|"start of interpolated expression"
block|,
literal|"end of interpolated expression"
block|,
literal|"DOUBLE_LITERAL"
block|,
literal|"DECIMAL_LITERAL"
block|,
literal|"\"schema-element\""
block|,
literal|"XML end tag"
block|,
literal|"double quote '\\\"'"
block|,
literal|"single quote '"
block|,
literal|"QUOT_ATTRIBUTE_CONTENT"
block|,
literal|"ESCAPE_QUOT"
block|,
literal|"APOS_ATTRIBUTE_CONTENT"
block|,
literal|"ESCAPE_APOS"
block|,
literal|"ELEMENT_CONTENT"
block|,
literal|"end of XML comment"
block|,
literal|"end of processing instruction"
block|,
literal|"CDATA section"
block|,
literal|"\"collection\""
block|,
literal|"\"validate\""
block|,
literal|"start of processing instruction"
block|,
literal|"CDATA section start"
block|,
literal|"end of CDATA section"
block|,
literal|"LETTER"
block|,
literal|"DIGITS"
block|,
literal|"HEX_DIGITS"
block|,
literal|"NMSTART"
block|,
literal|"NMCHAR"
block|,
literal|"WS"
block|,
literal|"XQuery XQDoc comment"
block|,
literal|"XQuery comment"
block|,
literal|"PREDEFINED_ENTITY_REF"
block|,
literal|"CHAR_REF"
block|,
literal|"S"
block|,
literal|"NEXT_TOKEN"
block|,
literal|"CHAR"
block|,
literal|"BASECHAR"
block|,
literal|"IDEOGRAPHIC"
block|,
literal|"COMBINING_CHAR"
block|,
literal|"DIGIT"
block|,
literal|"EXTENDER"
block|,
literal|"INTEGER_VALUE"
block|}
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|long
index|[]
name|mk_tokenSet_0
parameter_list|()
block|{
name|long
index|[]
name|data
init|=
operator|new
name|long
index|[
literal|8
index|]
decl_stmt|;
name|data
index|[
literal|0
index|]
operator|=
operator|-
literal|36026993113186526L
expr_stmt|;
name|data
index|[
literal|1
index|]
operator|=
operator|-
literal|549403694752327645L
expr_stmt|;
name|data
index|[
literal|2
index|]
operator|=
operator|-
literal|126171158914517501L
expr_stmt|;
name|data
index|[
literal|3
index|]
operator|=
literal|4399690675695L
expr_stmt|;
return|return
name|data
return|;
block|}
specifier|public
specifier|static
specifier|final
name|BitSet
name|_tokenSet_0
init|=
operator|new
name|BitSet
argument_list|(
name|mk_tokenSet_0
argument_list|()
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|long
index|[]
name|mk_tokenSet_1
parameter_list|()
block|{
name|long
index|[]
name|data
init|=
operator|new
name|long
index|[
literal|8
index|]
decl_stmt|;
name|data
index|[
literal|0
index|]
operator|=
literal|36048931825647616L
expr_stmt|;
name|data
index|[
literal|1
index|]
operator|=
literal|2251802514817024L
expr_stmt|;
name|data
index|[
literal|2
index|]
operator|=
literal|6917529027641081856L
expr_stmt|;
name|data
index|[
literal|3
index|]
operator|=
literal|15L
expr_stmt|;
return|return
name|data
return|;
block|}
specifier|public
specifier|static
specifier|final
name|BitSet
name|_tokenSet_1
init|=
operator|new
name|BitSet
argument_list|(
name|mk_tokenSet_1
argument_list|()
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|long
index|[]
name|mk_tokenSet_2
parameter_list|()
block|{
name|long
index|[]
name|data
init|=
operator|new
name|long
index|[
literal|8
index|]
decl_stmt|;
name|data
index|[
literal|0
index|]
operator|=
operator|-
literal|36026990965702878L
expr_stmt|;
name|data
index|[
literal|1
index|]
operator|=
operator|-
literal|548831948705884125L
expr_stmt|;
name|data
index|[
literal|2
index|]
operator|=
operator|-
literal|126171158914517501L
expr_stmt|;
name|data
index|[
literal|3
index|]
operator|=
literal|4399690675695L
expr_stmt|;
return|return
name|data
return|;
block|}
specifier|public
specifier|static
specifier|final
name|BitSet
name|_tokenSet_2
init|=
operator|new
name|BitSet
argument_list|(
name|mk_tokenSet_2
argument_list|()
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|long
index|[]
name|mk_tokenSet_3
parameter_list|()
block|{
name|long
index|[]
name|data
init|=
operator|new
name|long
index|[
literal|8
index|]
decl_stmt|;
name|data
index|[
literal|0
index|]
operator|=
operator|-
literal|36026993113186526L
expr_stmt|;
name|data
index|[
literal|1
index|]
operator|=
operator|-
literal|548831948705884125L
expr_stmt|;
name|data
index|[
literal|2
index|]
operator|=
operator|-
literal|126171158914517501L
expr_stmt|;
name|data
index|[
literal|3
index|]
operator|=
literal|4399690675695L
expr_stmt|;
return|return
name|data
return|;
block|}
specifier|public
specifier|static
specifier|final
name|BitSet
name|_tokenSet_3
init|=
operator|new
name|BitSet
argument_list|(
name|mk_tokenSet_3
argument_list|()
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|long
index|[]
name|mk_tokenSet_4
parameter_list|()
block|{
name|long
index|[]
name|data
init|=
block|{
literal|2148532224L
block|,
literal|606930418532352L
block|,
literal|0L
block|,
literal|0L
block|,
literal|0L
block|}
decl_stmt|;
return|return
name|data
return|;
block|}
specifier|public
specifier|static
specifier|final
name|BitSet
name|_tokenSet_4
init|=
operator|new
name|BitSet
argument_list|(
name|mk_tokenSet_4
argument_list|()
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|long
index|[]
name|mk_tokenSet_5
parameter_list|()
block|{
name|long
index|[]
name|data
init|=
block|{
literal|1048576L
block|,
literal|606930418532352L
block|,
literal|0L
block|,
literal|0L
block|,
literal|0L
block|}
decl_stmt|;
return|return
name|data
return|;
block|}
specifier|public
specifier|static
specifier|final
name|BitSet
name|_tokenSet_5
init|=
operator|new
name|BitSet
argument_list|(
name|mk_tokenSet_5
argument_list|()
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|long
index|[]
name|mk_tokenSet_6
parameter_list|()
block|{
name|long
index|[]
name|data
init|=
operator|new
name|long
index|[
literal|8
index|]
decl_stmt|;
name|data
index|[
literal|1
index|]
operator|=
literal|4096L
expr_stmt|;
name|data
index|[
literal|3
index|]
operator|=
literal|1627389952L
expr_stmt|;
return|return
name|data
return|;
block|}
specifier|public
specifier|static
specifier|final
name|BitSet
name|_tokenSet_6
init|=
operator|new
name|BitSet
argument_list|(
name|mk_tokenSet_6
argument_list|()
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|long
index|[]
name|mk_tokenSet_7
parameter_list|()
block|{
name|long
index|[]
name|data
init|=
block|{
literal|2148532224L
block|,
literal|598134325510144L
block|,
literal|0L
block|,
literal|0L
block|,
literal|0L
block|}
decl_stmt|;
return|return
name|data
return|;
block|}
specifier|public
specifier|static
specifier|final
name|BitSet
name|_tokenSet_7
init|=
operator|new
name|BitSet
argument_list|(
name|mk_tokenSet_7
argument_list|()
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|long
index|[]
name|mk_tokenSet_8
parameter_list|()
block|{
name|long
index|[]
name|data
init|=
block|{
literal|6176L
block|,
literal|32L
block|,
literal|0L
block|,
literal|0L
block|,
literal|0L
block|}
decl_stmt|;
return|return
name|data
return|;
block|}
specifier|public
specifier|static
specifier|final
name|BitSet
name|_tokenSet_8
init|=
operator|new
name|BitSet
argument_list|(
name|mk_tokenSet_8
argument_list|()
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|long
index|[]
name|mk_tokenSet_9
parameter_list|()
block|{
name|long
index|[]
name|data
init|=
operator|new
name|long
index|[
literal|8
index|]
decl_stmt|;
name|data
index|[
literal|0
index|]
operator|=
operator|-
literal|36006858306502806L
expr_stmt|;
name|data
index|[
literal|1
index|]
operator|=
operator|-
literal|542648292878575581L
expr_stmt|;
name|data
index|[
literal|2
index|]
operator|=
operator|-
literal|126171158904553725L
expr_stmt|;
name|data
index|[
literal|3
index|]
operator|=
literal|4399690675695L
expr_stmt|;
return|return
name|data
return|;
block|}
specifier|public
specifier|static
specifier|final
name|BitSet
name|_tokenSet_9
init|=
operator|new
name|BitSet
argument_list|(
name|mk_tokenSet_9
argument_list|()
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|long
index|[]
name|mk_tokenSet_10
parameter_list|()
block|{
name|long
index|[]
name|data
init|=
operator|new
name|long
index|[
literal|8
index|]
decl_stmt|;
name|data
index|[
literal|0
index|]
operator|=
operator|-
literal|36026993113186518L
expr_stmt|;
name|data
index|[
literal|1
index|]
operator|=
operator|-
literal|549403694752327645L
expr_stmt|;
name|data
index|[
literal|2
index|]
operator|=
operator|-
literal|126171158914517501L
expr_stmt|;
name|data
index|[
literal|3
index|]
operator|=
literal|4399690675695L
expr_stmt|;
return|return
name|data
return|;
block|}
specifier|public
specifier|static
specifier|final
name|BitSet
name|_tokenSet_10
init|=
operator|new
name|BitSet
argument_list|(
name|mk_tokenSet_10
argument_list|()
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|long
index|[]
name|mk_tokenSet_11
parameter_list|()
block|{
name|long
index|[]
name|data
init|=
operator|new
name|long
index|[
literal|8
index|]
decl_stmt|;
name|data
index|[
literal|0
index|]
operator|=
literal|9151314442835722240L
expr_stmt|;
name|data
index|[
literal|1
index|]
operator|=
literal|35184372088832L
expr_stmt|;
name|data
index|[
literal|3
index|]
operator|=
literal|4398046511488L
expr_stmt|;
return|return
name|data
return|;
block|}
specifier|public
specifier|static
specifier|final
name|BitSet
name|_tokenSet_11
init|=
operator|new
name|BitSet
argument_list|(
name|mk_tokenSet_11
argument_list|()
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|long
index|[]
name|mk_tokenSet_12
parameter_list|()
block|{
name|long
index|[]
name|data
init|=
operator|new
name|long
index|[
literal|8
index|]
decl_stmt|;
name|data
index|[
literal|0
index|]
operator|=
operator|-
literal|36026993113186526L
expr_stmt|;
name|data
index|[
literal|1
index|]
operator|=
operator|-
literal|544900095124957149L
expr_stmt|;
name|data
index|[
literal|2
index|]
operator|=
operator|-
literal|126171158914517501L
expr_stmt|;
name|data
index|[
literal|3
index|]
operator|=
literal|4399690675695L
expr_stmt|;
return|return
name|data
return|;
block|}
specifier|public
specifier|static
specifier|final
name|BitSet
name|_tokenSet_12
init|=
operator|new
name|BitSet
argument_list|(
name|mk_tokenSet_12
argument_list|()
argument_list|)
decl_stmt|;
block|}
end_class

end_unit

